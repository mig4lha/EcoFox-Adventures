import{g as e,p as t,P as n,c as r}from"./phaser-CXpx8Ws7.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},s={},a={exports:{}},o={},l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator,_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function S(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||_}function E(){}function T(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||_}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=S.prototype;var I=T.prototype=new E;I.constructor=T,w(I,S.prototype),I.isPureReactComponent=!0;var C=Array.isArray,x=Object.prototype.hasOwnProperty,A={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:l,type:e,key:s,ref:a,props:i,_owner:A.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var L=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var a=!1;if(null===e)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l:case u:a=!0}}if(a)return i=i(a=e),e=""===r?"."+P(a,0):r,C(i)?(n="",null!=e&&(n=e.replace(L,"$&/")+"/"),O(i,t,n,"",(function(e){return e}))):null!=i&&(R(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(L,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",C(e))for(var o=0;o<e.length;o++){var c=r+P(s=e[o],o);a+=O(s,t,n,c,i)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),o=0;!(s=e.next()).done;)a+=O(s=s.value,t,n,c=r+P(s,o++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function M(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function U(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},j={transition:null},V={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:j,ReactCurrentOwner:A};function z(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=S,o.Fragment=c,o.Profiler=d,o.PureComponent=T,o.StrictMode=h,o.Suspense=g,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,o.act=z,o.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=w({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=A.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)x.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==o?o[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:l,type:e.type,key:i,ref:s,props:r,_owner:a}},o.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},o.createElement=D,o.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:m,render:e}},o.isValidElement=R,o.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:U}},o.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},o.unstable_act=z,o.useCallback=function(e,t){return F.current.useCallback(e,t)},o.useContext=function(e){return F.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return F.current.useDeferredValue(e)},o.useEffect=function(e,t){return F.current.useEffect(e,t)},o.useId=function(){return F.current.useId()},o.useImperativeHandle=function(e,t,n){return F.current.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return F.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return F.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return F.current.useMemo(e,t)},o.useReducer=function(e,t,n){return F.current.useReducer(e,t,n)},o.useRef=function(e){return F.current.useRef(e)},o.useState=function(e){return F.current.useState(e)},o.useSyncExternalStore=function(e,t,n){return F.current.useSyncExternalStore(e,t,n)},o.useTransition=function(){return F.current.useTransition()},o.version="18.3.1",a.exports=o;var B=a.exports;const $=e(B);var q=B,H=Symbol.for("react.element"),K=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,G=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,n){var r,i={},s=null,a=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)W.call(t,r)&&!Q.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:H,type:e,key:s,ref:a,props:i,_owner:G.current}}s.Fragment=K,s.jsx=X,s.jsxs=X,i.exports=s;var J=i.exports,Y={},Z={exports:{}},ee={},te={exports:{}},ne={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>i(l,n))u<s&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<s&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function _(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,R(w);else{var t=n(u);null!==t&&L(_,t.startTime-e)}}function w(t,i){p=!1,m&&(m=!1,y(T),T=-1),f=!0;var s=d;try{for(b(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!x());){var a=h.callback;if("function"==typeof a){h.callback=null,d=h.priorityLevel;var o=a(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?h.callback=o:h===n(l)&&r(l),b(i)}else r(l);h=n(l)}if(null!==h)var c=!0;else{var g=n(u);null!==g&&L(_,g.startTime-i),c=!1}return c}finally{h=null,d=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,T=-1,I=5,C=-1;function x(){return!(e.unstable_now()-C<I)}function A(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"==typeof v)k=function(){v(A)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=A,k=function(){D.postMessage(null)}}else k=function(){g(A,0)};function R(e){E=e,S||(S=!0,k())}function L(t,n){T=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,R(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(u,r),null===n(l)&&r===n(u)&&(m?(y(T),T=-1):m=!0,L(_,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,R(w))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(ne),te.exports=ne;var re=te.exports,ie=B,se=re;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oe=new Set,le={};function ue(e,t){ce(e,t),ce(e+"Capture",t)}function ce(e,t){for(le[e]=t,e=0;e<t.length;e++)oe.add(t[e])}var he=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),de=Object.prototype.hasOwnProperty,fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe={},me={};function ge(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ye[e]=new ge(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ye[t]=new ge(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ye[e]=new ge(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ye[e]=new ge(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ye[e]=new ge(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ye[e]=new ge(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ye[e]=new ge(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ye[e]=new ge(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ye[e]=new ge(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ve=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function _e(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!de.call(me,e)||!de.call(pe,e)&&(fe.test(e)?me[e]=!0:(pe[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ve,be);ye[t]=new ge(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ve,be);ye[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ve,be);ye[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ye[e]=new ge(e,1,!1,e.toLowerCase(),null,!1,!1)})),ye.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ye[e]=new ge(e,1,!1,e.toLowerCase(),null,!0,!0)}));var we=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),Se=Symbol.for("react.portal"),Ee=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),xe=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),Oe=Symbol.iterator;function Me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}var Ue,Fe=Object.assign;function je(e){if(void 0===Ue)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ue=t&&t[1]||""}return"\n"+Ue+e}var Ve=!1;function ze(e,t){if(!e||Ve)return"";Ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{Ve=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?je(e):""}function Be(e){switch(e.tag){case 5:return je(e.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return ze(e.type,!1);case 11:return ze(e.type.render,!1);case 1:return ze(e.type,!0);default:return""}}function $e(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ee:return"Fragment";case Se:return"Portal";case Ie:return"Profiler";case Te:return"StrictMode";case Ne:return"Suspense";case De:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case xe:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case Ae:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Re:return null!==(t=e.displayName||null)?t:$e(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return $e(e(t))}catch(n){}}return null}function qe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(t);case 8:return t===Te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function He(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=Ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Xe(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Je(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=He(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ye(e,t){null!=(t=t.checked)&&_e(e,"checked",t,!1)}function Ze(e,t){Ye(e,t);var n=He(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?tt(e,t.type,n):t.hasOwnProperty("defaultValue")&&tt(e,t.type,He(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function et(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function tt(e,t,n){"number"===t&&Qe(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nt=Array.isArray;function rt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+He(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function it(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ae(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function st(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ae(92));if(nt(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:He(n)}}function at(e,t){var n=He(t.value),r=He(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function lt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ct,ht,dt=(ht=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ht(e,t)}))}:ht);function ft(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function gt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pt.hasOwnProperty(e)&&pt[e]?(""+t).trim():t+"px"}function yt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pt).forEach((function(e){mt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pt[t]=pt[e]}))}));var vt=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(e,t){if(t){if(vt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ae(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ae(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ae(62))}}function _t(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var St=null,Et=null,Tt=null;function It(e){if(e=_s(e)){if("function"!=typeof St)throw Error(ae(280));var t=e.stateNode;t&&(t=ks(t),St(e.stateNode,e.type,t))}}function Ct(e){Et?Tt?Tt.push(e):Tt=[e]:Et=e}function xt(){if(Et){var e=Et,t=Tt;if(Tt=Et=null,It(e),t)for(e=0;e<t.length;e++)It(t[e])}}function At(e,t){return e(t)}function Nt(){}var Dt=!1;function Rt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return At(e,t,n)}finally{Dt=!1,(null!==Et||null!==Tt)&&(Nt(),xt())}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var r=ks(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ae(231,t,typeof n));return n}var Pt=!1;if(he)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ht){Pt=!1}function Mt(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ut=!1,Ft=null,jt=!1,Vt=null,zt={onError:function(e){Ut=!0,Ft=e}};function Bt(e,t,n,r,i,s,a,o,l){Ut=!1,Ft=null,Mt.apply(zt,arguments)}function $t(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ht(e){if($t(e)!==e)throw Error(ae(188))}function Kt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$t(e)))throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ht(i),e;if(s===r)return Ht(i),t;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(3!==n.tag)throw Error(ae(188));return n.stateNode.current===n?e:t}(e))?Wt(e):null}function Wt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Wt(e);if(null!==t)return t;e=e.sibling}return null}var Gt=se.unstable_scheduleCallback,Qt=se.unstable_cancelCallback,Xt=se.unstable_shouldYield,Jt=se.unstable_requestPaint,Yt=se.unstable_now,Zt=se.unstable_getCurrentPriorityLevel,en=se.unstable_ImmediatePriority,tn=se.unstable_UserBlockingPriority,nn=se.unstable_NormalPriority,rn=se.unstable_LowPriority,sn=se.unstable_IdlePriority,an=null,on=null,ln=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(un(e)/cn|0)|0},un=Math.log,cn=Math.LN2,hn=64,dn=4194304;function fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=fn(o):0!=(s&=a)&&(r=fn(s))}else 0!=(a=n&~i)?r=fn(a):0!==s&&(r=fn(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ln(t)),r|=e[n],t&=~i;return r}function mn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yn(){var e=hn;return 0==(4194240&(hn<<=1))&&(hn=64),e}function vn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ln(t)]=n}function _n(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wn=0;function kn(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Sn,En,Tn,In,Cn,xn=!1,An=[],Nn=null,Dn=null,Rn=null,Ln=new Map,Pn=new Map,On=[],Mn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Un(e,t){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Ln.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(t.pointerId)}}function Fn(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=_s(t))&&En(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jn(e){var t=bs(e.target);if(null!==t){var n=$t(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qt(n)))return e.blockedOn=t,void Cn(e.priority,(function(){Tn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_s(n))&&En(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);wt=r,n.target.dispatchEvent(r),wt=null,t.shift()}return!0}function zn(e,t,n){Vn(e)&&n.delete(t)}function Bn(){xn=!1,null!==Nn&&Vn(Nn)&&(Nn=null),null!==Dn&&Vn(Dn)&&(Dn=null),null!==Rn&&Vn(Rn)&&(Rn=null),Ln.forEach(zn),Pn.forEach(zn)}function $n(e,t){e.blockedOn===t&&(e.blockedOn=null,xn||(xn=!0,se.unstable_scheduleCallback(se.unstable_NormalPriority,Bn)))}function qn(e){function t(t){return $n(t,e)}if(0<An.length){$n(An[0],e);for(var n=1;n<An.length;n++){var r=An[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nn&&$n(Nn,e),null!==Dn&&$n(Dn,e),null!==Rn&&$n(Rn,e),Ln.forEach(t),Pn.forEach(t),n=0;n<On.length;n++)(r=On[n]).blockedOn===e&&(r.blockedOn=null);for(;0<On.length&&null===(n=On[0]).blockedOn;)jn(n),null===n.blockedOn&&On.shift()}var Hn=we.ReactCurrentBatchConfig,Kn=!0;function Wn(e,t,n,r){var i=wn,s=Hn.transition;Hn.transition=null;try{wn=1,Qn(e,t,n,r)}finally{wn=i,Hn.transition=s}}function Gn(e,t,n,r){var i=wn,s=Hn.transition;Hn.transition=null;try{wn=4,Qn(e,t,n,r)}finally{wn=i,Hn.transition=s}}function Qn(e,t,n,r){if(Kn){var i=Jn(e,t,n,r);if(null===i)Hi(e,t,r,Xn,n),Un(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nn=Fn(Nn,e,t,n,r,i),!0;case"dragenter":return Dn=Fn(Dn,e,t,n,r,i),!0;case"mouseover":return Rn=Fn(Rn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ln.set(s,Fn(Ln.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pn.set(s,Fn(Pn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Un(e,r),4&t&&-1<Mn.indexOf(e)){for(;null!==i;){var s=_s(i);if(null!==s&&Sn(s),null===(s=Jn(e,t,n,r))&&Hi(e,t,r,Xn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hi(e,t,r,null,n)}}var Xn=null;function Jn(e,t,n,r){if(Xn=null,null!==(e=bs(e=kt(r))))if(null===(t=$t(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xn=e,null}function Yn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case en:return 1;case tn:return 4;case nn:case rn:return 16;case sn:return 536870912;default:return 16}default:return 16}}var Zn=null,er=null,tr=null;function nr(){if(tr)return tr;var e,t,n=er,r=n.length,i="value"in Zn?Zn.value:Zn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return tr=i.slice(e,1<t?1-t:void 0)}function rr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ir(){return!0}function sr(){return!1}function ar(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ir:sr,this.isPropagationStopped=sr,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),t}var or,lr,ur,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=ar(cr),dr=Fe({},cr,{view:0,detail:0}),fr=ar(dr),pr=Fe({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&"mousemove"===e.type?(or=e.screenX-ur.screenX,lr=e.screenY-ur.screenY):lr=or=0,ur=e),or)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),mr=ar(pr),gr=ar(Fe({},pr,{dataTransfer:0})),yr=ar(Fe({},dr,{relatedTarget:0})),vr=ar(Fe({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=Fe({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=ar(br),wr=ar(Fe({},cr,{data:0})),kr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Ir(){return Tr}var Cr=Fe({},dr,{key:function(e){if(e.key){var t=kr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?rr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xr=ar(Cr),Ar=ar(Fe({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nr=ar(Fe({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir})),Dr=ar(Fe({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=Fe({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lr=ar(Rr),Pr=[9,13,27,32],Or=he&&"CompositionEvent"in window,Mr=null;he&&"documentMode"in document&&(Mr=document.documentMode);var Ur=he&&"TextEvent"in window&&!Mr,Fr=he&&(!Or||Mr&&8<Mr&&11>=Mr),jr=String.fromCharCode(32),Vr=!1;function zr(e,t){switch(e){case"keyup":return-1!==Pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $r=!1,qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Kr(e,t,n,r){Ct(r),0<(t=Wi(t,"onChange")).length&&(n=new hr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wr=null,Gr=null;function Qr(e){ji(e,0)}function Xr(e){if(Ge(ws(e)))return e}function Jr(e,t){if("change"===e)return t}var Yr=!1;if(he){var Zr;if(he){var ei="oninput"in document;if(!ei){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),ei="function"==typeof ti.oninput}Zr=ei}else Zr=!1;Yr=Zr&&(!document.documentMode||9<document.documentMode)}function ni(){Wr&&(Wr.detachEvent("onpropertychange",ri),Gr=Wr=null)}function ri(e){if("value"===e.propertyName&&Xr(Gr)){var t=[];Kr(t,Gr,e,kt(e)),Rt(Qr,t)}}function ii(e,t,n){"focusin"===e?(ni(),Gr=n,(Wr=t).attachEvent("onpropertychange",ri)):"focusout"===e&&ni()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Gr)}function ai(e,t){if("click"===e)return Xr(t)}function oi(e,t){if("input"===e||"change"===e)return Xr(t)}var li="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ui(e,t){if(li(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!de.call(t,i)||!li(e[i],t[i]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,r=ci(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ci(r)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fi(){for(var e=window,t=Qe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Qe((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mi(e){var t=fi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==r&&pi(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hi(n,s);var a=hi(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=he&&"documentMode"in document&&11>=document.documentMode,yi=null,vi=null,bi=null,_i=!1;function wi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==yi||yi!==Qe(r)||(r="selectionStart"in(r=yi)&&pi(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},bi&&ui(bi,r)||(bi=r,0<(r=Wi(vi,"onSelect")).length&&(t=new hr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yi)))}function ki(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Si={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionend:ki("Transition","TransitionEnd")},Ei={},Ti={};function Ii(e){if(Ei[e])return Ei[e];if(!Si[e])return e;var t,n=Si[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ti)return Ei[e]=n[t];return e}he&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);var Ci=Ii("animationend"),xi=Ii("animationiteration"),Ai=Ii("animationstart"),Ni=Ii("transitionend"),Di=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(e,t){Di.set(e,t),ue(t,[e])}for(var Pi=0;Pi<Ri.length;Pi++){var Oi=Ri[Pi];Li(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Li(Ci,"onAnimationEnd"),Li(xi,"onAnimationIteration"),Li(Ai,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Ni,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ui=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function Fi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,o,l){if(Bt.apply(this,arguments),Ut){if(!Ut)throw Error(ae(198));var u=Ft;Ut=!1,Ft=null,jt||(jt=!0,Vt=u)}}(r,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fi(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fi(i,o,u),s=l}}}if(jt)throw e=Vt,jt=!1,Vt=null,e}function Vi(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(qi(t,e,2,!1),n.add(r))}function zi(e,t,n){var r=0;t&&(r|=4),qi(n,e,r,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function $i(e){if(!e[Bi]){e[Bi]=!0,oe.forEach((function(t){"selectionchange"!==t&&(Ui.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,zi("selectionchange",!1,t))}}function qi(e,t,n,r){switch(Yn(t)){case 1:var i=Wn;break;case 4:i=Gn;break;default:i=Qn}n=i.bind(null,t,n,e),i=void 0,!Pt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hi(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=bs(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Rt((function(){var r=s,i=kt(n),a=[];e:{var o=Di.get(e);if(void 0!==o){var l=hr,u=e;switch(e){case"keypress":if(0===rr(n))break e;case"keydown":case"keyup":l=xr;break;case"focusin":u="focus",l=yr;break;case"focusout":u="blur",l=yr;break;case"beforeblur":case"afterblur":l=yr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nr;break;case Ci:case xi:case Ai:l=vr;break;case Ni:l=Dr;break;case"scroll":l=fr;break;case"wheel":l=Lr;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Lt(p,d))&&c.push(Ki(p,m,f))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===wt||!(u=n.relatedTarget||n.fromElement)||!bs(u)&&!u[ms])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?bs(u):null)&&(u!==(h=$t(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:ws(l),f=null==u?o:ws(u),(o=new c(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,bs(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Gi(f))p++;for(f=0,m=d;m;m=Gi(m))f++;for(;0<p-f;)c=Gi(c),p--;for(;0<f-p;)d=Gi(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Gi(c),d=Gi(d)}c=null}else c=null;null!==l&&Qi(a,o,l,c,!1),null!==u&&null!==h&&Qi(a,h,u,c,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jr;else if(Hr(o))if(Yr)g=oi;else{g=si;var y=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ai);switch(g&&(g=g(e,r))?Kr(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&tt(o,"number",o.value)),y=r?ws(r):window,e){case"focusin":(Hr(y)||"true"===y.contentEditable)&&(yi=y,vi=r,bi=null);break;case"focusout":bi=vi=yi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,wi(a,n,i);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(a,n,i)}var v;if(Or)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $r?zr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fr&&"ko"!==n.locale&&($r||"onCompositionStart"!==b?"onCompositionEnd"===b&&$r&&(v=nr()):(er="value"in(Zn=i)?Zn.value:Zn.textContent,$r=!0)),0<(y=Wi(r,b)).length&&(b=new wr(b,e,null,n,i),a.push({event:b,listeners:y}),(v||null!==(v=Br(n)))&&(b.data=v))),(v=Ur?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(Vr=!0,jr);case"textInput":return(e=t.data)===jr&&Vr?null:e;default:return null}}(e,n):function(e,t){if($r)return"compositionend"===e||!Or&&zr(e,t)?(e=nr(),tr=er=Zn=null,$r=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fr&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wi(r,"onBeforeInput")).length&&(i=new wr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v)}ji(a,t)}))}function Ki(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Lt(e,n))&&r.unshift(Ki(e,s,i)),null!=(s=Lt(e,t))&&r.push(Ki(e,s,i))),e=e.return}return r}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Lt(n,s))&&a.unshift(Ki(n,l,o)):i||null!=(l=Lt(n,s))&&a.push(Ki(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xi=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function Yi(e){return("string"==typeof e?e:""+e).replace(Xi,"\n").replace(Ji,"")}function Zi(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(ae(425))}function es(){}var ts=null,ns=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"==typeof setTimeout?setTimeout:void 0,ss="function"==typeof clearTimeout?clearTimeout:void 0,as="function"==typeof Promise?Promise:void 0,os="function"==typeof queueMicrotask?queueMicrotask:void 0!==as?function(e){return as.resolve(null).then(e).catch(ls)}:is;function ls(e){setTimeout((function(){throw e}))}function us(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qn(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),fs="__reactFiber$"+ds,ps="__reactProps$"+ds,ms="__reactContainer$"+ds,gs="__reactEvents$"+ds,ys="__reactListeners$"+ds,vs="__reactHandles$"+ds;function bs(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[fs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hs(e);null!==e;){if(n=e[fs])return n;e=hs(e)}return t}n=(e=n).parentNode}return null}function _s(e){return!(e=e[fs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ae(33))}function ks(e){return e[ps]||null}var Ss=[],Es=-1;function Ts(e){return{current:e}}function Is(e){0>Es||(e.current=Ss[Es],Ss[Es]=null,Es--)}function Cs(e,t){Es++,Ss[Es]=e.current,e.current=t}var xs={},As=Ts(xs),Ns=Ts(!1),Ds=xs;function Rs(e,t){var n=e.type.contextTypes;if(!n)return xs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ls(e){return null!=e.childContextTypes}function Ps(){Is(Ns),Is(As)}function Os(e,t,n){if(As.current!==xs)throw Error(ae(168));Cs(As,t),Cs(Ns,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(ae(108,qe(e)||"Unknown",i));return Fe({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xs,Ds=As.current,Cs(As,e),Cs(Ns,Ns.current),!0}function Fs(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=Ms(e,t,Ds),r.__reactInternalMemoizedMergedChildContext=e,Is(Ns),Is(As),Cs(As,e)):Is(Ns),Cs(Ns,n)}var js=null,Vs=!1,zs=!1;function Bs(e){null===js?js=[e]:js.push(e)}function $s(){if(!zs&&null!==js){zs=!0;var e=0,t=wn;try{var n=js;for(wn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}js=null,Vs=!1}catch(i){throw null!==js&&(js=js.slice(e+1)),Gt(en,$s),i}finally{wn=t,zs=!1}}return null}var qs=[],Hs=0,Ks=null,Ws=0,Gs=[],Qs=0,Xs=null,Js=1,Ys="";function Zs(e,t){qs[Hs++]=Ws,qs[Hs++]=Ks,Ks=e,Ws=t}function ea(e,t,n){Gs[Qs++]=Js,Gs[Qs++]=Ys,Gs[Qs++]=Xs,Xs=e;var r=Js;e=Ys;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var s=32-ln(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Js=1<<32-ln(t)+i|n<<i|r,Ys=s+e}else Js=1<<s|n<<i|r,Ys=e}function ta(e){null!==e.return&&(Zs(e,1),ea(e,1,0))}function na(e){for(;e===Ks;)Ks=qs[--Hs],qs[Hs]=null,Ws=qs[--Hs],qs[Hs]=null;for(;e===Xs;)Xs=Gs[--Qs],Gs[Qs]=null,Ys=Gs[--Qs],Gs[Qs]=null,Js=Gs[--Qs],Gs[Qs]=null}var ra=null,ia=null,sa=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,ia=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Js,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,ia=null,!0);default:return!1}}function ua(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ca(e){if(sa){var t=ia;if(t){var n=t;if(!la(e,t)){if(ua(e))throw Error(ae(418));t=cs(n.nextSibling);var r=ra;t&&la(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(ua(e))throw Error(ae(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function da(e){if(e!==ra)return!1;if(!sa)return ha(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=ia)){if(ua(e))throw fa(),Error(ae(418));for(;t;)oa(e,t),t=cs(t.nextSibling)}if(ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=ra?cs(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ia;e;)e=cs(e.nextSibling)}function pa(){ia=ra=null,sa=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var ga=we.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function _a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===Ee?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Le&&ba(s)===t.type)?((r=i(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ke:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case Se:return(t=jc(t,e.mode,n)).return=e,t;case Le:return h(e,(0,t._init)(t._payload),n)}if(nt(t)||Me(t))return(t=Mc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ke:return n.key===i?l(e,t,n,r):null;case Se:return n.key===i?u(e,t,n,r):null;case Le:return d(e,t,(i=n._init)(n._payload),r)}if(nt(n)||Me(n))return null!==i?null:c(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ke:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Se:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Le:return f(e,t,n,(0,r._init)(r._payload),i)}if(nt(r)||Me(r))return c(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}return function o(l,u,c,p){if("object"==typeof c&&null!==c&&c.type===Ee&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case ke:e:{for(var m=c.key,g=u;null!==g;){if(g.key===m){if((m=c.type)===Ee){if(7===g.tag){n(l,g.sibling),(u=i(g,c.props.children)).return=l,l=u;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Le&&ba(m)===g.type){n(l,g.sibling),(u=i(g,c.props)).ref=ya(l,g,c),u.return=l,l=u;break e}n(l,g);break}t(l,g),g=g.sibling}c.type===Ee?((u=Mc(c.props.children,l.mode,p,c.key)).return=l,l=u):((p=Oc(c.type,c.key,c.props,null,l.mode,p)).ref=ya(l,u,c),p.return=l,l=p)}return a(l);case Se:e:{for(g=c.key;null!==u;){if(u.key===g){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=i(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=jc(c,l.mode,p)).return=l,l=u}return a(l);case Le:return o(l,u,(g=c._init)(c._payload),p)}if(nt(c))return function(i,a,o,l){for(var u=null,c=null,p=a,m=a=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=s(y,a,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===o.length)return n(i,p),sa&&Zs(i,m),u;if(null===p){for(;m<o.length;m++)null!==(p=h(i,o[m],l))&&(a=s(p,a,m),null===c?u=p:c.sibling=p,c=p);return sa&&Zs(i,m),u}for(p=r(i,p);m<o.length;m++)null!==(g=f(p,i,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=s(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),sa&&Zs(i,m),u}(l,u,c,p);if(Me(c))return function(i,a,o,l){var u=Me(o);if("function"!=typeof u)throw Error(ae(150));if(null==(o=u.call(o)))throw Error(ae(151));for(var c=u=null,p=a,m=a=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=s(v,a,m),null===c?u=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),sa&&Zs(i,m),u;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=h(i,y.value,l))&&(a=s(y,a,m),null===c?u=y:c.sibling=y,c=y);return sa&&Zs(i,m),u}for(p=r(i,p);!y.done;m++,y=o.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),sa&&Zs(i,m),u}(l,u,c,p);va(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(u=i(u,c)).return=l,l=u):(n(l,u),(u=Fc(c,l.mode,p)).return=l,l=u),a(l)):n(l,u)}}var wa=_a(!0),ka=_a(!1),Sa=Ts(null),Ea=null,Ta=null,Ia=null;function Ca(){Ia=Ta=Ea=null}function xa(e){var t=Sa.current;Is(Sa),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Na(e,t){Ea=e,Ia=Ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_l=!0),e.firstContext=null)}function Da(e){var t=e._currentValue;if(Ia!==e)if(e={context:e,memoizedValue:t,next:null},null===Ta){if(null===Ea)throw Error(ae(308));Ta=e,Ea.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var Ra=null;function La(e){null===Ra?Ra=[e]:Ra.push(e)}function Pa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,La(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oa(e,r)}function Oa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Va(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Au)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oa(e,n)}return null===(i=r.interleaved)?(t.next=t,La(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oa(e,n)}function za(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_n(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $a(e,t,n,r){var i=e.updateQueue;Ma=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=Fe({},h,d);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Uu|=a,e.lanes=a,e.memoizedState=h}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ae(191,i));i.call(r)}}}var Ha={},Ka=Ts(Ha),Wa=Ts(Ha),Ga=Ts(Ha);function Qa(e){if(e===Ha)throw Error(ae(174));return e}function Xa(e,t){switch(Cs(Ga,t),Cs(Wa,e),Cs(Ka,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ut(null,"");break;default:t=ut(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Is(Ka),Cs(Ka,t)}function Ja(){Is(Ka),Is(Wa),Is(Ga)}function Ya(e){Qa(Ga.current);var t=Qa(Ka.current),n=ut(t,e.type);t!==n&&(Cs(Wa,e),Cs(Ka,n))}function Za(e){Wa.current===e&&(Is(Ka),Is(Wa))}var eo=Ts(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=we.ReactCurrentDispatcher,so=we.ReactCurrentBatchConfig,ao=0,oo=null,lo=null,uo=null,co=!1,ho=!1,fo=0,po=0;function mo(){throw Error(ae(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!li(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,s){if(ao=s,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?el:tl,e=n(r,i),ho){s=0;do{if(ho=!1,fo=0,25<=s)throw Error(ae(301));s+=1,uo=lo=null,t.updateQueue=null,io.current=nl,e=n(r,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,ao=0,uo=lo=oo=null,co=!1,t)throw Error(ae(300));return e}function vo(){var e=0!==fo;return fo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?oo.memoizedState=uo=e:uo=uo.next=e,uo}function _o(){if(null===lo){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===uo?oo.memoizedState:uo.next;if(null!==t)uo=t,lo=e;else{if(null===e)throw Error(ae(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===uo?oo.memoizedState=uo=e:uo=uo.next=e}return uo}function wo(e,t){return"function"==typeof t?t(e):t}function ko(e){var t=_o(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=lo,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((ao&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(o=l=h,a=r):l=l.next=h,oo.lanes|=c,Uu|=c}u=u.next}while(null!==u&&u!==s);null===l?a=r:l.next=o,li(r,t.memoizedState)||(_l=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,oo.lanes|=s,Uu|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=_o(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);li(s,t.memoizedState)||(_l=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Eo(){}function To(e,t){var n=oo,r=_o(),i=t(),s=!li(r.memoizedState,i);if(s&&(r.memoizedState=i,_l=!0),r=r.queue,Uo(xo.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,Ro(9,Co.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(ae(349));0!=(30&ao)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&No(e)}function xo(e,t,n){return n((function(){Ao(t)&&No(e)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!li(e,n)}catch(r){return!0}}function No(e){var t=Oa(e,1);null!==t&&rc(t,e,1,-1)}function Do(e){var t=bo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return _o().memoizedState}function Po(e,t,n,r){var i=bo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==lo){var a=lo.memoizedState;if(s=a.destroy,null!==r&&go(r,a.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Mo(e,t){return Po(8390656,8,e,t)}function Uo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function jo(e,t){return Oo(4,4,e,t)}function Vo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!=n?n.concat([e]):null,Oo(4,4,Vo.bind(null,t,e),n)}function Bo(){}function $o(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0==(21&ao)?(e.baseState&&(e.baseState=!1,_l=!0),e.memoizedState=n):(li(n,t)||(n=yn(),oo.lanes|=n,Uu|=n,e.baseState=!0),t)}function Ko(e,t){var n=wn;wn=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{wn=n,so.transition=r}}function Wo(){return _o().memoizedState}function Go(e,t,n){var r=nc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Jo(t,n):null!==(n=Pa(e,t,n,r))&&(rc(n,e,r,tc()),Yo(n,t,r))}function Qo(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,li(o,a)){var l=t.interleaved;return null===l?(i.next=i,La(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Pa(e,t,i,r))&&(rc(n,e,r,i=tc()),Yo(n,t,r))}}function Xo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){ho=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_n(e,n)}}var Zo={readContext:Da,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},el={readContext:Da,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Da,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Po(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Do,useDebugValue:Bo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Ko.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=bo();if(sa){if(void 0===n)throw Error(ae(407));n=n()}else{if(n=t(),null===Nu)throw Error(ae(349));0!=(30&ao)||Io(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Mo(xo.bind(null,r,s,e),[e]),r.flags|=2048,Ro(9,Co.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=bo(),t=Nu.identifierPrefix;if(sa){var n=Ys;t=":"+t+"R"+(n=(Js&~(1<<32-ln(Js)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tl={readContext:Da,useCallback:$o,useContext:Da,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:ko,useRef:Lo,useState:function(){return ko(wo)},useDebugValue:Bo,useDeferredValue:function(e){return Ho(_o(),lo.memoizedState,e)},useTransition:function(){return[ko(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Wo,unstable_isNewReconciler:!1},nl={readContext:Da,useCallback:$o,useContext:Da,useEffect:Uo,useImperativeHandle:zo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:So,useRef:Lo,useState:function(){return So(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=_o();return null===lo?t.memoizedState=e:Ho(t,lo.memoizedState,e)},useTransition:function(){return[So(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Wo,unstable_isNewReconciler:!1};function rl(e,t){if(e&&e.defaultProps){for(var n in t=Fe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function il(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Fe({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sl={isMounted:function(e){return!!(e=e._reactInternals)&&$t(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=ja(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Va(e,s,i))&&(rc(t,e,i,r),za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=ja(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Va(e,s,i))&&(rc(t,e,i,r),za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=ja(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Va(e,i,r))&&(rc(t,e,r,n),za(t,e,r))}};function al(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!(t.prototype&&t.prototype.isPureReactComponent&&ui(n,r)&&ui(i,s))}function ol(e,t,n){var r=!1,i=xs,s=t.contextType;return"object"==typeof s&&null!==s?s=Da(s):(i=Ls(t)?Ds:As.current,s=(r=null!=(r=t.contextTypes))?Rs(e,i):xs),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ll(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sl.enqueueReplaceState(t,t.state,null)}function ul(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ua(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Da(s):(s=Ls(t)?Ds:As.current,i.context=Rs(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(il(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sl.enqueueReplaceState(i,i.state,null),$a(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var n="",r=t;do{n+=Be(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function hl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fl="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,n){(n=ja(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),dl(0,t)},n}function ml(e,t,n){(n=ja(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){dl(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){dl(0,t),"function"!=typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vl(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ja(-1,1)).tag=2,Va(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bl=we.ReactCurrentOwner,_l=!1;function wl(e,t,n,r){t.child=null===e?ka(t,null,n,r):wa(t,e.child,n,r)}function kl(e,t,n,r,i){n=n.render;var s=t.ref;return Na(t,i),r=yo(e,t,n,r,s,i),n=vo(),null===e||_l?(sa&&n&&ta(t),t.flags|=1,wl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Sl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,El(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ui)(a,r)&&e.ref===t.ref)return Hl(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function El(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ui(s,r)&&e.ref===t.ref){if(_l=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,Hl(e,t,i);0!=(131072&e.flags)&&(_l=!0)}}return Cl(e,t,n,r,i)}function Tl(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Pu,Lu),Lu|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Pu,Lu),Lu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Cs(Pu,Lu),Lu|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Cs(Pu,Lu),Lu|=r;return wl(e,t,i,n),t.child}function Il(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,n,r,i){var s=Ls(n)?Ds:As.current;return s=Rs(t,s),Na(t,i),n=yo(e,t,n,r,s,i),r=vo(),null===e||_l?(sa&&r&&ta(t),t.flags|=1,wl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function xl(e,t,n,r,i){if(Ls(n)){var s=!0;Us(t)}else s=!1;if(Na(t,i),null===t.stateNode)ql(e,t),ol(t,n,r),ul(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?Da(u):Rs(t,u=Ls(n)?Ds:As.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==u)&&ll(t,a,r,u),Ma=!1;var d=t.memoizedState;a.state=d,$a(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ns.current||Ma?("function"==typeof c&&(il(t,n,c,r),l=t.memoizedState),(o=Ma||al(t,n,o,r,d,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fa(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:rl(t.type,o),a.props=u,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Da(l):Rs(t,l=Ls(n)?Ds:As.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ll(t,a,r,l),Ma=!1,d=t.memoizedState,a.state=d,$a(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ns.current||Ma?("function"==typeof f&&(il(t,n,f,r),p=t.memoizedState),(u=Ma||al(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,s,i)}function Al(e,t,n,r,i,s){Il(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&Fs(t,n,!1),Hl(e,t,s);r=t.stateNode,bl.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wa(t,e.child,null,s),t.child=wa(t,null,o,s)):wl(e,t,o,s),t.memoizedState=r.state,i&&Fs(t,n,!0),t.child}function Nl(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Xa(e,t.containerInfo)}function Dl(e,t,n,r,i){return pa(),ma(i),t.flags|=256,wl(e,t,n,r),t.child}var Rl,Ll,Pl,Ol,Ml={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fl(e,t,n){var r,i=t.pendingProps,s=eo.current,a=!1,o=0!=(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Cs(eo,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Uc(o,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ul(n),t.memoizedState=Ml,e):jl(t,o));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Vl(e,t,a,r=hl(Error(ae(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!=(1&t.mode)&&wa(t,e.child,null,a),t.child.memoizedState=Ul(a),t.memoizedState=Ml,s);if(0==(1&t.mode))return Vl(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,Vl(e,t,a,r=hl(s=Error(ae(419)),r,void 0))}if(o=0!=(a&e.childLanes),_l||o){if(null!==(r=Nu)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Oa(e,i),rc(r,e,i,-1))}return gc(),Vl(e,t,a,r=hl(Error(ae(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ia=cs(i.nextSibling),ra=t,sa=!0,aa=null,null!==e&&(Gs[Qs++]=Js,Gs[Qs++]=Ys,Gs[Qs++]=Xs,Js=e.id,Ys=e.overflow,Xs=t),(t=jl(t,r.children)).flags|=4096,t)}(e,t,o,i,r,s,n);if(a){a=i.fallback,o=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&o)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Pc(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Pc(r,a):(a=Mc(a,o,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?Ul(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ml,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function jl(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vl(e,t,n,r){return null!==r&&ma(r),wa(t,e.child,null,n),(e=jl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function Bl(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $l(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wl(e,t,r.children,n),0!=(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,n,t);else if(19===e.tag)zl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(eo,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bl(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bl(t,!0,n,null,s);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ql(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ae(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gl(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Ls(t.type)&&Ps(),Wl(t),null;case 3:return r=t.stateNode,Ja(),Is(Ns),Is(As),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ll(e,t),Wl(t),null;case 5:Za(t);var i=Qa(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Pl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ae(166));return Wl(t),null}if(e=Qa(Ka.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[fs]=t,r[ps]=s,e=0!=(1&t.mode),n){case"dialog":Vi("cancel",r),Vi("close",r);break;case"iframe":case"object":case"embed":Vi("load",r);break;case"video":case"audio":for(i=0;i<Mi.length;i++)Vi(Mi[i],r);break;case"source":Vi("error",r);break;case"img":case"image":case"link":Vi("error",r),Vi("load",r);break;case"details":Vi("toggle",r);break;case"input":Je(r,s),Vi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vi("invalid",r);break;case"textarea":st(r,s),Vi("invalid",r)}for(var a in bt(n,s),i=null,s)if(s.hasOwnProperty(a)){var o=s[a];"children"===a?"string"==typeof o?r.textContent!==o&&(!0!==s.suppressHydrationWarning&&Zi(r.textContent,o,e),i=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&Zi(r.textContent,o,e),i=["children",""+o]):le.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&Vi("scroll",r)}switch(n){case"input":We(r),et(r,s,!0);break;case"textarea":We(r),ot(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=es)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=lt(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fs]=t,e[ps]=r,Rl(e,t,!1,!1),t.stateNode=e;e:{switch(a=_t(n,r),n){case"dialog":Vi("cancel",e),Vi("close",e),i=r;break;case"iframe":case"object":case"embed":Vi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mi.length;i++)Vi(Mi[i],e);i=r;break;case"source":Vi("error",e),i=r;break;case"img":case"image":case"link":Vi("error",e),Vi("load",e),i=r;break;case"details":Vi("toggle",e),i=r;break;case"input":Je(e,r),i=Xe(e,r),Vi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Vi("invalid",e);break;case"textarea":st(e,r),i=it(e,r),Vi("invalid",e)}for(s in bt(n,i),o=i)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?yt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&ft(e,l):"number"==typeof l&&ft(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(le.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Vi("scroll",e):null!=l&&_e(e,s,l,a))}switch(n){case"input":We(e),et(e,r,!1);break;case"textarea":We(e),ot(e);break;case"option":null!=r.value&&e.setAttribute("value",""+He(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?rt(e,!!r.multiple,s,!1):null!=r.defaultValue&&rt(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=es)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Ol(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ae(166));if(n=Qa(Ga.current),Qa(Ka.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[fs]=t,(s=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Zi(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(r.nodeValue,n,0!=(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fs]=t,t.stateNode=r}return Wl(t),null;case 13:if(Is(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ia&&0!=(1&t.mode)&&0==(128&t.flags))fa(),pa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(ae(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(ae(317));s[fs]=t}else pa(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),s=!1}else null!==aa&&(oc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&eo.current)?0===Ou&&(Ou=3):gc())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Ja(),Ll(e,t),null===e&&$i(t.stateNode.containerInfo),Wl(t),null;case 10:return xa(t.type._context),Wl(t),null;case 19:if(Is(eo),null===(s=t.memoizedState))return Wl(t),null;if(r=0!=(128&t.flags),null===(a=s.rendering))if(r)Kl(s,!1);else{if(0!==Ou||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=to(e))){for(t.flags|=128,Kl(s,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(a=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(eo,1&eo.current|2),t.child}e=e.sibling}null!==s.tail&&Yt()>$u&&(t.flags|=128,r=!0,Kl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Kl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!sa)return Wl(t),null}else 2*Yt()-s.renderingStartTime>$u&&1073741824!==n&&(t.flags|=128,r=!0,Kl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=s.last)?n.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Yt(),t.sibling=null,n=eo.current,Cs(eo,r?1&n|2:1&n),t):(Wl(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Lu)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(ae(156,t.tag))}function Ql(e,t){switch(na(t),t.tag){case 1:return Ls(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Is(Ns),Is(As),ro(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Is(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ae(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Is(eo),null;case 4:return Ja(),null;case 10:return xa(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Rl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ll=function(){},Pl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qa(Ka.current);var s,a=null;switch(n){case"input":i=Xe(e,i),r=Xe(e,r),a=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),a=[];break;case"textarea":i=it(e,i),r=it(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=es)}for(u in bt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(le.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(null!=l||null!=o))if("style"===u)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(le.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Vi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ol=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xl=!1,Jl=!1,Yl="function"==typeof WeakSet?WeakSet:Set,Zl=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tu(t,n,s)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fs],delete t[ps],delete t[gs],delete t[ys],delete t[vs]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function lu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=es));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var hu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(on&&"function"==typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,n)}catch(o){}switch(n.tag){case 5:Jl||eu(n,t);case 6:var r=hu,i=du;hu=null,fu(e,t,n),du=i,null!==(hu=r)&&(du?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(du?(e=hu,n=n.stateNode,8===e.nodeType?us(e.parentNode,n):1===e.nodeType&&us(e,n),qn(e)):us(hu,n.stateNode));break;case 4:r=hu,i=du,hu=n.stateNode.containerInfo,du=!0,fu(e,t,n),hu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Jl&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!=(2&s)||0!=(4&s))&&tu(n,t,a),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Jl&&(eu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Jl=(r=Jl)||null!==n.memoizedState,fu(e,t,n),Jl=r):fu(e,t,n);break;default:fu(e,t,n)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yl),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:hu=o.stateNode,du=!1;break e;case 3:case 4:hu=o.stateNode.containerInfo,du=!0;break e}o=o.return}if(null===hu)throw Error(ae(160));pu(s,a,i),hu=null,du=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),vu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Tc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{ft(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&Ye(i,s),_t(o,a);var u=_t(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];"style"===c?yt(i,h):"dangerouslySetInnerHTML"===c?dt(i,h):"children"===c?ft(i,h):_e(i,c,h,u)}switch(o){case"input":Ze(i,s);break;case"textarea":at(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?rt(i,!!s.multiple,f,!1):d!==!!s.multiple&&(null!=s.defaultValue?rt(i,!!s.multiple,s.defaultValue,!0):rt(i,!!s.multiple,s.multiple?[]:"",!1))}i[ps]=s}catch(m){Tc(e,e.return,m)}}break;case 6:if(gu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Tc(e,e.return,m)}}break;case 3:if(gu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qn(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:gu(t,e),vu(e);break;case 13:gu(t,e),vu(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Yt())),4&r&&mu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Jl=(u=Jl)||c,gu(t,e),Jl=u):gu(t,e),vu(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&0!=(1&e.mode))for(Zl=e,c=e.child;null!==c;){for(h=Zl=c;null!==Zl;){switch(f=(d=Zl).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var p=d.stateNode;if("function"==typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){ku(h);continue}}null!==f?(f.return=d,Zl=f):ku(h)}c=c.sibling}e:for(c=null,h=e;;){if(5===h.tag){if(null===c){c=h;try{i=h.stateNode,u?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=h.stateNode,a=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=gt("display",a))}catch(m){Tc(e,e.return,m)}}}else if(6===h.tag){if(null===c)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gu(t,e),vu(e),4&r&&mu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ft(i,""),r.flags&=-33),cu(e,lu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;uu(e,lu(e),s);break;default:throw Error(ae(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zl=e,_u(e)}function _u(e,t,n){for(var r=0!=(1&e.mode);null!==Zl;){var i=Zl,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xl;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jl;o=Xl;var u=Jl;if(Xl=a,(Jl=l)&&!u)for(Zl=i;null!==Zl;)l=(a=Zl).child,22===a.tag&&null!==a.memoizedState?Su(i):null!==l?(l.return=a,Zl=l):Su(i);for(;null!==s;)Zl=s,_u(s),s=s.sibling;Zl=i,Xl=o,Jl=u}wu(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zl=s):wu(e)}}function wu(e){for(;null!==Zl;){var t=Zl;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jl||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:rl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&qn(h)}}}break;default:throw Error(ae(163))}Jl||512&t.flags&&su(t)}catch(d){Tc(t,t.return,d)}}if(t===e){Zl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zl=n;break}Zl=t.return}}function ku(e){for(;null!==Zl;){var t=Zl;if(t===e){Zl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zl=n;break}Zl=t.return}}function Su(e){for(;null!==Zl;){var t=Zl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{su(t)}catch(l){Tc(t,s,l)}break;case 5:var a=t.return;try{su(t)}catch(l){Tc(t,a,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Zl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zl=o;break}Zl=t.return}}var Eu,Tu=Math.ceil,Iu=we.ReactCurrentDispatcher,Cu=we.ReactCurrentOwner,xu=we.ReactCurrentBatchConfig,Au=0,Nu=null,Du=null,Ru=0,Lu=0,Pu=Ts(0),Ou=0,Mu=null,Uu=0,Fu=0,ju=0,Vu=null,zu=null,Bu=0,$u=1/0,qu=null,Hu=!1,Ku=null,Wu=null,Gu=!1,Qu=null,Xu=0,Ju=0,Yu=null,Zu=-1,ec=0;function tc(){return 0!=(6&Au)?Yt():-1!==Zu?Zu:Zu=Yt()}function nc(e){return 0==(1&e.mode)?1:0!=(2&Au)&&0!==Ru?Ru&-Ru:null!==ga.transition?(0===ec&&(ec=yn()),ec):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Yn(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,Yu=null,Error(ae(185));bn(e,n,r),0!=(2&Au)&&e===Nu||(e===Nu&&(0==(2&Au)&&(Fu|=n),4===Ou&&lc(e,Ru)),ic(e,r),1===n&&0===Au&&0==(1&t.mode)&&($u=Yt()+500,Vs&&$s()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ln(s),o=1<<a,l=i[a];-1===l?0!=(o&n)&&0==(o&r)||(i[a]=mn(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=pn(e,e===Nu?Ru:0);if(0===r)null!==n&&Qt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qt(n),1===t)0===e.tag?function(e){Vs=!0,Bs(e)}(uc.bind(null,e)):Bs(uc.bind(null,e)),os((function(){0==(6&Au)&&$s()})),n=null;else{switch(kn(r)){case 1:n=en;break;case 4:n=tn;break;case 16:default:n=nn;break;case 536870912:n=sn}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zu=-1,ec=0,0!=(6&Au))throw Error(ae(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=pn(e,e===Nu?Ru:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Au;Au|=2;var s=mc();for(Nu===e&&Ru===t||(qu=null,$u=Yt()+500,fc(e,t));;)try{bc();break}catch(o){pc(e,o)}Ca(),Iu.current=s,Au=i,null!==Du?t=0:(Nu=null,Ru=0,t=Ou)}if(0!==t){if(2===t&&0!==(i=gn(e))&&(r=i,t=ac(e,i)),1===t)throw n=Mu,fc(e,0),lc(e,r),ic(e,Yt()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!li(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&0!==(s=gn(e))&&(r=s,t=ac(e,s)),1===t))throw n=Mu,fc(e,0),lc(e,r),ic(e,Yt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:case 5:kc(e,zu,qu);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bu+500-Yt())){if(0!==pn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=is(kc.bind(null,e,zu,qu),t);break}kc(e,zu,qu);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ln(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Yt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=is(kc.bind(null,e,zu,qu),r);break}kc(e,zu,qu);break;default:throw Error(ae(329))}}}return ic(e,Yt()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&oc(t)),e}function oc(e){null===zu?zu=e:zu.push.apply(zu,e)}function lc(e,t){for(t&=~ju,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!=(6&Au))throw Error(ae(327));Sc();var t=pn(e,0);if(0==(1&t))return ic(e,Yt()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=gn(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Mu,fc(e,0),lc(e,t),ic(e,Yt()),n;if(6===n)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zu,qu),ic(e,Yt()),null}function cc(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&($u=Yt()+500,Vs&&$s())}}function hc(e){null!==Qu&&0===Qu.tag&&0==(6&Au)&&Sc();var t=Au;Au|=1;var n=xu.transition,r=wn;try{if(xu.transition=null,wn=1,e)return e()}finally{wn=r,xu.transition=n,0==(6&(Au=t))&&$s()}}function dc(){Lu=Pu.current,Is(Pu)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ps();break;case 3:Ja(),Is(Ns),Is(As),ro();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:Is(eo);break;case 10:xa(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nu=e,Du=e=Pc(e.current,null),Ru=Lu=t,Ou=0,Mu=null,ju=Fu=Uu=0,zu=Vu=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ra=null}return e}function pc(e,t){for(;;){var n=Du;try{if(Ca(),io.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(ao=0,uo=lo=oo=null,ho=!1,fo=0,Cu.current=null,null===n||null===n.return){Ou=1,Mu=t,Du=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=Ru,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=o,h=c.tag;if(0==(1&c.mode)&&(0===h||11===h||15===h)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=yl(a);if(null!==f){f.flags&=-257,vl(f,a,o,0,t),1&f.mode&&gl(s,u,t),l=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(0==(1&t)){gl(s,u,t),gc();break e}l=Error(ae(426))}else if(sa&&1&o.mode){var g=yl(a);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),vl(g,a,o,0,t),ma(cl(l,o));break e}}s=l=cl(l,o),4!==Ou&&(Ou=2),null===Vu?Vu=[s]:Vu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,pl(0,l,t));break e;case 1:o=l;var y=s.type,v=s.stateNode;if(0==(128&s.flags)&&("function"==typeof y.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Wu||!Wu.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,ml(s,o,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(b){t=b,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function mc(){var e=Iu.current;return Iu.current=Zo,null===e?Zo:e}function gc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Nu||0==(268435455&Uu)&&0==(268435455&Fu)||lc(Nu,Ru)}function yc(e,t){var n=Au;Au|=2;var r=mc();for(Nu===e&&Ru===t||(qu=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Ca(),Au=n,Iu.current=r,null!==Du)throw Error(ae(261));return Nu=null,Ru=0,Ou}function vc(){for(;null!==Du;)_c(Du)}function bc(){for(;null!==Du&&!Xt();)_c(Du)}function _c(e){var t=Eu(e.alternate,e,Lu);e.memoizedProps=e.pendingProps,null===t?wc(e):Du=t,Cu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Gl(n,t,Lu)))return void(Du=n)}else{if(null!==(n=Ql(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Ou=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Ou&&(Ou=5)}function kc(e,t,n){var r=wn,i=xu.transition;try{xu.transition=null,wn=1,function(e,t,n,r){do{Sc()}while(null!==Qu);if(0!=(6&Au))throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ln(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Nu&&(Du=Nu=null,Ru=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Gu||(Gu=!0,Nc(nn,(function(){return Sc(),null}))),s=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||s){s=xu.transition,xu.transition=null;var a=wn;wn=1;var o=Au;Au|=4,Cu.current=null,function(e,t){if(ts=Kn,pi(e=fi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=e,d=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(o=a+i),h!==s||0!==r&&3!==h.nodeType||(l=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)d=h,h=f;for(;;){if(h===e)break t;if(d===n&&++u===i&&(o=a),d===s&&++c===r&&(l=a),null!==(f=h.nextSibling))break;d=(h=d).parentNode}h=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ns={focusedElem:e,selectionRange:n},Kn=!1,Zl=t;null!==Zl;)if(e=(t=Zl).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Zl=e;else for(;null!==Zl;){t=Zl;try{var p=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:rl(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(ae(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Zl=e;break}Zl=t.return}p=nu,nu=!1}(e,n),yu(n,e),mi(ns),Kn=!!ts,ns=ts=null,e.current=n,bu(n),Jt(),Au=o,wn=a,xu.transition=s}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Xu=i),0===(s=e.pendingLanes)&&(Wu=null),function(e){if(on&&"function"==typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,128==(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Yt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!=(1&Xu)&&0!==e.tag&&Sc(),0!=(1&(s=e.pendingLanes))?e===Yu?Ju++:(Ju=0,Yu=e):Ju=0,$s()}(e,t,n,r)}finally{xu.transition=i,wn=r}return null}function Sc(){if(null!==Qu){var e=kn(Xu),t=xu.transition,n=wn;try{if(xu.transition=null,wn=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Xu=0,0!=(6&Au))throw Error(ae(331));var i=Au;for(Au|=4,Zl=e.current;null!==Zl;){var s=Zl,a=s.child;if(0!=(16&Zl.flags)){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var u=o[l];for(Zl=u;null!==Zl;){var c=Zl;switch(c.tag){case 0:case 11:case 15:ru(8,c,s)}var h=c.child;if(null!==h)h.return=c,Zl=h;else for(;null!==Zl;){var d=(c=Zl).sibling,f=c.return;if(au(c),c===u){Zl=null;break}if(null!==d){d.return=f,Zl=d;break}Zl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zl=s}}if(0!=(2064&s.subtreeFlags)&&null!==a)a.return=s,Zl=a;else e:for(;null!==Zl;){if(0!=(2048&(s=Zl).flags))switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Zl=y;break e}Zl=s.return}}var v=e.current;for(Zl=v;null!==Zl;){var b=(a=Zl).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Zl=b;else e:for(a=v;null!==Zl;){if(0!=(2048&(o=Zl).flags))try{switch(o.tag){case 0:case 11:case 15:iu(9,o)}}catch(w){Tc(o,o.return,w)}if(o===a){Zl=null;break e}var _=o.sibling;if(null!==_){_.return=o.return,Zl=_;break e}Zl=o.return}}if(Au=i,$s(),on&&"function"==typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(w){}r=!0}return r}finally{wn=n,xu.transition=t}}return!1}function Ec(e,t,n){e=Va(e,t=pl(0,t=cl(n,t),1),1),t=tc(),null!==e&&(bn(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Va(t,e=ml(t,e=cl(n,e),1),1),e=tc(),null!==t&&(bn(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Ou||3===Ou&&(130023424&Ru)===Ru&&500>Yt()-Bu?fc(e,0):ju|=n),ic(e,t)}function Cc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=dn,0==(130023424&(dn<<=1))&&(dn=4194304)));var n=tc();null!==(e=Oa(e,t))&&(bn(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Gt(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Lc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ee:return Mc(n.children,i,s,t);case Te:a=8,i|=8;break;case Ie:return(e=Rc(12,n,t,2|i)).elementType=Ie,e.lanes=s,e;case Ne:return(e=Rc(13,n,t,i)).elementType=Ne,e.lanes=s,e;case De:return(e=Rc(19,n,t,i)).elementType=De,e.lanes=s,e;case Pe:return Uc(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ce:a=10;break e;case xe:a=9;break e;case Ae:a=11;break e;case Re:a=14;break e;case Le:a=16,r=null;break e}throw Error(ae(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=Pe,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vn(0),this.expirationTimes=vn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(s),e}function Bc(e){if(!e)return xs;e:{if($t(e=e._reactInternals)!==e||1!==e.tag)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ae(171))}if(1===e.tag){var n=e.type;if(Ls(n))return Ms(e,n,t)}return t}function $c(e,t,n,r,i,s,a,o,l){return(e=zc(n,r,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=ja(r=tc(),i=nc(n))).callback=null!=t?t:null,Va(n,s,i),e.current.lanes=i,bn(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ja(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Va(i,t,a))&&(rc(e,i,a,s),za(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ns.current)_l=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _l=!1,function(e,t,n){switch(t.tag){case 3:Nl(t),pa();break;case 5:Ya(t);break;case 1:Ls(t.type)&&Us(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Cs(Sa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(eo,1&eo.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fl(e,t,n):(Cs(eo,1&eo.current),null!==(e=Hl(e,t,n))?e.sibling:null);Cs(eo,1&eo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return $l(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cs(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,n)}return Hl(e,t,n)}(e,t,n);_l=0!=(131072&e.flags)}else _l=!1,sa&&0!=(1048576&t.flags)&&ea(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ql(e,t),e=t.pendingProps;var i=Rs(t,As.current);Na(t,n),i=yo(null,t,r,e,i,n);var s=vo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ls(r)?(s=!0,Us(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ua(t),i.updater=sl,t.stateNode=i,i._reactInternals=t,ul(t,r,e,n),t=Al(null,t,r,!0,s,n)):(t.tag=0,sa&&s&&ta(t),wl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Lc(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ae)return 11;if(e===Re)return 14}return 2}(r),e=rl(r,e),i){case 0:t=Cl(null,t,r,e,n);break e;case 1:t=xl(null,t,r,e,n);break e;case 11:t=kl(null,t,r,e,n);break e;case 14:t=Sl(null,t,r,rl(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cl(e,t,r,i=t.elementType===r?i:rl(r,i),n);case 1:return r=t.type,i=t.pendingProps,xl(e,t,r,i=t.elementType===r?i:rl(r,i),n);case 3:e:{if(Nl(t),null===e)throw Error(ae(387));r=t.pendingProps,i=(s=t.memoizedState).element,Fa(e,t),$a(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Dl(e,t,r,n,i=cl(Error(ae(423)),t));break e}if(r!==i){t=Dl(e,t,r,n,i=cl(Error(ae(424)),t));break e}for(ia=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Hl(e,t,n);break e}wl(e,t,r,n)}t=t.child}return t;case 5:return Ya(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,rs(r,i)?a=null:null!==s&&rs(r,s)&&(t.flags|=32),Il(e,t),wl(e,t,a,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fl(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):wl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,kl(e,t,r,i=t.elementType===r?i:rl(r,i),n);case 7:return wl(e,t,t.pendingProps,n),t.child;case 8:case 12:return wl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Cs(Sa,r._currentValue),r._currentValue=a,null!==s)if(li(s.value,a)){if(s.children===i.children&&!Ns.current){t=Hl(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=ja(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(ae(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Aa(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Na(t,n),r=r(i=Da(i)),t.flags|=1,wl(e,t,r,n),t.child;case 14:return i=rl(r=t.type,t.pendingProps),Sl(e,t,r,i=rl(r.type,i),n);case 15:return El(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rl(r,i),ql(e,t),t.tag=1,Ls(r)?(e=!0,Us(t)):e=!1,Na(t,n),ol(t,r,i),ul(t,r,i,n),Al(null,t,r,!0,e,n);case 19:return $l(e,t,n);case 22:return Tl(e,t,n)}throw Error(ae(156,t.tag))};var Gc="function"==typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eh(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=$c(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[ms]=a.current,$i(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ms]=l.current,$i(8===e.nodeType?e.parentNode:e),hc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Xc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ae(409));qc(e,t,null,null)},Xc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){qc(null,e,null,null)})),t[ms]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=In();e={blockedOn:null,target:e,priority:t};for(var n=0;n<On.length&&0!==t&&t<On[n].priority;n++);On.splice(n,0,e),0===n&&jn(e)}},Sn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=fn(t.pendingLanes);0!==n&&(_n(t,1|n),ic(t,Yt()),0==(6&Au)&&($u=Yt()+500,$s()))}break;case 13:hc((function(){var t=Oa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},En=function(e){if(13===e.tag){var t=Oa(e,134217728);null!==t&&rc(t,e,134217728,tc()),Wc(e,134217728)}},Tn=function(e){if(13===e.tag){var t=nc(e),n=Oa(e,t);null!==n&&rc(n,e,t,tc()),Wc(e,t)}},In=function(){return wn},Cn=function(e,t){var n=wn;try{return wn=e,t()}finally{wn=n}},St=function(e,t,n){switch(t){case"input":if(Ze(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ks(r);if(!i)throw Error(ae(90));Ge(r),Ze(r,i)}}}break;case"textarea":at(e,n);break;case"select":null!=(t=n.value)&&rt(e,!!n.multiple,t,!1)}},At=cc,Nt=hc;var th={usingClientEntryPoint:!1,Events:[_s,ws,ks,Ct,xt,cc]},nh={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rh={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Kt(e))?null:e.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{an=ih.inject(rh),on=ih}catch(ht){}}ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,ee.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(ae(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Se,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},ee.createRoot=function(e,t){if(!Jc(e))throw Error(ae(299));var n=!1,r="",i=Gc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[ms]=t.current,$i(8===e.nodeType?e.parentNode:e),new Qc(t)},ee.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ae(188));throw e=Object.keys(e).join(","),Error(ae(268,e))}return null===(e=Kt(t))?null:e.stateNode},ee.flushSync=function(e){return hc(e)},ee.hydrate=function(e,t,n){if(!Yc(t))throw Error(ae(200));return eh(null,e,t,!0,n)},ee.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(ae(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,s,a),e[ms]=t.current,$i(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},ee.render=function(e,t,n){if(!Yc(t))throw Error(ae(200));return eh(null,e,t,!1,n)},ee.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(ae(40));return!!e._reactRootContainer&&(hc((function(){eh(null,null,e,!1,(function(){e._reactRootContainer=null,e[ms]=null}))})),!0)},ee.unstable_batchedUpdates=cc,ee.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(ae(200));if(null==e||void 0===e._reactInternals)throw Error(ae(38));return eh(e,t,n,!1,r)},ee.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Z.exports=ee;var sh=Z.exports;Y.createRoot=sh.createRoot,Y.hydrateRoot=sh.hydrateRoot;var ah={exports:{}};function oh(){}function lh(){}lh.resetWarningCache=oh,ah.exports=function(){function e(e,t,n,r,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lh,resetWarningCache:oh};return n.PropTypes=n,n}();const uh=e(ah.exports);class ch extends t.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}const hh=new n.Events.EventEmitter,dh={playerSpeed:200,playerJumpSpeed:-750,playerDoubleJumpSpeed:-600,playerGravity:2500,playerInvulnerabilityTime:3e3,cameraZoom:2,cameraFadeInDuration:1e3,tileWidth:32,tileHeight:32,tileMargin:1,tileSpacing:2,backgroundColor:"#000000",currentLevel:1,totalLevels:2,playerName:"Player",totalScore:0,totalTimeTaken:0};class fh extends n.Physics.Arcade.Sprite{constructor(e,t,n,r,i){super(e,t,n,r),e.add.existing(this),e.physics.add.existing(this),this.setScale(2),this.speed=250,this.distance=500,this.direction=i,this.startX=t,this.setVelocityX(this.speed*this.direction),this.body.allowGravity=!1,this.setCircle(6,3,2),this.setOrigin(.5,.5),this.play("projectile_anim")}preUpdate(e,t){super.preUpdate(e,t),Math.abs(this.x-this.startX)>=this.distance&&this.destroy()}}class ph extends t.Scene{constructor(){super("Game"),this.playerHealth=3,this.canDoubleJump=!1,this.isInvulnerable=!1,this.hitboxVisible=!1,this.enemiesKilled=0,this.collectablesCollected=0,this.score=0,this.levelStartTime=0,this.levelTime=0,this.map=null,this.tileset=null,this.props=null,this.cursors=null,this.keys=null}preload(){this.load.setPath("assets"),this.load.image("props","tiles/props.png"),this.load.image("tileset","tiles/tileset.png"),this.load.tilemapTiledJSON("level1","levels/level1.json"),this.load.tilemapTiledJSON("level2","levels/level2.json"),this.load.image("background_layer_1","backgrounds/background_layer_1_extended_2.png"),this.load.image("background_layer_2","backgrounds/background_layer_2_extended_2.png"),this.load.image("background_layer_3","backgrounds/background_layer_3_extended_2.png"),this.load.image("collectable","collectables/berry.png"),this.load.spritesheet("projectile","enemies/enemy_projectile.png",{frameWidth:16,frameHeight:16}),this.load.atlas("player","characters/fox_spritesheet.png","characters/fox_spritesheet.json"),this.load.atlas("enemy","enemies/enemy_spritesheet.png","enemies/enemy_spritesheet.json")}create(){this.sound.stopAll(),this.cameras.main.setBackgroundColor(dh.backgroundColor),this.enemiesKilled=0,this.collectablesCollected=0,this.score=0,this.isInvulnerable=!1,this.enemies=this.physics.add.group(),this.collectables=this.physics.add.group(),this.deathZones=this.physics.add.staticGroup(),this.collectedItems=[],this.initialCameraX=this.cameras.main.scrollX,this.initialCameraY=this.cameras.main.scrollY,this.loadLevel(dh.currentLevel),this.playerX=this.map.getObjectLayer("Player Spawn").objects[0].x,this.playerY=this.map.getObjectLayer("Player Spawn").objects[0].y,this.player=this.physics.add.sprite(this.playerX,this.playerY,"player","idle_0"),this.player.setCollideWorldBounds(!0),this.player.setGravityY(dh.playerGravity),this.player.setScale(2.5),this.player.body.setCircle(6,10,4),this.physics.add.collider(this.player,this.terrainLayer),this.physics.add.collider(this.player,this.terrainPropsLayer),this.physics.add.collider(this.player,this.platformsLayer),this.cameras.main.setBounds(5,0,this.map.widthInPixels-10,this.map.heightInPixels),this.physics.world.setBounds(5,0,this.map.widthInPixels-10,this.map.heightInPixels),this.player.setCollideWorldBounds(!0),this.player.body.debugShowBody=!1,this.player.body.debugShowVelocity=!1,this.anims.create({key:"run_enemy",frames:[{key:"enemy",frame:"run_enemy_0"},{key:"enemy",frame:"run_enemy_1"},{key:"enemy",frame:"run_enemy_2"},{key:"enemy",frame:"run_enemy_3"}],frameRate:10,repeat:-1}),this.anims.create({key:"death_enemy",frames:[{key:"enemy",frame:"death_enemy_0"},{key:"enemy",frame:"death_enemy_1"},{key:"enemy",frame:"death_enemy_2"},{key:"enemy",frame:"death_enemy_3"}],frameRate:60,repeat:0}),this.anims.create({key:"projectile_anim",frames:this.anims.generateFrameNumbers("projectile",{start:0,end:3}),frameRate:10,repeat:-1}),this.projectiles=this.physics.add.group({classType:fh,runChildUpdate:!0}),this.addEnemies(this.map),this.addCollectables(this.map),this.addDeathZones(this.map),this.addInteractables(this.map),this.cameras.main.startFollow(this.player,!0,.1,.1),this.cameras.main.roundPixels=!0,this.cameras.main.setZoom(dh.cameraZoom),this.cameras.main.fadeIn(dh.cameraFadeInDuration),hh.emit("current-scene-ready",this),hh.emit("scene-change","Game"),this.enableKeys(),this.interactionKey=this.keys.E,this.anims.create({key:"idle",frames:[{key:"player",frame:"idle_0"},{key:"player",frame:"idle_1"},{key:"player",frame:"idle_2"},{key:"player",frame:"idle_3"},{key:"player",frame:"idle_4"}],frameRate:10,repeat:-1}),this.anims.create({key:"run",frames:[{key:"player",frame:"run_0"},{key:"player",frame:"run_1"},{key:"player",frame:"run_2"},{key:"player",frame:"run_3"},{key:"player",frame:"run_4"},{key:"player",frame:"run_5"},{key:"player",frame:"run_6"},{key:"player",frame:"run_7"}],frameRate:10,repeat:-1}),this.anims.create({key:"jump",frames:[{key:"player",frame:"jump_0"},{key:"player",frame:"jump_1"},{key:"player",frame:"jump_2"},{key:"player",frame:"jump_3"},{key:"player",frame:"jump_4"},{key:"player",frame:"jump_5"},{key:"player",frame:"jump_6"},{key:"player",frame:"jump_7"}],frameRate:10,repeat:0}),this.player.play("idle"),this.levelStartTime=this.time.now,this.debugGraphics=this.add.graphics(),1===dh.currentLevel?this.sound.play("level1",{volume:.1,loop:!0}):2===dh.currentLevel&&this.sound.play("level2",{volume:.1,loop:!0})}disableKeys(){Object.values(this.keys).forEach((e=>e.enabled=!1)),this.cursors.left.enabled=!1,this.cursors.right.enabled=!1,this.cursors.up.enabled=!1,this.cursors.down.enabled=!1,this.input.keyboard.enabled=!1,this.input.keyboard.removeAllKeys(),this.input.keyboard.removeAllListeners()}enableKeys(){this.cursors=this.input.keyboard.createCursorKeys(),this.keys=this.input.keyboard.addKeys("W,A,S,D,H,R,E,O,I"),Object.values(this.keys).forEach((e=>e.enabled=!0)),this.cursors.left.enabled=!0,this.cursors.right.enabled=!0,this.cursors.up.enabled=!0,this.cursors.down.enabled=!0,this.input.keyboard.enabled=!0}loadLevel(e){this.playerHealth=3,hh.emit("health-update",this.playerHealth),this.enemies.clear(!0,!0),this.collectables.clear(!0,!0),this.deathZones.clear(!0,!0),this.interactablePoints=[],this.map=this.make.tilemap({key:`level${e}`}),this.tileset=this.map.addTilesetImage("tileset","tileset",dh.tileWidth,dh.tileHeight),this.props=this.map.addTilesetImage("props","props",dh.tileWidth,dh.tileHeight),this.backgroundLayer1=this.add.image(0,0,"background_layer_1").setOrigin(0,0),this.backgroundLayer2=this.add.image(0,0,"background_layer_2").setOrigin(0,0),this.backgroundLayer3=this.add.image(0,0,"background_layer_3").setOrigin(0,0),this.backgroundCaveLayer=this.map.createLayer("Background",this.tileset,0,0),this.terrainLayer=this.map.createLayer("Terrain",this.tileset,0,0),this.terrainPropsLayer=this.map.createLayer("Terrain_props",this.props,0,0),this.platformsLayer=this.map.createLayer("Platforms",this.tileset,0,0),this.propsLayer=this.map.createLayer("Props_4",this.props,0,0),this.props2Layer=this.map.createLayer("Props_3",this.props,0,0),this.props3Layer=this.map.createLayer("Props_2",this.props,0,0),this.props4Layer=this.map.createLayer("Props",this.props,0,0),this.interactables=this.map.createLayer("Interactables_Initial",this.props,0,0),this.interactables_final=this.map.createLayer("Interactables_Final",this.props,0,0),this.interactables_final.setVisible(!1),this.terrainLayer.setCollisionByProperty({collides:!0}),this.terrainPropsLayer.setCollisionByProperty({collides:!0}),this.platformsLayer.setCollisionByProperty({collides:!0})}addEnemies(e){const t=e.getObjectLayer("Enemy Spawn");(t?t.objects:[]).forEach((e=>{const t=e.x,n=e.x+e.width,r=this.textures.get("enemy").get();r.width;const i=2*r.width/2;var s=1;1===dh.currentLevel?"enemy_spawn_1"!==e.name&&"enemy_spawn_2"!==e.name||(s=2):2===dh.currentLevel&&("enemy_spawn_3"!==e.name&&"enemy_spawn_4"!==e.name&&"enemy_spawn_7"!==e.name&&"enemy_spawn_8"!==e.name||(s=2));const a=e.width/s;for(let o=0;o<s;o++){const r=t+o*a,s=this.textures.getFrame("enemy","run_enemy_0");if(!s)return void console.error('Frame "run_enemy_0" not found in "enemy" atlas.');const l=r+(a-2*s.width)/2,u=t+i,c=n-i,h=this.enemies.create(l,e.y-16,"enemy");h.setScale(2),h.setCollideWorldBounds(!0),h.body.setSize(h.width,.75*h.height,!0),h.body.setOffset(0,.27*h.height),h.body.debugShowBody=!1,h.body.debugShowVelocity=!1,h.hitPoints=1,h.setVelocityX(50),h.patrolDirection=1,h.patrolMinX=u,h.patrolMaxX=c,h.flipX=!1,h.play("run_enemy")}})),this.physics.add.collider(this.enemies,this.terrainLayer),this.physics.add.collider(this.enemies,this.enemies,this.handleEnemyCollision,null,this),this.playerEnemyCollision=this.physics.add.collider(this.player,this.enemies,this.handlePlayerEnemyCollision,null,this)}addCollectables(e){const t=e.getObjectLayer("Collectables");(t?t.objects:[]).forEach((e=>{const t=this.collectables.create(e.x,e.y,"collectable");t.setOrigin(.5,.5),t.name=e.name,t.body.setAllowGravity(!1),t.setImmovable(!0),t.body.debugShowBody=!1,t.body.debugShowVelocity=!1,t.setScale(2),t.y+=5})),this.physics.add.overlap(this.player,this.collectables,this.collectItem,null,this)}addDeathZones(e){const t=e.getObjectLayer("Death Zones");(t?t.objects:[]).forEach((e=>{const t=this.deathZones.create(e.x+16,e.y+45,null).setOrigin(0,0);t.displayWidth=e.width,t.displayHeight=e.height,t.body.setSize(e.width,e.height),t.body.debugShowBody=!1,t.body.debugShowVelocity=!1})),this.physics.add.overlap(this.player,this.deathZones,this.handlePlayerDeath,null,this)}addInteractables(e){const t=e.getObjectLayer("Interactables Center"),n=t?t.objects:[];this.interactablePoints=n.map((e=>({x:e.x,y:e.y,name:e.name})))}fadeOutUI(){hh.emit("fade-out")}fadeInUI(){hh.emit("fade-in")}update(){const e=dh.playerSpeed,t=dh.playerJumpSpeed,n=dh.playerDoubleJumpSpeed,r=this.cameras.main.scrollX;if(this.backgroundLayer1&&this.backgroundLayer2&&this.backgroundLayer3&&(this.backgroundLayer1.x=-.02*r-30,this.backgroundLayer2.x=-.05*r-30,this.backgroundLayer3.x=-.08*r-30),this.enemies.getChildren().forEach((e=>{e.x<=e.patrolMinX&&-1===e.patrolDirection?(e.patrolDirection=1,e.setVelocityX(50*e.patrolDirection),e.flipX=!1):e.x>=e.patrolMaxX&&1===e.patrolDirection&&(e.patrolDirection=-1,e.setVelocityX(50*e.patrolDirection),e.flipX=!0);const t=this.player.x;this.player.y;const n=t>=e.patrolMinX&&t<=e.patrolMaxX,r=1===e.patrolDirection&&t>e.x||-1===e.patrolDirection&&t<e.x;!e.isDead&&n&&r&&this.handleEnemyAttack(e)})),!this.isPlayerDead){{this.cursors.left.isDown||this.keys.A.isDown?(this.player.setVelocityX(-e),this.player.flipX=!0):this.cursors.right.isDown||this.keys.D.isDown?(this.player.setVelocityX(e),this.player.flipX=!1):this.player.body.blocked.down&&this.player.setVelocityX(0),(Phaser.Input.Keyboard.JustDown(this.cursors.up)||Phaser.Input.Keyboard.JustDown(this.keys.W)||Phaser.Input.Keyboard.JustDown(this.cursors.space))&&(this.player.body.blocked.down?(this.player.setVelocityY(t),this.player.play("jump",!0),this.sound.play("jump",{volume:.1}),this.canDoubleJump=!0):this.canDoubleJump&&(this.player.setVelocityY(n),this.player.play("jump",!0),this.sound.play("double_jump",{volume:.1}),this.canDoubleJump=!1)),0!==this.player.body.velocity.y?this.player.play("jump",!0):0!==this.player.body.velocity.x?this.player.play("run",!0):this.player.play("idle",!0),this.player.body.blocked.down&&"jump"===this.player.anims.currentAnim.key&&this.player.play("idle",!0);let r=!1,i=null;this.interactablePoints.forEach((e=>{if(Phaser.Math.Distance.Between(this.player.x,this.player.y,e.x,e.y)<64){r=!0,i=e;const s=this.cameras.main;var t=e.x-s.scrollX+80,n=e.y-s.scrollY+50;2===dh.currentLevel&&(t=e.x-s.scrollX+300),hh.emit("show-interaction",{x:t,y:n})}Phaser.Input.Keyboard.JustDown(this.interactionKey)&&i&&this.handleInteraction(i)})),r||hh.emit("hide-interaction"),this.levelTime=Math.floor((this.time.now-this.levelStartTime)/1e3),hh.emit("time-update",this.levelTime)}Phaser.Input.Keyboard.JustDown(this.keys.H)&&this.toggleHitboxVisualization(),Phaser.Input.Keyboard.JustDown(this.keys.R)&&this.resetGame(),(this.player.y>this.physics.world.bounds.height||this.player.y<0||this.player.x<0||this.player.x>this.physics.world.bounds.width)&&this.resetGame()}}handleEnemyAttack(e){if(!e.isAttacking&&!e.isDead){e.isAttacking=!0,e.setVelocityX(0);const t=30,n=15,r=e.x+t*e.patrolDirection,i=e.y+n,s=this.projectiles.get(r,i,"projectile");this.sound.play("enemy_laser",{volume:.1}),s?(s.setActive(!0),s.setVisible(!0),s.direction=e.patrolDirection,s.startX=s.x,s.body.debugShowBody=!1,s.body.debugShowVelocity=!1,s.setVelocityX(s.speed*s.direction),s.play("projectile_anim"),this.physics.add.overlap(s,this.player,(()=>{this.isInvulnerable||(this.handlePlayerDamage(1),this.triggerInvulnerability()),s.destroy()}),null,this)):console.warn("Projectile could not be created."),this.time.delayedCall(1e3,(()=>{e.active&&!e.isDead&&(e.isAttacking=!1,e.setVelocityX(50*e.patrolDirection),e.play("run_enemy"))}),[],this)}}handleEnemyCollision(e,t){e.patrolDirection*=-1,e.setVelocityX(50*e.patrolDirection),e.flipX=-1===e.patrolDirection,t.patrolDirection*=-1,t.setVelocityX(50*t.patrolDirection),t.flipX=-1===t.patrolDirection}handleInteraction(e){"interactable_end"===e.name&&this.finishLevel()}finishLevel(){const e=this.levelTime;this.disableKeys(),this.cameras.main.fadeOut(2e3,0,0,0),this.sound.stopAll(),this.fadeOutUI(),this.cameras.main.once("camerafadeoutcomplete",(()=>{this.interactables.setVisible(!1),this.interactables_final.setVisible(!0),this.cameras.main.fadeIn(2e3,0,0,0),this.time.delayedCall(1e3,(()=>{this.sound.play("interactable",{volume:.1})}),[],this),this.time.delayedCall(2e3,(()=>{this.player.setVelocityY(-500),this.sound.play("jump",{volume:.1}),this.time.delayedCall(1e3,(()=>{this.player.setVelocityY(-500),this.sound.play("jump",{volume:.1})}),[],this)}),[],this),this.time.delayedCall(4500,(()=>{hh.emit("scene-change","ScoreScene"),this.cameras.main.fadeOut(1500,0,0,0),this.cameras.main.once("camerafadeoutcomplete",(()=>{this.scene.start("ScoreScene",{timeTaken:e,collectables:this.collectablesCollected,enemiesKilled:this.enemiesKilled,totalScore:this.calculateScore(this.score,e),keys:this.keys,cursors:this.cursors})}),this)}),[],this)}),this)}calculateScore(e,t){return e+20*Math.max(0,120-t)}handlePlayerDeath(e,t){this.handlePlayerDamage(1),this.resetPlayer()}resetPlayer(){this.player.setX(this.playerX),this.player.setY(this.playerY),this.player.setVelocity(0,0),this.player.setAlpha(1),this.isPlayerDead=!1}handlePlayerEnemyCollision(e,t){e.body.velocity.y>0&&e.y<t.y?(this.damageEnemy(t),e.setVelocityY(-500)):this.isInvulnerable||(this.handlePlayerDamage(1),this.triggerInvulnerability())}damageEnemy(e){e.hitPoints-=1,this.sound.play("jump_on_enemy",{volume:.1}),e.hitPoints<=0&&(this.sound.play("enemy_death",{volume:.1}),e.play("death_enemy",!0),e.body.setVelocity(0),e.body.setImmovable(!0),e.body.moves=!1,e.body.enable=!1,e.isDead=!0,this.enemiesKilled+=1,this.incrementScore(100),this.time.delayedCall(3e3,(()=>{e.destroy()}),[],this))}incrementScore(e){this.score+=e}toggleHitboxVisualization(){this.hitboxVisible=!this.hitboxVisible,this.hitboxVisible?(this.player.body.debugShowBody=!0,this.player.body.debugShowVelocity=!0,this.enemies.children.iterate((e=>{e.body.debugShowBody=!0,e.body.debugShowVelocity=!0})),this.collectables.children.iterate((e=>{e.body.debugShowBody=!0,e.body.debugShowVelocity=!0}))):(this.player.body.debugShowBody=!1,this.player.body.debugShowVelocity=!1,this.enemies.children.iterate((e=>{e.body.debugShowBody=!1,e.body.debugShowVelocity=!1})),this.collectables.children.iterate((e=>{e.body.debugShowBody=!1,e.body.debugShowVelocity=!1})))}triggerInvulnerability(){this.isInvulnerable=!0,this.playerEnemyCollision&&(this.playerEnemyCollision.active=!1),this.invulnerabilityEffect=this.tweens.add({targets:this.player,alpha:{from:.5,to:0},ease:"Linear",duration:200,repeat:-1,yoyo:!0}),this.time.delayedCall(dh.playerInvulnerabilityTime,(()=>{this.isInvulnerable=!1,this.playerEnemyCollision&&(this.playerEnemyCollision.active=!0),this.invulnerabilityEffect&&(this.invulnerabilityEffect.stop(),this.player.setAlpha(1))}),[],this)}collectItem(e,t){this.collectedItems.push(t.name),this.sound.play("collectable",{volume:.1}),this.incrementScore(500),t.destroy(),hh.emit("collectable-update",this.collectedItems),this.collectablesCollected+=1}onPlayerLanded(){this.player.body.blocked.down&&(this.canDoubleJump=!1)}handlePlayerDamage(e){this.isPlayerDead||(this.playerHealth-=e,this.sound.play("player_damage",{volume:.1}),this.playerHealth<=0&&(this.playerHealth=0,this.isPlayerDead=!0,this.resetGame()),hh.emit("health-update",this.playerHealth))}resetGame(){this.sound.stopAll(),this.playerHealth=3,hh.emit("health-update",this.playerHealth),this.collectedItems=[],hh.emit("collectable-update",this.collectedItems),this.collectablesCollected=0,this.score=0,this.enemiesKilled=0,this.player.setPosition(this.playerX,this.playerY),this.player.body.enable=!0,this.cursors.enabled=!0,this.keys.enabled=!0,this.isPlayerDead=!1,this.isInvulnerable=!1,this.scene.restart()}}class mh extends t.Scene{constructor(){super("DebugGame"),this.playerHealth=3,this.canDoubleJump=!1}preload(){this.load.setPath("assets"),this.load.image("test_tiles","test_assets/test_tiles_mod.png"),this.load.tilemapTiledJSON("test_map","levels/test_map.json"),this.load.atlas("player","characters/fox_spritesheet.png","characters/fox_spritesheet.json")}create(){this.cameras.main.setBackgroundColor(dh.backgroundColor);const e=this.make.tilemap({key:"test_map"}),t=e.addTilesetImage("test_tiles","test_tiles",dh.tileWidth,dh.tileHeight,dh.tileMargin,dh.tileSpacing);this.backgroundLayer=e.createLayer("Background",t,0,0),this.terrainLayer=e.createLayer("Terrain",t,0,0),this.platformsLayer=e.createLayer("Platforms",t,0,0),this.playerX=e.getObjectLayer("Player Spawn").objects[0].x,this.playerY=e.getObjectLayer("Player Spawn").objects[0].y,console.log(this.playerX,this.playerY),this.player=this.physics.add.sprite(this.playerX,this.playerY,"player","idle_0"),this.player.setCollideWorldBounds(!0),this.player.setGravityY(dh.playerGravity),this.player.setScale(3),this.player.body.setCircle(6,10,4),this.terrainLayer.setCollisionByProperty({collides:!0}),this.platformsLayer.setCollisionByProperty({collides:!0}),this.physics.add.collider(this.player,this.terrainLayer),this.physics.add.collider(this.player,this.platformsLayer),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cameras.main.startFollow(this.player),this.cameras.main.roundPixels=!0,this.cameras.main.setZoom(dh.cameraZoom),this.cameras.main.fadeIn(dh.cameraFadeInDuration),hh.emit("current-scene-ready",this),hh.emit("scene-change","DebugGame"),this.cursors=this.input.keyboard.createCursorKeys(),this.keys=this.input.keyboard.addKeys("W,A,S,D,H,R"),this.anims.create({key:"idle",frames:[{key:"player",frame:"idle_0"},{key:"player",frame:"idle_1"},{key:"player",frame:"idle_2"},{key:"player",frame:"idle_3"},{key:"player",frame:"idle_4"}],frameRate:10,repeat:-1}),this.anims.create({key:"run",frames:[{key:"player",frame:"run_0"},{key:"player",frame:"run_1"},{key:"player",frame:"run_2"},{key:"player",frame:"run_3"},{key:"player",frame:"run_4"},{key:"player",frame:"run_5"},{key:"player",frame:"run_6"},{key:"player",frame:"run_7"}],frameRate:10,repeat:-1}),this.anims.create({key:"jump",frames:[{key:"player",frame:"jump_0"},{key:"player",frame:"jump_1"},{key:"player",frame:"jump_2"},{key:"player",frame:"jump_3"},{key:"player",frame:"jump_4"},{key:"player",frame:"jump_5"},{key:"player",frame:"jump_6"},{key:"player",frame:"jump_7"}],frameRate:10,repeat:0}),this.player.play("idle"),console.log("Camera dimensions:",this.cameras.main.width,this.cameras.main.height),this.debugText=this.add.text(440,this.scale.height-248,"Debug Level",{fontSize:"16px",fill:"#ffffff",fontFamily:"Arial",backgroundColor:"#000000"}).setOrigin(0,1).setScrollFactor(0)}update(){const e=dh.playerSpeed,t=dh.playerJumpSpeed,n=dh.playerDoubleJumpSpeed;this.cursors.left.isDown||this.keys.A.isDown?(this.player.setVelocityX(-e),this.player.flipX=!0):this.cursors.right.isDown||this.keys.D.isDown?(this.player.setVelocityX(e),this.player.flipX=!1):this.player.body.blocked.down&&this.player.setVelocityX(0),(Phaser.Input.Keyboard.JustDown(this.cursors.up)||Phaser.Input.Keyboard.JustDown(this.keys.W)||Phaser.Input.Keyboard.JustDown(this.cursors.space))&&(this.player.body.blocked.down?(console.log("Jumping"),this.player.setVelocityY(t),this.player.play("jump",!0),this.canDoubleJump=!0):this.canDoubleJump&&(console.log("Double Jumping"),this.player.setVelocityY(n),this.player.play("jump",!0),this.canDoubleJump=!1)),0!==this.player.body.velocity.y?this.player.play("jump",!0):0!==this.player.body.velocity.x?this.player.play("run",!0):this.player.play("idle",!0),this.player.body.blocked.down&&"jump"===this.player.anims.currentAnim.key&&this.player.play("idle",!0),Phaser.Input.Keyboard.JustDown(this.keys.H)&&this.reduceHealth(),Phaser.Input.Keyboard.JustDown(this.keys.R)&&this.resetGame(),(this.player.y>this.physics.world.bounds.height||this.player.y<0||this.player.x<0||this.player.x>this.physics.world.bounds.width)&&this.resetGame()}onPlayerLanded(){this.player.body.blocked.down&&(this.canDoubleJump=!1)}reduceHealth(){this.playerHealth-=1,hh.emit("health-update",this.playerHealth),this.playerHealth<=0&&this.resetGame()}resetGame(){this.playerHealth=3,hh.emit("health-update",this.playerHealth),this.scene.restart()}}class gh extends t.Scene{constructor(){super("EndGame")}init(e){this.cursors=e.cursors,this.keys=e.keys}create(){this.cameras.main.fadeIn(2e3,0,0,0);const{width:e,height:t}=this.scale;this.add.text(e/2,t/2-200,"Thank you for playing!",{fontFamily:'"monogram", sans-serif',fontSize:"80px",color:"#ffffff"}).setOrigin(.5),this.add.text(e/2,t/2-50,`Total Time Taken: ${dh.totalTimeTaken} seconds`,{fontFamily:'"monogram", sans-serif',fontSize:"64px",color:"#ffffff"}).setOrigin(.5).setDepth(1e3),this.add.text(e/2,t/2+50,`Total Score: ${dh.totalScore}`,{fontFamily:'"monogram", sans-serif',fontSize:"64px",color:"#ffffff"}).setOrigin(.5).setDepth(1e3),this.time.delayedCall(2e3,(()=>{const n=this.add.sprite(-50,t/2+200,"player","run_0").setScale(7).play("run");this.tweens.add({targets:n,x:e+50,duration:4e3,ease:"Linear",onComplete:()=>{n.destroy(),this.cameras.main.fadeOut(2e3,0,0,0),dh.currentLevel=1,this.cameras.main.once("camerafadeoutcomplete",(()=>{hh.emit("gameDone"),hh.on("navigateToMainMenu",this.navigateToMainMenu,this)}))}})}),[],this)}navigateToMainMenu(){this.scene.start("MainMenu"),dh.totalScore=0,dh.totalTimeTaken=0}}var yh,vh,bh={exports:{}};yh=bh,vh=bh.exports,function(){var e,t="Expected a function",n="__lodash_hash_undefined__",i="__lodash_placeholder__",s=32,a=128,o=1/0,l=9007199254740991,u=NaN,c=4294967295,h=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],d="[object Arguments]",f="[object Array]",p="[object Boolean]",m="[object Date]",g="[object Error]",y="[object Function]",v="[object GeneratorFunction]",b="[object Map]",_="[object Number]",w="[object Object]",k="[object Promise]",S="[object RegExp]",E="[object Set]",T="[object String]",I="[object Symbol]",C="[object WeakMap]",x="[object ArrayBuffer]",A="[object DataView]",N="[object Float32Array]",D="[object Float64Array]",R="[object Int8Array]",L="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",U="[object Uint16Array]",F="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,q=RegExp(B.source),H=RegExp($.source),K=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(Y.source),ee=/^\s+/,te=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,re=/\{\n\/\* \[wrapped with (.+)\] \*/,ie=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,oe=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ue=/\w*$/,ce=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,de=/^\[object .+?Constructor\]$/,fe=/^0o[0-7]+$/i,pe=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ge=/($^)/,ye=/['\n\r\u2028\u2029\\]/g,ve="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_e="\\u2700-\\u27bf",we="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="["+ve+"]",Ie="["+Ee+"]",Ce="["+be+"]",xe="\\d+",Ae="["+_e+"]",Ne="["+we+"]",De="[^"+ve+Ee+xe+_e+we+ke+"]",Re="\\ud83c[\\udffb-\\udfff]",Le="[^"+ve+"]",Pe="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+ke+"]",Ue="\\u200d",Fe="(?:"+Ne+"|"+De+")",je="(?:"+Me+"|"+De+")",Ve="(?:['](?:d|ll|m|re|s|t|ve))?",ze="(?:['](?:D|LL|M|RE|S|T|VE))?",Be="(?:"+Ce+"|"+Re+")?",$e="["+Se+"]?",qe=$e+Be+"(?:"+Ue+"(?:"+[Le,Pe,Oe].join("|")+")"+$e+Be+")*",He="(?:"+[Ae,Pe,Oe].join("|")+")"+qe,Ke="(?:"+[Le+Ce+"?",Ce,Pe,Oe,Te].join("|")+")",We=RegExp("[']","g"),Ge=RegExp(Ce,"g"),Qe=RegExp(Re+"(?="+Re+")|"+Ke+qe,"g"),Xe=RegExp([Me+"?"+Ne+"+"+Ve+"(?="+[Ie,Me,"$"].join("|")+")",je+"+"+ze+"(?="+[Ie,Me+Fe,"$"].join("|")+")",Me+"?"+Fe+"+"+Ve,Me+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xe,He].join("|"),"g"),Je=RegExp("["+Ue+ve+be+Se+"]"),Ye=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],et=-1,tt={};tt[N]=tt[D]=tt[R]=tt[L]=tt[P]=tt[O]=tt[M]=tt[U]=tt[F]=!0,tt[d]=tt[f]=tt[x]=tt[p]=tt[A]=tt[m]=tt[g]=tt[y]=tt[b]=tt[_]=tt[w]=tt[S]=tt[E]=tt[T]=tt[C]=!1;var nt={};nt[d]=nt[f]=nt[x]=nt[A]=nt[p]=nt[m]=nt[N]=nt[D]=nt[R]=nt[L]=nt[P]=nt[b]=nt[_]=nt[w]=nt[S]=nt[E]=nt[T]=nt[I]=nt[O]=nt[M]=nt[U]=nt[F]=!0,nt[g]=nt[y]=nt[C]=!1;var rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,st=parseInt,at="object"==typeof r&&r&&r.Object===Object&&r,ot="object"==typeof self&&self&&self.Object===Object&&self,lt=at||ot||Function("return this")(),ut=vh&&!vh.nodeType&&vh,ct=ut&&yh&&!yh.nodeType&&yh,ht=ct&&ct.exports===ut,dt=ht&&at.process,ft=function(){try{return ct&&ct.require&&ct.require("util").types||dt&&dt.binding&&dt.binding("util")}catch(e){}}(),pt=ft&&ft.isArrayBuffer,mt=ft&&ft.isDate,gt=ft&&ft.isMap,yt=ft&&ft.isRegExp,vt=ft&&ft.isSet,bt=ft&&ft.isTypedArray;function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function St(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function It(e,t){return!(null==e||!e.length)&&Mt(e,t,0)>-1}function Ct(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function xt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function At(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Nt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Dt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Vt("length");function Pt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ot(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Mt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ot(e,Ft,n)}function Ut(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Ft(e){return e!=e}function jt(e,t){var n=null==e?0:e.length;return n?$t(e,t)/n:u}function Vt(t){return function(n){return null==n?e:n[t]}}function zt(t){return function(n){return null==t?e:t[n]}}function Bt(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n}function $t(t,n){for(var r,i=-1,s=t.length;++i<s;){var a=n(t[i]);a!==e&&(r=r===e?a:r+a)}return r}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ht(e){return e?e.slice(0,ln(e)+1).replace(ee,""):e}function Kt(e){return function(t){return e(t)}}function Wt(e,t){return xt(t,(function(t){return e[t]}))}function Gt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Mt(t,e[n],0)>-1;);return n}function Xt(e,t){for(var n=e.length;n--&&Mt(t,e[n],0)>-1;);return n}var Jt=zt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Yt=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zt(e){return"\\"+rt[e]}function en(e){return Je.test(e)}function tn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function nn(e,t){return function(n){return e(t(n))}}function rn(e,t){for(var n=-1,r=e.length,s=0,a=[];++n<r;){var o=e[n];o!==t&&o!==i||(e[n]=i,a[s++]=n)}return a}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function an(e){return en(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Lt(e)}function on(e){return en(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function ln(e){for(var t=e.length;t--&&te.test(e.charAt(t)););return t}var un=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function r(te){var ve,be=(te=null==te?lt:cn.defaults(lt.Object(),te,cn.pick(lt,Ze))).Array,_e=te.Date,we=te.Error,ke=te.Function,Se=te.Math,Ee=te.Object,Te=te.RegExp,Ie=te.String,Ce=te.TypeError,xe=be.prototype,Ae=ke.prototype,Ne=Ee.prototype,De=te["__core-js_shared__"],Re=Ae.toString,Le=Ne.hasOwnProperty,Pe=0,Oe=(ve=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+ve:"",Me=Ne.toString,Ue=Re.call(Ee),Fe=lt._,je=Te("^"+Re.call(Le).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=ht?te.Buffer:e,ze=te.Symbol,Be=te.Uint8Array,$e=Ve?Ve.allocUnsafe:e,qe=nn(Ee.getPrototypeOf,Ee),He=Ee.create,Ke=Ne.propertyIsEnumerable,Qe=xe.splice,Je=ze?ze.isConcatSpreadable:e,rt=ze?ze.iterator:e,at=ze?ze.toStringTag:e,ot=function(){try{var e=os(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=te.clearTimeout!==lt.clearTimeout&&te.clearTimeout,ct=_e&&_e.now!==lt.Date.now&&_e.now,dt=te.setTimeout!==lt.setTimeout&&te.setTimeout,ft=Se.ceil,Lt=Se.floor,zt=Ee.getOwnPropertySymbols,hn=Ve?Ve.isBuffer:e,dn=te.isFinite,fn=xe.join,pn=nn(Ee.keys,Ee),mn=Se.max,gn=Se.min,yn=_e.now,vn=te.parseInt,bn=Se.random,_n=xe.reverse,wn=os(te,"DataView"),kn=os(te,"Map"),Sn=os(te,"Promise"),En=os(te,"Set"),Tn=os(te,"WeakMap"),In=os(Ee,"create"),Cn=Tn&&new Tn,xn={},An=Ms(wn),Nn=Ms(kn),Dn=Ms(Sn),Rn=Ms(En),Ln=Ms(Tn),Pn=ze?ze.prototype:e,On=Pn?Pn.valueOf:e,Mn=Pn?Pn.toString:e;function Un(e){if(Za(e)&&!Ba(e)&&!(e instanceof zn)){if(e instanceof Vn)return e;if(Le.call(e,"__wrapped__"))return Us(e)}return new Vn(e)}var Fn=function(){function t(){}return function(n){if(!Ya(n))return{};if(He)return He(n);t.prototype=n;var r=new t;return t.prototype=e,r}}();function jn(){}function Vn(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new $n(e);this.size=t.size}function Wn(e,t){var n=Ba(e),r=!n&&za(e),i=!n&&!r&&Ka(e),s=!n&&!r&&!i&&oo(e),a=n||r||i||s,o=a?qt(e.length,Ie):[],l=o.length;for(var u in e)!t&&!Le.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ps(u,l))||o.push(u);return o}function Gn(t){var n=t.length;return n?t[qr(0,n-1)]:e}function Qn(e,t){return Ns(Ti(e),ir(t,0,e.length))}function Xn(e){return Ns(Ti(e))}function Jn(t,n,r){(r!==e&&!Fa(t[n],r)||r===e&&!(n in t))&&nr(t,n,r)}function Yn(t,n,r){var i=t[n];Le.call(t,n)&&Fa(i,r)&&(r!==e||n in t)||nr(t,n,r)}function Zn(e,t){for(var n=e.length;n--;)if(Fa(e[n][0],t))return n;return-1}function er(e,t,n,r){return ur(e,(function(e,i,s){t(r,e,n(e),s)})),r}function tr(e,t){return e&&Ii(t,No(t),e)}function nr(e,t,n){"__proto__"==t&&ot?ot(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(t,n){for(var r=-1,i=n.length,s=be(i),a=null==t;++r<i;)s[r]=a?e:To(t,n[r]);return s}function ir(t,n,r){return t==t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function sr(t,n,r,i,s,a){var o,l=1&n,u=2&n,c=4&n;if(r&&(o=s?r(t,i,s,a):r(t)),o!==e)return o;if(!Ya(t))return t;var h=Ba(t);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return Ti(t,o)}else{var f=cs(t),g=f==y||f==v;if(Ka(t))return bi(t,l);if(f==w||f==d||g&&!s){if(o=u||g?{}:ds(t),!l)return u?function(e,t){return Ii(e,us(e),t)}(t,function(e,t){return e&&Ii(t,Do(t),e)}(o,t)):function(e,t){return Ii(e,ls(e),t)}(t,tr(o,t))}else{if(!nt[f])return s?t:{};o=function(e,t,n){var r,i=e.constructor;switch(t){case x:return _i(e);case p:case m:return new i(+e);case A:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case D:case R:case L:case P:case O:case M:case U:case F:return wi(e,n);case b:return new i;case _:case T:return new i(e);case S:return function(e){var t=new e.constructor(e.source,ue.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return new i;case I:return r=e,On?Ee(On.call(r)):{}}}(t,f,l)}}a||(a=new Kn);var k=a.get(t);if(k)return k;a.set(t,o),io(t)?t.forEach((function(e){o.add(sr(e,n,r,e,t,a))})):eo(t)&&t.forEach((function(e,i){o.set(i,sr(e,n,r,i,t,a))}));var C=h?e:(c?u?es:Zi:u?Do:No)(t);return kt(C||t,(function(e,i){C&&(e=t[i=e]),Yn(o,i,sr(e,n,r,i,t,a))})),o}function ar(t,n,r){var i=r.length;if(null==t)return!i;for(t=Ee(t);i--;){var s=r[i],a=n[s],o=t[s];if(o===e&&!(s in t)||!a(o))return!1}return!0}function or(n,r,i){if("function"!=typeof n)throw new Ce(t);return Is((function(){n.apply(e,i)}),r)}function lr(e,t,n,r){var i=-1,s=It,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=xt(t,Kt(n))),r?(s=Ct,a=!1):t.length>=200&&(s=Gt,a=!1,t=new Hn(t));e:for(;++i<o;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,r)||l.push(c)}return l}Un.templateSettings={escape:K,evaluate:W,interpolate:G,variable:"",imports:{_:Un}},Un.prototype=jn.prototype,Un.prototype.constructor=Un,Vn.prototype=Fn(jn.prototype),Vn.prototype.constructor=Vn,zn.prototype=Fn(jn.prototype),zn.prototype.constructor=zn,Bn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Bn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bn.prototype.get=function(t){var r=this.__data__;if(In){var i=r[t];return i===n?e:i}return Le.call(r,t)?r[t]:e},Bn.prototype.has=function(t){var n=this.__data__;return In?n[t]!==e:Le.call(n,t)},Bn.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=In&&r===e?n:r,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=Zn(t,e);return!(n<0||(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,0))},$n.prototype.get=function(t){var n=this.__data__,r=Zn(n,t);return r<0?e:n[r][1]},$n.prototype.has=function(e){return Zn(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=Zn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Bn,map:new(kn||$n),string:new Bn}},qn.prototype.delete=function(e){var t=ss(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ss(this,e).get(e)},qn.prototype.has=function(e){return ss(this,e).has(e)},qn.prototype.set=function(e,t){var n=ss(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Hn.prototype.add=Hn.prototype.push=function(e){return this.__data__.set(e,n),this},Hn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new $n,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!kn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var ur=Ai(yr),cr=Ai(vr,!0);function hr(e,t){var n=!0;return ur(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function dr(t,n,r){for(var i=-1,s=t.length;++i<s;){var a=t[i],o=n(a);if(null!=o&&(l===e?o==o&&!ao(o):r(o,l)))var l=o,u=a}return u}function fr(e,t){var n=[];return ur(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function pr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=fs),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?pr(o,t-1,n,r,i):At(i,o):r||(i[i.length]=o)}return i}var mr=Ni(),gr=Ni(!0);function yr(e,t){return e&&mr(e,t,No)}function vr(e,t){return e&&gr(e,t,No)}function br(e,t){return Tt(t,(function(t){return Qa(e[t])}))}function _r(t,n){for(var r=0,i=(n=mi(n,t)).length;null!=t&&r<i;)t=t[Os(n[r++])];return r&&r==i?t:e}function wr(e,t,n){var r=t(e);return Ba(e)?r:At(r,n(e))}function kr(t){return null==t?t===e?"[object Undefined]":"[object Null]":at&&at in Ee(t)?function(t){var n=Le.call(t,at),r=t[at];try{t[at]=e;var i=!0}catch(a){}var s=Me.call(t);return i&&(n?t[at]=r:delete t[at]),s}(t):function(e){return Me.call(e)}(t)}function Sr(e,t){return e>t}function Er(e,t){return null!=e&&Le.call(e,t)}function Tr(e,t){return null!=e&&t in Ee(e)}function Ir(t,n,r){for(var i=r?Ct:It,s=t[0].length,a=t.length,o=a,l=be(a),u=1/0,c=[];o--;){var h=t[o];o&&n&&(h=xt(h,Kt(n))),u=gn(h.length,u),l[o]=!r&&(n||s>=120&&h.length>=120)?new Hn(o&&h):e}h=t[0];var d=-1,f=l[0];e:for(;++d<s&&c.length<u;){var p=h[d],m=n?n(p):p;if(p=r||0!==p?p:0,!(f?Gt(f,m):i(c,m,r))){for(o=a;--o;){var g=l[o];if(!(g?Gt(g,m):i(t[o],m,r)))continue e}f&&f.push(m),c.push(p)}}return c}function Cr(t,n,r){var i=null==(t=Ss(t,n=mi(n,t)))?t:t[Os(Gs(n))];return null==i?e:_t(i,t,r)}function xr(e){return Za(e)&&kr(e)==d}function Ar(t,n,r,i,s){return t===n||(null==t||null==n||!Za(t)&&!Za(n)?t!=t&&n!=n:function(t,n,r,i,s,a){var o=Ba(t),l=Ba(n),u=o?f:cs(t),c=l?f:cs(n),h=(u=u==d?w:u)==w,y=(c=c==d?w:c)==w,v=u==c;if(v&&Ka(t)){if(!Ka(n))return!1;o=!0,h=!1}if(v&&!h)return a||(a=new Kn),o||oo(t)?Ji(t,n,r,i,s,a):function(e,t,n,r,i,s,a){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!s(new Be(e),new Be(t)));case p:case m:case _:return Fa(+e,+t);case g:return e.name==t.name&&e.message==t.message;case S:case T:return e==t+"";case b:var o=tn;case E:var l=1&r;if(o||(o=sn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=Ji(o(e),o(t),r,i,s,a);return a.delete(e),c;case I:if(On)return On.call(e)==On.call(t)}return!1}(t,n,u,r,i,s,a);if(!(1&r)){var k=h&&Le.call(t,"__wrapped__"),C=y&&Le.call(n,"__wrapped__");if(k||C){var N=k?t.value():t,D=C?n.value():n;return a||(a=new Kn),s(N,D,r,i,a)}}return!!v&&(a||(a=new Kn),function(t,n,r,i,s,a){var o=1&r,l=Zi(t),u=l.length;if(u!=Zi(n).length&&!o)return!1;for(var c=u;c--;){var h=l[c];if(!(o?h in n:Le.call(n,h)))return!1}var d=a.get(t),f=a.get(n);if(d&&f)return d==n&&f==t;var p=!0;a.set(t,n),a.set(n,t);for(var m=o;++c<u;){var g=t[h=l[c]],y=n[h];if(i)var v=o?i(y,g,h,n,t,a):i(g,y,h,t,n,a);if(!(v===e?g===y||s(g,y,r,i,a):v)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var b=t.constructor,_=n.constructor;b==_||!("constructor"in t)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(t),a.delete(n),p}(t,n,r,i,s,a))}(t,n,r,i,Ar,s))}function Nr(t,n,r,i){var s=r.length,a=s,o=!i;if(null==t)return!a;for(t=Ee(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){var u=(l=r[s])[0],c=t[u],h=l[1];if(o&&l[2]){if(c===e&&!(u in t))return!1}else{var d=new Kn;if(i)var f=i(c,h,u,t,n,d);if(!(f===e?Ar(h,c,3,i,d):f))return!1}}return!0}function Dr(e){return!(!Ya(e)||(t=e,Oe&&Oe in t))&&(Qa(e)?je:de).test(Ms(e));var t}function Rr(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?Ba(e)?Ur(e[0],e[1]):Mr(e):hl(e)}function Lr(e){if(!bs(e))return pn(e);var t=[];for(var n in Ee(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pr(e,t){return e<t}function Or(e,t){var n=-1,r=qa(e)?be(e.length):[];return ur(e,(function(e,i,s){r[++n]=t(e,i,s)})),r}function Mr(e){var t=as(e);return 1==t.length&&t[0][2]?ws(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Ur(t,n){return gs(t)&&_s(n)?ws(Os(t),n):function(r){var i=To(r,t);return i===e&&i===n?Io(r,t):Ar(n,i,3)}}function Fr(t,n,r,i,s){t!==n&&mr(n,(function(a,o){if(s||(s=new Kn),Ya(a))!function(t,n,r,i,s,a,o){var l=Es(t,r),u=Es(n,r),c=o.get(u);if(c)Jn(t,r,c);else{var h=a?a(l,u,r+"",t,n,o):e,d=h===e;if(d){var f=Ba(u),p=!f&&Ka(u),m=!f&&!p&&oo(u);h=u,f||p||m?Ba(l)?h=l:Ha(l)?h=Ti(l):p?(d=!1,h=bi(u,!0)):m?(d=!1,h=wi(u,!0)):h=[]:no(u)||za(u)?(h=l,za(l)?h=go(l):Ya(l)&&!Qa(l)||(h=ds(u))):d=!1}d&&(o.set(u,h),s(h,u,i,a,o),o.delete(u)),Jn(t,r,h)}}(t,n,o,r,Fr,i,s);else{var l=i?i(Es(t,o),a,o+"",t,n,s):e;l===e&&(l=a),Jn(t,o,l)}}),Do)}function jr(t,n){var r=t.length;if(r)return ps(n+=n<0?r:0,r)?t[n]:e}function Vr(e,t,n){t=t.length?xt(t,(function(e){return Ba(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[nl];var r=-1;return t=xt(t,Kt(is())),function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;++r<a;){var l=ki(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(Or(e,(function(e,n,i){return{criteria:xt(t,(function(t){return t(e)})),index:++r,value:e}})))}function zr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=_r(e,a);n(o,a)&&Qr(s,mi(a,e),o)}return s}function Br(e,t,n,r){var i=r?Ut:Mt,s=-1,a=t.length,o=e;for(e===t&&(t=Ti(t)),n&&(o=xt(e,Kt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=i(o,c,l,r))>-1;)o!==e&&Qe.call(o,l,1),Qe.call(e,l,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;ps(i)?Qe.call(e,i,1):oi(e,i)}}return e}function qr(e,t){return e+Lt(bn()*(t-e+1))}function Hr(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=Lt(t/2))&&(e+=e)}while(t);return n}function Kr(e,t){return Cs(ks(e,t,nl),e+"")}function Wr(e){return Gn(jo(e))}function Gr(e,t){var n=jo(e);return Ns(n,ir(t,0,n.length))}function Qr(t,n,r,i){if(!Ya(t))return t;for(var s=-1,a=(n=mi(n,t)).length,o=a-1,l=t;null!=l&&++s<a;){var u=Os(n[s]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(s!=o){var h=l[u];(c=i?i(h,u,l):e)===e&&(c=Ya(h)?h:ps(n[s+1])?[]:{})}Yn(l,u,c),l=l[u]}return t}var Xr=Cn?function(e,t){return Cn.set(e,t),e}:nl,Jr=ot?function(e,t){return ot(e,"toString",{configurable:!0,enumerable:!1,value:Zo(t),writable:!0})}:nl;function Yr(e){return Ns(jo(e))}function Zr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=be(i);++r<i;)s[r]=e[r+t];return s}function ei(e,t){var n;return ur(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ti(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!ao(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ni(e,t,nl,n)}function ni(t,n,r,i){var s=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(n=r(n))!=n,l=null===n,u=ao(n),c=n===e;s<a;){var h=Lt((s+a)/2),d=r(t[h]),f=d!==e,p=null===d,m=d==d,g=ao(d);if(o)var y=i||m;else y=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!g):!p&&!g&&(i?d<=n:d<n);y?s=h+1:a=h}return gn(a,4294967294)}function ri(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!Fa(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function ii(e){return"number"==typeof e?e:ao(e)?u:+e}function si(e){if("string"==typeof e)return e;if(Ba(e))return xt(e,si)+"";if(ao(e))return Mn?Mn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ai(e,t,n){var r=-1,i=It,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=Ct;else if(s>=200){var u=t?null:Hi(e);if(u)return sn(u);a=!1,i=Gt,l=new Hn}else l=t?[]:o;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else i(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function oi(e,t){return null==(e=Ss(e,t=mi(t,e)))||delete e[Os(Gs(t))]}function li(e,t,n,r){return Qr(e,t,n(_r(e,t)),r)}function ui(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?Zr(e,r?0:s,r?s+1:i):Zr(e,r?s+1:0,r?i:s)}function ci(e,t){var n=e;return n instanceof zn&&(n=n.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,At([e],t.args))}),n)}function hi(e,t,n){var r=e.length;if(r<2)return r?ai(e[0]):[];for(var i=-1,s=be(r);++i<r;)for(var a=e[i],o=-1;++o<r;)o!=i&&(s[i]=lr(s[i]||a,e[o],t,n));return ai(pr(s,1),t,n)}function di(t,n,r){for(var i=-1,s=t.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:e;r(o,t[i],l)}return o}function fi(e){return Ha(e)?e:[]}function pi(e){return"function"==typeof e?e:nl}function mi(e,t){return Ba(e)?e:gs(e,t)?[e]:Ps(yo(e))}var gi=Kr;function yi(t,n,r){var i=t.length;return r=r===e?i:r,!n&&r>=i?t:Zr(t,n,r)}var vi=ut||function(e){return lt.clearTimeout(e)};function bi(e,t){if(t)return e.slice();var n=e.length,r=$e?$e(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function wi(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ki(t,n){if(t!==n){var r=t!==e,i=null===t,s=t==t,a=ao(t),o=n!==e,l=null===n,u=n==n,c=ao(n);if(!l&&!c&&!a&&t>n||a&&o&&u&&!l&&!c||i&&o&&u||!r&&u||!s)return 1;if(!i&&!a&&!c&&t<n||c&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!u)return-1}return 0}function Si(e,t,n,r){for(var i=-1,s=e.length,a=n.length,o=-1,l=t.length,u=mn(s-a,0),c=be(l+u),h=!r;++o<l;)c[o]=t[o];for(;++i<a;)(h||i<s)&&(c[n[i]]=e[i]);for(;u--;)c[o++]=e[i++];return c}function Ei(e,t,n,r){for(var i=-1,s=e.length,a=-1,o=n.length,l=-1,u=t.length,c=mn(s-o,0),h=be(c+u),d=!r;++i<c;)h[i]=e[i];for(var f=i;++l<u;)h[f+l]=t[l];for(;++a<o;)(d||i<s)&&(h[f+n[a]]=e[i++]);return h}function Ti(e,t){var n=-1,r=e.length;for(t||(t=be(r));++n<r;)t[n]=e[n];return t}function Ii(t,n,r,i){var s=!r;r||(r={});for(var a=-1,o=n.length;++a<o;){var l=n[a],u=i?i(r[l],t[l],l,r,t):e;u===e&&(u=t[l]),s?nr(r,l,u):Yn(r,l,u)}return r}function Ci(e,t){return function(n,r){var i=Ba(n)?wt:er,s=t?t():{};return i(n,e,is(r,2),s)}}function xi(t){return Kr((function(n,r){var i=-1,s=r.length,a=s>1?r[s-1]:e,o=s>2?r[2]:e;for(a=t.length>3&&"function"==typeof a?(s--,a):e,o&&ms(r[0],r[1],o)&&(a=s<3?e:a,s=1),n=Ee(n);++i<s;){var l=r[i];l&&t(n,l,i,a)}return n}))}function Ai(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Ee(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,s=Ee(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Di(t){return function(n){var r=en(n=yo(n))?on(n):e,i=r?r[0]:n.charAt(0),s=r?yi(r,1).join(""):n.slice(1);return i[t]()+s}}function Ri(e){return function(t){return Nt(Xo(Bo(t).replace(We,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Fn(e.prototype),r=e.apply(n,t);return Ya(r)?r:n}}function Pi(t){return function(n,r,i){var s=Ee(n);if(!qa(n)){var a=is(r,3);n=No(n),r=function(e){return a(s[e],e,s)}}var o=t(n,r,i);return o>-1?s[a?n[o]:o]:e}}function Oi(n){return Yi((function(r){var i=r.length,s=i,a=Vn.prototype.thru;for(n&&r.reverse();s--;){var o=r[s];if("function"!=typeof o)throw new Ce(t);if(a&&!l&&"wrapper"==ns(o))var l=new Vn([],!0)}for(s=l?s:i;++s<i;){var u=ns(o=r[s]),c="wrapper"==u?ts(o):e;l=c&&ys(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ns(c[0])].apply(l,c[3]):1==o.length&&ys(o)?l[u]():l.thru(o)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&Ba(t))return l.plant(t).value();for(var n=0,s=i?r[n].apply(this,e):t;++n<i;)s=r[n].call(this,s);return s}}))}function Mi(t,n,r,i,s,o,l,u,c,h){var d=n&a,f=1&n,p=2&n,m=24&n,g=512&n,y=p?e:Li(t);return function a(){for(var v=arguments.length,b=be(v),_=v;_--;)b[_]=arguments[_];if(m)var w=rs(a),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(i&&(b=Si(b,i,s,m)),o&&(b=Ei(b,o,l,m)),v-=k,m&&v<h){var S=rn(b,w);return $i(t,n,Mi,a.placeholder,r,b,S,u,c,h-v)}var E=f?r:this,T=p?E[t]:t;return v=b.length,u?b=function(t,n){for(var r=t.length,i=gn(n.length,r),s=Ti(t);i--;){var a=n[i];t[i]=ps(a,r)?s[a]:e}return t}(b,u):g&&v>1&&b.reverse(),d&&c<v&&(b.length=c),this&&this!==lt&&this instanceof a&&(T=y||Li(T)),T.apply(E,b)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return yr(e,(function(e,i,s){t(r,n(e),i,s)})),r}(n,e,t(r),{})}}function Fi(t,n){return function(r,i){var s;if(r===e&&i===e)return n;if(r!==e&&(s=r),i!==e){if(s===e)return i;"string"==typeof r||"string"==typeof i?(r=si(r),i=si(i)):(r=ii(r),i=ii(i)),s=t(r,i)}return s}}function ji(e){return Yi((function(t){return t=xt(t,Kt(is())),Kr((function(n){var r=this;return e(t,(function(e){return _t(e,r,n)}))}))}))}function Vi(t,n){var r=(n=n===e?" ":si(n)).length;if(r<2)return r?Hr(n,t):n;var i=Hr(n,ft(t/an(n)));return en(n)?yi(on(i),0,t).join(""):i.slice(0,t)}function zi(t){return function(n,r,i){return i&&"number"!=typeof i&&ms(n,r,i)&&(r=i=e),n=ho(n),r===e?(r=n,n=0):r=ho(r),function(e,t,n,r){for(var i=-1,s=mn(ft((t-e)/(n||1)),0),a=be(s);s--;)a[r?s:++i]=e,e+=n;return a}(n,r,i=i===e?n<r?1:-1:ho(i),t)}}function Bi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=mo(t),n=mo(n)),e(t,n)}}function $i(t,n,r,i,a,o,l,u,c,h){var d=8&n;n|=d?s:64,4&(n&=~(d?64:s))||(n&=-4);var f=[t,n,a,d?o:e,d?l:e,d?e:o,d?e:l,u,c,h],p=r.apply(e,f);return ys(t)&&Ts(p,f),p.placeholder=i,xs(p,t,n)}function qi(e){var t=Se[e];return function(e,n){if(e=mo(e),(n=null==n?0:gn(fo(n),292))&&dn(e)){var r=(yo(e)+"e").split("e");return+((r=(yo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Hi=En&&1/sn(new En([,-0]))[1]==o?function(e){return new En(e)}:ol;function Ki(e){return function(t){var n,r,i,s=cs(t);return s==b?tn(t):s==E?(n=t,r=-1,i=Array(n.size),n.forEach((function(e){i[++r]=[e,e]})),i):function(e,t){return xt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Wi(n,r,o,l,u,c,h,d){var f=2&r;if(!f&&"function"!=typeof n)throw new Ce(t);var p=l?l.length:0;if(p||(r&=-97,l=u=e),h=h===e?h:mn(fo(h),0),d=d===e?d:fo(d),p-=u?u.length:0,64&r){var m=l,g=u;l=u=e}var y=f?e:ts(n),v=[n,r,o,l,u,m,g,c,h,d];if(y&&function(e,t){var n=e[1],r=t[1],s=n|r,o=s<131,l=r==a&&8==n||r==a&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!l)return e;1&r&&(e[2]=t[2],s|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Si(c,u,t[4]):u,e[4]=c?rn(e[3],i):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Ei(c,u,t[6]):u,e[6]=c?rn(e[5],i):t[6]),(u=t[7])&&(e[7]=u),r&a&&(e[8]=null==e[8]?t[8]:gn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=s}(v,y),n=v[0],r=v[1],o=v[2],l=v[3],u=v[4],!(d=v[9]=v[9]===e?f?0:n.length:mn(v[9]-p,0))&&24&r&&(r&=-25),r&&1!=r)b=8==r||16==r?function(t,n,r){var i=Li(t);return function s(){for(var a=arguments.length,o=be(a),l=a,u=rs(s);l--;)o[l]=arguments[l];var c=a<3&&o[0]!==u&&o[a-1]!==u?[]:rn(o,u);return(a-=c.length)<r?$i(t,n,Mi,s.placeholder,e,o,c,e,e,r-a):_t(this&&this!==lt&&this instanceof s?i:t,this,o)}}(n,r,d):r!=s&&33!=r||u.length?Mi.apply(e,v):function(e,t,n,r){var i=1&t,s=Li(e);return function t(){for(var a=-1,o=arguments.length,l=-1,u=r.length,c=be(u+o),h=this&&this!==lt&&this instanceof t?s:e;++l<u;)c[l]=r[l];for(;o--;)c[l++]=arguments[++a];return _t(h,i?n:this,c)}}(n,r,o,l);else var b=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==lt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(n,r,o);return xs((y?Xr:Ts)(b,v),n,r)}function Gi(t,n,r,i){return t===e||Fa(t,Ne[r])&&!Le.call(i,r)?n:t}function Qi(t,n,r,i,s,a){return Ya(t)&&Ya(n)&&(a.set(n,t),Fr(t,n,e,Qi,a),a.delete(n)),t}function Xi(t){return no(t)?e:t}function Ji(t,n,r,i,s,a){var o=1&r,l=t.length,u=n.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(t),h=a.get(n);if(c&&h)return c==n&&h==t;var d=-1,f=!0,p=2&r?new Hn:e;for(a.set(t,n),a.set(n,t);++d<l;){var m=t[d],g=n[d];if(i)var y=o?i(g,m,d,n,t,a):i(m,g,d,t,n,a);if(y!==e){if(y)continue;f=!1;break}if(p){if(!Rt(n,(function(e,t){if(!Gt(p,t)&&(m===e||s(m,e,r,i,a)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!s(m,g,r,i,a)){f=!1;break}}return a.delete(t),a.delete(n),f}function Yi(t){return Cs(ks(t,e,$s),t+"")}function Zi(e){return wr(e,No,ls)}function es(e){return wr(e,Do,us)}var ts=Cn?function(e){return Cn.get(e)}:ol;function ns(e){for(var t=e.name+"",n=xn[t],r=Le.call(xn,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function rs(e){return(Le.call(Un,"placeholder")?Un:e).placeholder}function is(){var e=Un.iteratee||rl;return e=e===rl?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function ss(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function as(e){for(var t=No(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,_s(i)]}return t}function os(t,n){var r=function(t,n){return null==t?e:t[n]}(t,n);return Dr(r)?r:e}var ls=zt?function(e){return null==e?[]:(e=Ee(e),Tt(zt(e),(function(t){return Ke.call(e,t)})))}:pl,us=zt?function(e){for(var t=[];e;)At(t,ls(e)),e=qe(e);return t}:pl,cs=kr;function hs(e,t,n){for(var r=-1,i=(t=mi(t,e)).length,s=!1;++r<i;){var a=Os(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&Ja(i)&&ps(a,i)&&(Ba(e)||za(e))}function ds(e){return"function"!=typeof e.constructor||bs(e)?{}:Fn(qe(e))}function fs(e){return Ba(e)||za(e)||!!(Je&&e&&e[Je])}function ps(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&pe.test(e))&&e>-1&&e%1==0&&e<t}function ms(e,t,n){if(!Ya(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&ps(t,n.length):"string"==r&&t in n)&&Fa(n[t],e)}function gs(e,t){if(Ba(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ao(e))||X.test(e)||!Q.test(e)||null!=t&&e in Ee(t)}function ys(e){var t=ns(e),n=Un[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=ts(n);return!!r&&e===r[0]}(wn&&cs(new wn(new ArrayBuffer(1)))!=A||kn&&cs(new kn)!=b||Sn&&cs(Sn.resolve())!=k||En&&cs(new En)!=E||Tn&&cs(new Tn)!=C)&&(cs=function(t){var n=kr(t),r=n==w?t.constructor:e,i=r?Ms(r):"";if(i)switch(i){case An:return A;case Nn:return b;case Dn:return k;case Rn:return E;case Ln:return C}return n});var vs=De?Qa:ml;function bs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ne)}function _s(e){return e==e&&!Ya(e)}function ws(t,n){return function(r){return null!=r&&r[t]===n&&(n!==e||t in Ee(r))}}function ks(t,n,r){return n=mn(n===e?t.length-1:n,0),function(){for(var e=arguments,i=-1,s=mn(e.length-n,0),a=be(s);++i<s;)a[i]=e[n+i];i=-1;for(var o=be(n+1);++i<n;)o[i]=e[i];return o[n]=r(a),_t(t,this,o)}}function Ss(e,t){return t.length<2?e:_r(e,Zr(t,0,-1))}function Es(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ts=As(Xr),Is=dt||function(e,t){return lt.setTimeout(e,t)},Cs=As(Jr);function xs(e,t,n){var r=t+"";return Cs(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ne,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return kt(h,(function(n){var r="_."+n[0];t&n[1]&&!It(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(re);return t?t[1].split(ie):[]}(r),n)))}function As(t){var n=0,r=0;return function(){var i=yn(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function Ns(t,n){var r=-1,i=t.length,s=i-1;for(n=n===e?i:n;++r<n;){var a=qr(r,s),o=t[a];t[a]=t[r],t[r]=o}return t.length=n,t}var Ds,Rs,Ls,Ps=(Ds=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(J,(function(e,n,r,i){t.push(r?i.replace(oe,"$1"):n||e)})),t},Rs=Ra(Ds,(function(e){return 500===Ls.size&&Ls.clear(),e})),Ls=Rs.cache,Rs);function Os(e){if("string"==typeof e||ao(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ms(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Us(e){if(e instanceof zn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fs=Kr((function(e,t){return Ha(e)?lr(e,pr(t,1,Ha,!0)):[]})),js=Kr((function(t,n){var r=Gs(n);return Ha(r)&&(r=e),Ha(t)?lr(t,pr(n,1,Ha,!0),is(r,2)):[]})),Vs=Kr((function(t,n){var r=Gs(n);return Ha(r)&&(r=e),Ha(t)?lr(t,pr(n,1,Ha,!0),e,r):[]}));function zs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fo(n);return i<0&&(i=mn(r+i,0)),Ot(e,is(t,3),i)}function Bs(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return r!==e&&(s=fo(r),s=r<0?mn(i+s,0):gn(s,i-1)),Ot(t,is(n,3),s,!0)}function $s(e){return null!=e&&e.length?pr(e,1):[]}function qs(t){return t&&t.length?t[0]:e}var Hs=Kr((function(e){var t=xt(e,fi);return t.length&&t[0]===e[0]?Ir(t):[]})),Ks=Kr((function(t){var n=Gs(t),r=xt(t,fi);return n===Gs(r)?n=e:r.pop(),r.length&&r[0]===t[0]?Ir(r,is(n,2)):[]})),Ws=Kr((function(t){var n=Gs(t),r=xt(t,fi);return(n="function"==typeof n?n:e)&&r.pop(),r.length&&r[0]===t[0]?Ir(r,e,n):[]}));function Gs(t){var n=null==t?0:t.length;return n?t[n-1]:e}var Qs=Kr(Xs);function Xs(e,t){return e&&e.length&&t&&t.length?Br(e,t):e}var Js=Yi((function(e,t){var n=null==e?0:e.length,r=rr(e,t);return $r(e,xt(t,(function(e){return ps(e,n)?+e:e})).sort(ki)),r}));function Ys(e){return null==e?e:_n.call(e)}var Zs=Kr((function(e){return ai(pr(e,1,Ha,!0))})),ea=Kr((function(t){var n=Gs(t);return Ha(n)&&(n=e),ai(pr(t,1,Ha,!0),is(n,2))})),ta=Kr((function(t){var n=Gs(t);return n="function"==typeof n?n:e,ai(pr(t,1,Ha,!0),e,n)}));function na(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,(function(e){if(Ha(e))return t=mn(e.length,t),!0})),qt(t,(function(t){return xt(e,Vt(t))}))}function ra(t,n){if(!t||!t.length)return[];var r=na(t);return null==n?r:xt(r,(function(t){return _t(n,e,t)}))}var ia=Kr((function(e,t){return Ha(e)?lr(e,t):[]})),sa=Kr((function(e){return hi(Tt(e,Ha))})),aa=Kr((function(t){var n=Gs(t);return Ha(n)&&(n=e),hi(Tt(t,Ha),is(n,2))})),oa=Kr((function(t){var n=Gs(t);return n="function"==typeof n?n:e,hi(Tt(t,Ha),e,n)})),la=Kr(na),ua=Kr((function(t){var n=t.length,r=n>1?t[n-1]:e;return r="function"==typeof r?(t.pop(),r):e,ra(t,r)}));function ca(e){var t=Un(e);return t.__chain__=!0,t}function ha(e,t){return t(e)}var da=Yi((function(t){var n=t.length,r=n?t[0]:0,i=this.__wrapped__,s=function(e){return rr(e,t)};return!(n>1||this.__actions__.length)&&i instanceof zn&&ps(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:ha,args:[s],thisArg:e}),new Vn(i,this.__chain__).thru((function(t){return n&&!t.length&&t.push(e),t}))):this.thru(s)})),fa=Ci((function(e,t,n){Le.call(e,n)?++e[n]:nr(e,n,1)})),pa=Pi(zs),ma=Pi(Bs);function ga(e,t){return(Ba(e)?kt:ur)(e,is(t,3))}function ya(e,t){return(Ba(e)?St:cr)(e,is(t,3))}var va=Ci((function(e,t,n){Le.call(e,n)?e[n].push(t):nr(e,n,[t])})),ba=Kr((function(e,t,n){var r=-1,i="function"==typeof t,s=qa(e)?be(e.length):[];return ur(e,(function(e){s[++r]=i?_t(t,e,n):Cr(e,t,n)})),s})),_a=Ci((function(e,t,n){nr(e,n,t)}));function wa(e,t){return(Ba(e)?xt:Or)(e,is(t,3))}var ka=Ci((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Sa=Kr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ms(e,t[0],t[1])?t=[]:n>2&&ms(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,pr(t,1),[])})),Ea=ct||function(){return lt.Date.now()};function Ta(t,n,r){return n=r?e:n,n=t&&null==n?t.length:n,Wi(t,a,e,e,e,e,n)}function Ia(n,r){var i;if("function"!=typeof r)throw new Ce(t);return n=fo(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=e),i}}var Ca=Kr((function(e,t,n){var r=1;if(n.length){var i=rn(n,rs(Ca));r|=s}return Wi(e,r,t,n,i)})),xa=Kr((function(e,t,n){var r=3;if(n.length){var i=rn(n,rs(xa));r|=s}return Wi(t,r,e,n,i)}));function Aa(n,r,i){var s,a,o,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof n)throw new Ce(t);function m(t){var r=s,i=a;return s=a=e,h=t,l=n.apply(i,r)}function g(t){var n=t-c;return c===e||n>=r||n<0||f&&t-h>=o}function y(){var e=Ea();if(g(e))return v(e);u=Is(y,function(e){var t=r-(e-c);return f?gn(t,o-(e-h)):t}(e))}function v(t){return u=e,p&&s?m(t):(s=a=e,l)}function b(){var t=Ea(),n=g(t);if(s=arguments,a=this,c=t,n){if(u===e)return function(e){return h=e,u=Is(y,r),d?m(e):l}(c);if(f)return vi(u),u=Is(y,r),m(c)}return u===e&&(u=Is(y,r)),l}return r=mo(r)||0,Ya(i)&&(d=!!i.leading,o=(f="maxWait"in i)?mn(mo(i.maxWait)||0,r):o,p="trailing"in i?!!i.trailing:p),b.cancel=function(){u!==e&&vi(u),h=0,s=c=a=u=e},b.flush=function(){return u===e?l:v(Ea())},b}var Na=Kr((function(e,t){return or(e,1,t)})),Da=Kr((function(e,t,n){return or(e,mo(t)||0,n)}));function Ra(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Ce(t);var r=function(){var t=arguments,i=n?n.apply(this,t):t[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,t);return r.cache=s.set(i,a)||s,a};return r.cache=new(Ra.Cache||qn),r}function La(e){if("function"!=typeof e)throw new Ce(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ra.Cache=qn;var Pa=gi((function(e,t){var n=(t=1==t.length&&Ba(t[0])?xt(t[0],Kt(is())):xt(pr(t,1),Kt(is()))).length;return Kr((function(r){for(var i=-1,s=gn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return _t(e,this,r)}))})),Oa=Kr((function(t,n){var r=rn(n,rs(Oa));return Wi(t,s,e,n,r)})),Ma=Kr((function(t,n){var r=rn(n,rs(Ma));return Wi(t,64,e,n,r)})),Ua=Yi((function(t,n){return Wi(t,256,e,e,e,n)}));function Fa(e,t){return e===t||e!=e&&t!=t}var ja=Bi(Sr),Va=Bi((function(e,t){return e>=t})),za=xr(function(){return arguments}())?xr:function(e){return Za(e)&&Le.call(e,"callee")&&!Ke.call(e,"callee")},Ba=be.isArray,$a=pt?Kt(pt):function(e){return Za(e)&&kr(e)==x};function qa(e){return null!=e&&Ja(e.length)&&!Qa(e)}function Ha(e){return Za(e)&&qa(e)}var Ka=hn||ml,Wa=mt?Kt(mt):function(e){return Za(e)&&kr(e)==m};function Ga(e){if(!Za(e))return!1;var t=kr(e);return t==g||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Qa(e){if(!Ya(e))return!1;var t=kr(e);return t==y||t==v||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xa(e){return"number"==typeof e&&e==fo(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function Ya(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Za(e){return null!=e&&"object"==typeof e}var eo=gt?Kt(gt):function(e){return Za(e)&&cs(e)==b};function to(e){return"number"==typeof e||Za(e)&&kr(e)==_}function no(e){if(!Za(e)||kr(e)!=w)return!1;var t=qe(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Ue}var ro=yt?Kt(yt):function(e){return Za(e)&&kr(e)==S},io=vt?Kt(vt):function(e){return Za(e)&&cs(e)==E};function so(e){return"string"==typeof e||!Ba(e)&&Za(e)&&kr(e)==T}function ao(e){return"symbol"==typeof e||Za(e)&&kr(e)==I}var oo=bt?Kt(bt):function(e){return Za(e)&&Ja(e.length)&&!!tt[kr(e)]},lo=Bi(Pr),uo=Bi((function(e,t){return e<=t}));function co(e){if(!e)return[];if(qa(e))return so(e)?on(e):Ti(e);if(rt&&e[rt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[rt]());var t=cs(e);return(t==b?tn:t==E?sn:jo)(e)}function ho(e){return e?(e=mo(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fo(e){var t=ho(e),n=t%1;return t==t?n?t-n:t:0}function po(e){return e?ir(fo(e),0,c):0}function mo(e){if("number"==typeof e)return e;if(ao(e))return u;if(Ya(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ya(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ht(e);var n=he.test(e);return n||fe.test(e)?st(e.slice(2),n?2:8):ce.test(e)?u:+e}function go(e){return Ii(e,Do(e))}function yo(e){return null==e?"":si(e)}var vo=xi((function(e,t){if(bs(t)||qa(t))Ii(t,No(t),e);else for(var n in t)Le.call(t,n)&&Yn(e,n,t[n])})),bo=xi((function(e,t){Ii(t,Do(t),e)})),_o=xi((function(e,t,n,r){Ii(t,Do(t),e,r)})),wo=xi((function(e,t,n,r){Ii(t,No(t),e,r)})),ko=Yi(rr),So=Kr((function(t,n){t=Ee(t);var r=-1,i=n.length,s=i>2?n[2]:e;for(s&&ms(n[0],n[1],s)&&(i=1);++r<i;)for(var a=n[r],o=Do(a),l=-1,u=o.length;++l<u;){var c=o[l],h=t[c];(h===e||Fa(h,Ne[c])&&!Le.call(t,c))&&(t[c]=a[c])}return t})),Eo=Kr((function(t){return t.push(e,Qi),_t(Lo,e,t)}));function To(t,n,r){var i=null==t?e:_r(t,n);return i===e?r:i}function Io(e,t){return null!=e&&hs(e,t,Tr)}var Co=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=n}),Zo(nl)),xo=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),is),Ao=Kr(Cr);function No(e){return qa(e)?Wn(e):Lr(e)}function Do(e){return qa(e)?Wn(e,!0):function(e){if(!Ya(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=bs(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}(e)}var Ro=xi((function(e,t,n){Fr(e,t,n)})),Lo=xi((function(e,t,n,r){Fr(e,t,n,r)})),Po=Yi((function(e,t){var n={};if(null==e)return n;var r=!1;t=xt(t,(function(t){return t=mi(t,e),r||(r=t.length>1),t})),Ii(e,es(e),n),r&&(n=sr(n,7,Xi));for(var i=t.length;i--;)oi(n,t[i]);return n})),Oo=Yi((function(e,t){return null==e?{}:function(e,t){return zr(e,t,(function(t,n){return Io(e,n)}))}(e,t)}));function Mo(e,t){if(null==e)return{};var n=xt(es(e),(function(e){return[e]}));return t=is(t),zr(e,n,(function(e,n){return t(e,n[0])}))}var Uo=Ki(No),Fo=Ki(Do);function jo(e){return null==e?[]:Wt(e,No(e))}var Vo=Ri((function(e,t,n){return t=t.toLowerCase(),e+(n?zo(t):t)}));function zo(e){return Qo(yo(e).toLowerCase())}function Bo(e){return(e=yo(e))&&e.replace(me,Jt).replace(Ge,"")}var $o=Ri((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qo=Ri((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ho=Di("toLowerCase"),Ko=Ri((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Wo=Ri((function(e,t,n){return e+(n?" ":"")+Qo(t)})),Go=Ri((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Qo=Di("toUpperCase");function Xo(t,n,r){return t=yo(t),(n=r?e:n)===e?function(e){return Ye.test(e)}(t)?function(e){return e.match(Xe)||[]}(t):function(e){return e.match(se)||[]}(t):t.match(n)||[]}var Jo=Kr((function(t,n){try{return _t(t,e,n)}catch(r){return Ga(r)?r:new we(r)}})),Yo=Yi((function(e,t){return kt(t,(function(t){t=Os(t),nr(e,t,Ca(e[t],e))})),e}));function Zo(e){return function(){return e}}var el=Oi(),tl=Oi(!0);function nl(e){return e}function rl(e){return Rr("function"==typeof e?e:sr(e,1))}var il=Kr((function(e,t){return function(n){return Cr(n,e,t)}})),sl=Kr((function(e,t){return function(n){return Cr(e,n,t)}}));function al(e,t,n){var r=No(t),i=br(t,r);null!=n||Ya(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=br(t,No(t)));var s=!(Ya(n)&&"chain"in n&&!n.chain),a=Qa(e);return kt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,At([this.value()],arguments))})})),e}function ol(){}var ll=ji(xt),ul=ji(Et),cl=ji(Rt);function hl(e){return gs(e)?Vt(Os(e)):function(e){return function(t){return _r(t,e)}}(e)}var dl=zi(),fl=zi(!0);function pl(){return[]}function ml(){return!1}var gl,yl=Fi((function(e,t){return e+t}),0),vl=qi("ceil"),bl=Fi((function(e,t){return e/t}),1),_l=qi("floor"),wl=Fi((function(e,t){return e*t}),1),kl=qi("round"),Sl=Fi((function(e,t){return e-t}),0);return Un.after=function(e,n){if("function"!=typeof n)throw new Ce(t);return e=fo(e),function(){if(--e<1)return n.apply(this,arguments)}},Un.ary=Ta,Un.assign=vo,Un.assignIn=bo,Un.assignInWith=_o,Un.assignWith=wo,Un.at=ko,Un.before=Ia,Un.bind=Ca,Un.bindAll=Yo,Un.bindKey=xa,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ba(e)?e:[e]},Un.chain=ca,Un.chunk=function(t,n,r){n=(r?ms(t,n,r):n===e)?1:mn(fo(n),0);var i=null==t?0:t.length;if(!i||n<1)return[];for(var s=0,a=0,o=be(ft(i/n));s<i;)o[a++]=Zr(t,s,s+=n);return o},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=be(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return At(Ba(n)?Ti(n):[n],pr(t,1))},Un.cond=function(e){var n=null==e?0:e.length,r=is();return e=n?xt(e,(function(e){if("function"!=typeof e[1])throw new Ce(t);return[r(e[0]),e[1]]})):[],Kr((function(t){for(var r=-1;++r<n;){var i=e[r];if(_t(i[0],this,t))return _t(i[1],this,t)}}))},Un.conforms=function(e){return function(e){var t=No(e);return function(n){return ar(n,e,t)}}(sr(e,1))},Un.constant=Zo,Un.countBy=fa,Un.create=function(e,t){var n=Fn(e);return null==t?n:tr(n,t)},Un.curry=function t(n,r,i){var s=Wi(n,8,e,e,e,e,e,r=i?e:r);return s.placeholder=t.placeholder,s},Un.curryRight=function t(n,r,i){var s=Wi(n,16,e,e,e,e,e,r=i?e:r);return s.placeholder=t.placeholder,s},Un.debounce=Aa,Un.defaults=So,Un.defaultsDeep=Eo,Un.defer=Na,Un.delay=Da,Un.difference=Fs,Un.differenceBy=js,Un.differenceWith=Vs,Un.drop=function(t,n,r){var i=null==t?0:t.length;return i?Zr(t,(n=r||n===e?1:fo(n))<0?0:n,i):[]},Un.dropRight=function(t,n,r){var i=null==t?0:t.length;return i?Zr(t,0,(n=i-(n=r||n===e?1:fo(n)))<0?0:n):[]},Un.dropRightWhile=function(e,t){return e&&e.length?ui(e,is(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?ui(e,is(t,3),!0):[]},Un.fill=function(t,n,r,i){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&ms(t,n,r)&&(r=0,i=s),function(t,n,r,i){var s=t.length;for((r=fo(r))<0&&(r=-r>s?0:s+r),(i=i===e||i>s?s:fo(i))<0&&(i+=s),i=r>i?0:po(i);r<i;)t[r++]=n;return t}(t,n,r,i)):[]},Un.filter=function(e,t){return(Ba(e)?Tt:fr)(e,is(t,3))},Un.flatMap=function(e,t){return pr(wa(e,t),1)},Un.flatMapDeep=function(e,t){return pr(wa(e,t),o)},Un.flatMapDepth=function(t,n,r){return r=r===e?1:fo(r),pr(wa(t,n),r)},Un.flatten=$s,Un.flattenDeep=function(e){return null!=e&&e.length?pr(e,o):[]},Un.flattenDepth=function(t,n){return null!=t&&t.length?pr(t,n=n===e?1:fo(n)):[]},Un.flip=function(e){return Wi(e,512)},Un.flow=el,Un.flowRight=tl,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:br(e,No(e))},Un.functionsIn=function(e){return null==e?[]:br(e,Do(e))},Un.groupBy=va,Un.initial=function(e){return null!=e&&e.length?Zr(e,0,-1):[]},Un.intersection=Hs,Un.intersectionBy=Ks,Un.intersectionWith=Ws,Un.invert=Co,Un.invertBy=xo,Un.invokeMap=ba,Un.iteratee=rl,Un.keyBy=_a,Un.keys=No,Un.keysIn=Do,Un.map=wa,Un.mapKeys=function(e,t){var n={};return t=is(t,3),yr(e,(function(e,r,i){nr(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=is(t,3),yr(e,(function(e,r,i){nr(n,r,t(e,r,i))})),n},Un.matches=function(e){return Mr(sr(e,1))},Un.matchesProperty=function(e,t){return Ur(e,sr(t,1))},Un.memoize=Ra,Un.merge=Ro,Un.mergeWith=Lo,Un.method=il,Un.methodOf=sl,Un.mixin=al,Un.negate=La,Un.nthArg=function(e){return e=fo(e),Kr((function(t){return jr(t,e)}))},Un.omit=Po,Un.omitBy=function(e,t){return Mo(e,La(is(t)))},Un.once=function(e){return Ia(2,e)},Un.orderBy=function(t,n,r,i){return null==t?[]:(Ba(n)||(n=null==n?[]:[n]),Ba(r=i?e:r)||(r=null==r?[]:[r]),Vr(t,n,r))},Un.over=ll,Un.overArgs=Pa,Un.overEvery=ul,Un.overSome=cl,Un.partial=Oa,Un.partialRight=Ma,Un.partition=ka,Un.pick=Oo,Un.pickBy=Mo,Un.property=hl,Un.propertyOf=function(t){return function(n){return null==t?e:_r(t,n)}},Un.pull=Qs,Un.pullAll=Xs,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Br(e,t,is(n,2)):e},Un.pullAllWith=function(t,n,r){return t&&t.length&&n&&n.length?Br(t,n,e,r):t},Un.pullAt=Js,Un.range=dl,Un.rangeRight=fl,Un.rearg=Ua,Un.reject=function(e,t){return(Ba(e)?Tt:fr)(e,La(is(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=is(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return $r(e,i),n},Un.rest=function(n,r){if("function"!=typeof n)throw new Ce(t);return Kr(n,r=r===e?r:fo(r))},Un.reverse=Ys,Un.sampleSize=function(t,n,r){return n=(r?ms(t,n,r):n===e)?1:fo(n),(Ba(t)?Qn:Gr)(t,n)},Un.set=function(e,t,n){return null==e?e:Qr(e,t,n)},Un.setWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:Qr(t,n,r,i)},Un.shuffle=function(e){return(Ba(e)?Xn:Yr)(e)},Un.slice=function(t,n,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&ms(t,n,r)?(n=0,r=i):(n=null==n?0:fo(n),r=r===e?i:fo(r)),Zr(t,n,r)):[]},Un.sortBy=Sa,Un.sortedUniq=function(e){return e&&e.length?ri(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ri(e,is(t,2)):[]},Un.split=function(t,n,r){return r&&"number"!=typeof r&&ms(t,n,r)&&(n=r=e),(r=r===e?c:r>>>0)?(t=yo(t))&&("string"==typeof n||null!=n&&!ro(n))&&!(n=si(n))&&en(t)?yi(on(t),0,r):t.split(n,r):[]},Un.spread=function(e,n){if("function"!=typeof e)throw new Ce(t);return n=null==n?0:mn(fo(n),0),Kr((function(t){var r=t[n],i=yi(t,0,n);return r&&At(i,r),_t(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?Zr(e,1,t):[]},Un.take=function(t,n,r){return t&&t.length?Zr(t,0,(n=r||n===e?1:fo(n))<0?0:n):[]},Un.takeRight=function(t,n,r){var i=null==t?0:t.length;return i?Zr(t,(n=i-(n=r||n===e?1:fo(n)))<0?0:n,i):[]},Un.takeRightWhile=function(e,t){return e&&e.length?ui(e,is(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?ui(e,is(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,n,r){var i=!0,s=!0;if("function"!=typeof e)throw new Ce(t);return Ya(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),Aa(e,n,{leading:i,maxWait:n,trailing:s})},Un.thru=ha,Un.toArray=co,Un.toPairs=Uo,Un.toPairsIn=Fo,Un.toPath=function(e){return Ba(e)?xt(e,Os):ao(e)?[e]:Ti(Ps(yo(e)))},Un.toPlainObject=go,Un.transform=function(e,t,n){var r=Ba(e),i=r||Ka(e)||oo(e);if(t=is(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:Ya(e)&&Qa(s)?Fn(qe(e)):{}}return(i?kt:yr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Ta(e,1)},Un.union=Zs,Un.unionBy=ea,Un.unionWith=ta,Un.uniq=function(e){return e&&e.length?ai(e):[]},Un.uniqBy=function(e,t){return e&&e.length?ai(e,is(t,2)):[]},Un.uniqWith=function(t,n){return n="function"==typeof n?n:e,t&&t.length?ai(t,e,n):[]},Un.unset=function(e,t){return null==e||oi(e,t)},Un.unzip=na,Un.unzipWith=ra,Un.update=function(e,t,n){return null==e?e:li(e,t,pi(n))},Un.updateWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:li(t,n,pi(r),i)},Un.values=jo,Un.valuesIn=function(e){return null==e?[]:Wt(e,Do(e))},Un.without=ia,Un.words=Xo,Un.wrap=function(e,t){return Oa(pi(t),e)},Un.xor=sa,Un.xorBy=aa,Un.xorWith=oa,Un.zip=la,Un.zipObject=function(e,t){return di(e||[],t||[],Yn)},Un.zipObjectDeep=function(e,t){return di(e||[],t||[],Qr)},Un.zipWith=ua,Un.entries=Uo,Un.entriesIn=Fo,Un.extend=bo,Un.extendWith=_o,al(Un,Un),Un.add=yl,Un.attempt=Jo,Un.camelCase=Vo,Un.capitalize=zo,Un.ceil=vl,Un.clamp=function(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=(r=mo(r))==r?r:0),n!==e&&(n=(n=mo(n))==n?n:0),ir(mo(t),n,r)},Un.clone=function(e){return sr(e,4)},Un.cloneDeep=function(e){return sr(e,5)},Un.cloneDeepWith=function(t,n){return sr(t,5,n="function"==typeof n?n:e)},Un.cloneWith=function(t,n){return sr(t,4,n="function"==typeof n?n:e)},Un.conformsTo=function(e,t){return null==t||ar(e,t,No(t))},Un.deburr=Bo,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=bl,Un.endsWith=function(t,n,r){t=yo(t),n=si(n);var i=t.length,s=r=r===e?i:ir(fo(r),0,i);return(r-=n.length)>=0&&t.slice(r,s)==n},Un.eq=Fa,Un.escape=function(e){return(e=yo(e))&&H.test(e)?e.replace($,Yt):e},Un.escapeRegExp=function(e){return(e=yo(e))&&Z.test(e)?e.replace(Y,"\\$&"):e},Un.every=function(t,n,r){var i=Ba(t)?Et:hr;return r&&ms(t,n,r)&&(n=e),i(t,is(n,3))},Un.find=pa,Un.findIndex=zs,Un.findKey=function(e,t){return Pt(e,is(t,3),yr)},Un.findLast=ma,Un.findLastIndex=Bs,Un.findLastKey=function(e,t){return Pt(e,is(t,3),vr)},Un.floor=_l,Un.forEach=ga,Un.forEachRight=ya,Un.forIn=function(e,t){return null==e?e:mr(e,is(t,3),Do)},Un.forInRight=function(e,t){return null==e?e:gr(e,is(t,3),Do)},Un.forOwn=function(e,t){return e&&yr(e,is(t,3))},Un.forOwnRight=function(e,t){return e&&vr(e,is(t,3))},Un.get=To,Un.gt=ja,Un.gte=Va,Un.has=function(e,t){return null!=e&&hs(e,t,Er)},Un.hasIn=Io,Un.head=qs,Un.identity=nl,Un.includes=function(e,t,n,r){e=qa(e)?e:jo(e),n=n&&!r?fo(n):0;var i=e.length;return n<0&&(n=mn(i+n,0)),so(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Mt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fo(n);return i<0&&(i=mn(r+i,0)),Mt(e,t,i)},Un.inRange=function(t,n,r){return n=ho(n),r===e?(r=n,n=0):r=ho(r),function(e,t,n){return e>=gn(t,n)&&e<mn(t,n)}(t=mo(t),n,r)},Un.invoke=Ao,Un.isArguments=za,Un.isArray=Ba,Un.isArrayBuffer=$a,Un.isArrayLike=qa,Un.isArrayLikeObject=Ha,Un.isBoolean=function(e){return!0===e||!1===e||Za(e)&&kr(e)==p},Un.isBuffer=Ka,Un.isDate=Wa,Un.isElement=function(e){return Za(e)&&1===e.nodeType&&!no(e)},Un.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&(Ba(e)||"string"==typeof e||"function"==typeof e.splice||Ka(e)||oo(e)||za(e)))return!e.length;var t=cs(e);if(t==b||t==E)return!e.size;if(bs(e))return!Lr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Ar(e,t)},Un.isEqualWith=function(t,n,r){var i=(r="function"==typeof r?r:e)?r(t,n):e;return i===e?Ar(t,n,e,r):!!i},Un.isError=Ga,Un.isFinite=function(e){return"number"==typeof e&&dn(e)},Un.isFunction=Qa,Un.isInteger=Xa,Un.isLength=Ja,Un.isMap=eo,Un.isMatch=function(e,t){return e===t||Nr(e,t,as(t))},Un.isMatchWith=function(t,n,r){return r="function"==typeof r?r:e,Nr(t,n,as(n),r)},Un.isNaN=function(e){return to(e)&&e!=+e},Un.isNative=function(e){if(vs(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=to,Un.isObject=Ya,Un.isObjectLike=Za,Un.isPlainObject=no,Un.isRegExp=ro,Un.isSafeInteger=function(e){return Xa(e)&&e>=-9007199254740991&&e<=l},Un.isSet=io,Un.isString=so,Un.isSymbol=ao,Un.isTypedArray=oo,Un.isUndefined=function(t){return t===e},Un.isWeakMap=function(e){return Za(e)&&cs(e)==C},Un.isWeakSet=function(e){return Za(e)&&"[object WeakSet]"==kr(e)},Un.join=function(e,t){return null==e?"":fn.call(e,t)},Un.kebabCase=$o,Un.last=Gs,Un.lastIndexOf=function(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var s=i;return r!==e&&(s=(s=fo(r))<0?mn(i+s,0):gn(s,i-1)),n==n?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(t,n,s):Ot(t,Ft,s,!0)},Un.lowerCase=qo,Un.lowerFirst=Ho,Un.lt=lo,Un.lte=uo,Un.max=function(t){return t&&t.length?dr(t,nl,Sr):e},Un.maxBy=function(t,n){return t&&t.length?dr(t,is(n,2),Sr):e},Un.mean=function(e){return jt(e,nl)},Un.meanBy=function(e,t){return jt(e,is(t,2))},Un.min=function(t){return t&&t.length?dr(t,nl,Pr):e},Un.minBy=function(t,n){return t&&t.length?dr(t,is(n,2),Pr):e},Un.stubArray=pl,Un.stubFalse=ml,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=wl,Un.nth=function(t,n){return t&&t.length?jr(t,fo(n)):e},Un.noConflict=function(){return lt._===this&&(lt._=Fe),this},Un.noop=ol,Un.now=Ea,Un.pad=function(e,t,n){e=yo(e);var r=(t=fo(t))?an(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Vi(Lt(i),n)+e+Vi(ft(i),n)},Un.padEnd=function(e,t,n){e=yo(e);var r=(t=fo(t))?an(e):0;return t&&r<t?e+Vi(t-r,n):e},Un.padStart=function(e,t,n){e=yo(e);var r=(t=fo(t))?an(e):0;return t&&r<t?Vi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),vn(yo(e).replace(ee,""),t||0)},Un.random=function(t,n,r){if(r&&"boolean"!=typeof r&&ms(t,n,r)&&(n=r=e),r===e&&("boolean"==typeof n?(r=n,n=e):"boolean"==typeof t&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=ho(t),n===e?(n=t,t=0):n=ho(n)),t>n){var i=t;t=n,n=i}if(r||t%1||n%1){var s=bn();return gn(t+s*(n-t+it("1e-"+((s+"").length-1))),n)}return qr(t,n)},Un.reduce=function(e,t,n){var r=Ba(e)?Nt:Bt,i=arguments.length<3;return r(e,is(t,4),n,i,ur)},Un.reduceRight=function(e,t,n){var r=Ba(e)?Dt:Bt,i=arguments.length<3;return r(e,is(t,4),n,i,cr)},Un.repeat=function(t,n,r){return n=(r?ms(t,n,r):n===e)?1:fo(n),Hr(yo(t),n)},Un.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(t,n,r){var i=-1,s=(n=mi(n,t)).length;for(s||(s=1,t=e);++i<s;){var a=null==t?e:t[Os(n[i])];a===e&&(i=s,a=r),t=Qa(a)?a.call(t):a}return t},Un.round=kl,Un.runInContext=r,Un.sample=function(e){return(Ba(e)?Gn:Wr)(e)},Un.size=function(e){if(null==e)return 0;if(qa(e))return so(e)?an(e):e.length;var t=cs(e);return t==b||t==E?e.size:Lr(e).length},Un.snakeCase=Ko,Un.some=function(t,n,r){var i=Ba(t)?Rt:ei;return r&&ms(t,n,r)&&(n=e),i(t,is(n,3))},Un.sortedIndex=function(e,t){return ti(e,t)},Un.sortedIndexBy=function(e,t,n){return ni(e,t,is(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ti(e,t);if(r<n&&Fa(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ti(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ni(e,t,is(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ti(e,t,!0)-1;if(Fa(e[n],t))return n}return-1},Un.startCase=Wo,Un.startsWith=function(e,t,n){return e=yo(e),n=null==n?0:ir(fo(n),0,e.length),t=si(t),e.slice(n,n+t.length)==t},Un.subtract=Sl,Un.sum=function(e){return e&&e.length?$t(e,nl):0},Un.sumBy=function(e,t){return e&&e.length?$t(e,is(t,2)):0},Un.template=function(t,n,r){var i=Un.templateSettings;r&&ms(t,n,r)&&(n=e),t=yo(t),n=_o({},n,i,Gi);var s,a,o=_o({},n.imports,i.imports,Gi),l=No(o),u=Wt(o,l),c=0,h=n.interpolate||ge,d="__p += '",f=Te((n.escape||ge).source+"|"+h.source+"|"+(h===G?le:ge).source+"|"+(n.evaluate||ge).source+"|$","g"),p="//# sourceURL="+(Le.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++et+"]")+"\n";t.replace(f,(function(e,n,r,i,o,l){return r||(r=i),d+=t.slice(c,l).replace(ye,Zt),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var m=Le.call(n,"variable")&&n.variable;if(m){if(ae.test(m))throw new we("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(j,""):d).replace(V,"$1").replace(z,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Jo((function(){return ke(l,p+"return "+d).apply(e,u)}));if(g.source=d,Ga(g))throw g;return g},Un.times=function(e,t){if((e=fo(e))<1||e>l)return[];var n=c,r=gn(e,c);t=is(t),e-=c;for(var i=qt(r,t);++n<e;)t(n);return i},Un.toFinite=ho,Un.toInteger=fo,Un.toLength=po,Un.toLower=function(e){return yo(e).toLowerCase()},Un.toNumber=mo,Un.toSafeInteger=function(e){return e?ir(fo(e),-9007199254740991,l):0===e?e:0},Un.toString=yo,Un.toUpper=function(e){return yo(e).toUpperCase()},Un.trim=function(t,n,r){if((t=yo(t))&&(r||n===e))return Ht(t);if(!t||!(n=si(n)))return t;var i=on(t),s=on(n);return yi(i,Qt(i,s),Xt(i,s)+1).join("")},Un.trimEnd=function(t,n,r){if((t=yo(t))&&(r||n===e))return t.slice(0,ln(t)+1);if(!t||!(n=si(n)))return t;var i=on(t);return yi(i,0,Xt(i,on(n))+1).join("")},Un.trimStart=function(t,n,r){if((t=yo(t))&&(r||n===e))return t.replace(ee,"");if(!t||!(n=si(n)))return t;var i=on(t);return yi(i,Qt(i,on(n))).join("")},Un.truncate=function(t,n){var r=30,i="...";if(Ya(n)){var s="separator"in n?n.separator:s;r="length"in n?fo(n.length):r,i="omission"in n?si(n.omission):i}var a=(t=yo(t)).length;if(en(t)){var o=on(t);a=o.length}if(r>=a)return t;var l=r-an(i);if(l<1)return i;var u=o?yi(o,0,l).join(""):t.slice(0,l);if(s===e)return u+i;if(o&&(l+=u.length-l),ro(s)){if(t.slice(l).search(s)){var c,h=u;for(s.global||(s=Te(s.source,yo(ue.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===e?l:d)}}else if(t.indexOf(si(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+i},Un.unescape=function(e){return(e=yo(e))&&q.test(e)?e.replace(B,un):e},Un.uniqueId=function(e){var t=++Pe;return yo(e)+t},Un.upperCase=Go,Un.upperFirst=Qo,Un.each=ga,Un.eachRight=ya,Un.first=qs,al(Un,(gl={},yr(Un,(function(e,t){Le.call(Un.prototype,t)||(gl[t]=e)})),gl),{chain:!1}),Un.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),kt(["drop","take"],(function(t,n){zn.prototype[t]=function(r){r=r===e?1:mn(fo(r),0);var i=this.__filtered__&&!n?new zn(this):this.clone();return i.__filtered__?i.__takeCount__=gn(r,i.__takeCount__):i.__views__.push({size:gn(r,c),type:t+(i.__dir__<0?"Right":"")}),i},zn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),kt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:is(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),kt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),kt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(nl)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Kr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Cr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(La(is(e)))},zn.prototype.slice=function(t,n){t=fo(t);var r=this;return r.__filtered__&&(t>0||n<0)?new zn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(r=(n=fo(n))<0?r.dropRight(-n):r.take(n-t)),r)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(c)},yr(zn.prototype,(function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=Un[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);s&&(Un.prototype[n]=function(){var n=this.__wrapped__,o=i?[1]:arguments,l=n instanceof zn,u=o[0],c=l||Ba(n),h=function(e){var t=s.apply(Un,At([e],o));return i&&d?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=l&&!f;if(!a&&c){n=m?n:new zn(this);var g=t.apply(n,o);return g.__actions__.push({func:ha,args:[h],thisArg:e}),new Vn(g,d)}return p&&m?t.apply(this,o):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),kt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=xe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ba(i)?i:[],e)}return this[n]((function(n){return t.apply(Ba(n)?n:[],e)}))}})),yr(zn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Le.call(xn,r)||(xn[r]=[]),xn[r].push({name:t,func:n})}})),xn[Mi(e,2).name]=[{name:"wrapper",func:e}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ba(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gn(t,e+a);break;case"takeRight":e=mn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,u=r?o:a-1,c=this.__iteratees__,h=c.length,d=0,f=gn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return ci(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var m=-1,g=e[u+=t];++m<h;){var y=c[m],v=y.iteratee,b=y.type,_=v(g);if(2==b)g=_;else if(!_){if(1==b)continue e;break e}}p[d++]=g}return p},Un.prototype.at=da,Un.prototype.chain=function(){return ca(this)},Un.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===e&&(this.__values__=co(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},Un.prototype.plant=function(t){for(var n,r=this;r instanceof jn;){var i=Us(r);i.__index__=0,i.__values__=e,n?s.__wrapped__=i:n=i;var s=i;r=r.__wrapped__}return s.__wrapped__=t,n},Un.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof zn){var n=t;return this.__actions__.length&&(n=new zn(this)),(n=n.reverse()).__actions__.push({func:ha,args:[Ys],thisArg:e}),new Vn(n,this.__chain__)}return this.thru(Ys)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return ci(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,rt&&(Un.prototype[rt]=function(){return this}),Un}();ct?((ct.exports=cn)._=cn,ut._=cn):lt._=cn}.call(r);var _h=bh.exports;class wh extends t.Scene{constructor(){super("MainMenu"),this.handleLeaderboardClick=_h.debounce(this.showLeaderboard.bind(this),300,{leading:!0,trailing:!1}),this.parallaxLayers=[]}preload(){this.load.setPath("assets"),this.load.image("bg_mm_1","backgrounds/main_menu/sky.png"),this.load.image("bg_mm_2","backgrounds/main_menu/far-mountains.png"),this.load.image("bg_mm_3","backgrounds/main_menu/middle-mountains.png"),this.load.image("bg_mm_4","backgrounds/main_menu/far-trees.png"),this.load.image("bg_mm_5","backgrounds/main_menu/myst.png"),this.load.image("bg_mm_6","backgrounds/main_menu/near-trees.png"),this.load.image("logo","logos/logo.png"),this.load.spritesheet("playButton","buttons/playButton.png",{frameWidth:144,frameHeight:72}),this.load.spritesheet("leaderboardButton","buttons/leaderboardButton.png",{frameWidth:144,frameHeight:72}),this.load.image("test_tiles","test_assets/test_tiles.png"),this.load.tilemapTiledJSON("test_map","levels/test_map.json")}calculateScale(e,t,n,r){const i=n/e,s=r/t;return Math.max(i,s)}create(){this.cameras.main.fadeIn(2e3,0,0,0),this.sound.play("main_menu",{volume:.1}),this.clearParallaxLayers();const e=this.scale.width,t=this.scale.height;[{key:"bg_mm_1",scale:6,speed:0},{key:"bg_mm_2",scale:5,speed:.025},{key:"bg_mm_3",scale:5,speed:.05},{key:"bg_mm_4",scale:5,speed:.1},{key:"bg_mm_5",scale:5,speed:.2},{key:"bg_mm_6",scale:5,speed:.3}].forEach(((n,r)=>{if(0===n.speed)this.add.image(e/2,t/2,n.key).setOrigin(.5,.5).setDepth(r).setScale(n.scale);else{const i=this.textures.get(n.key).getSourceImage().width,s=this.textures.get(n.key).getSourceImage().height;n.scale=this.calculateScale(i,s,e,t);const a=this.add.image(0,t/2,n.key).setOrigin(0,.5).setDepth(r).setScale(n.scale),o=this.add.image(a.displayWidth-2,t/2,n.key).setOrigin(0,.5).setDepth(r).setScale(n.scale);this.parallaxLayers.push({images:[a,o],speed:n.speed})}})),this.setupLogo(),this.setupButtons(),hh.emit("current-scene-ready",this)}setupLogo(){this.logo=this.add.image(this.scale.width/2,.3*this.scale.height,"logo").setOrigin(.5,.5).setScale(1).setDepth(1e3)}setupButtons(){this.playButton=this.add.sprite(this.scale.width/2,this.scale.height/2+100,"playButton",0).setInteractive().setScale(2).setDepth(1e3).on("pointerdown",(()=>{this.startGame()})),this.leaderboardButton=this.add.sprite(this.scale.width/2,this.scale.height/2+225,"leaderboardButton",0).setInteractive().setScale(2).setDepth(1e3).on("pointerdown",(()=>{this.handleLeaderboardClick()}))}startGame(){this.sound.stopAll(),this.scene.start("Game")}showLeaderboard(){hh.emit("showLeaderboard")}update(){this.parallaxLayers.forEach((e=>{e.images.forEach(((t,n)=>{if(t.x-=e.speed,t.x<=-t.displayWidth){const r=e.images[1-n];t.x=r.x+r.displayWidth-2}}))}))}clearParallaxLayers(){this.parallaxLayers.forEach((e=>{e.images.forEach((e=>{e.destroy()}))})),this.parallaxLayers=[]}}class kh extends t.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.audio("main_menu","audio/main_menu.ogg"),this.load.audio("enemy_death","audio/enemy_death.mp3"),this.load.audio("jump_on_enemy","audio/jump_on_enemy.mp3"),this.load.audio("enemy_laser","audio/enemy_laser.mp3"),this.load.audio("player_damage","audio/player_damage.mp3"),this.load.audio("jump","audio/jump.mp3"),this.load.audio("double_jump","audio/double_jump.mp3"),this.load.audio("collectable","audio/collectable.mp3"),this.load.audio("interactable","audio/interactable.ogg"),this.load.audio("level1","audio/level1.ogg"),this.load.audio("level2","audio/level2.ogg"),this.load.audio("menus","audio/menus.ogg")}create(){this.scene.start("MainMenu")}}class Sh extends t.Scene{constructor(){super("ScoreScene"),this.parallaxLayers=[]}init(e){this.level=e.level,this.timeTaken=e.timeTaken,this.collectables=e.collectables,this.enemiesKilled=e.enemiesKilled,this.totalScore=e.totalScore,this.cursors=e.cursors,this.keys=e.keys,dh.totalScore+=this.totalScore,dh.totalTimeTaken+=this.timeTaken,dh.currentLevel++}preload(){this.load.setPath("assets"),this.load.image("bg_score_1","backgrounds/level1_score_scene/parallax-mountain-bg.png"),this.load.image("bg_score_2","backgrounds/level1_score_scene/parallax-mountain-mountains.png"),this.load.image("bg_score_3","backgrounds/level1_score_scene/parallax-mountain-montain-far.png"),this.load.image("bg_score_4","backgrounds/level1_score_scene/parallax-mountain-trees.png"),this.load.image("bg_score_5","backgrounds/level1_score_scene/parallax-mountain-foreground-trees.png")}calculateScale(e,t,n,r){const i=Math.floor(n/e),s=Math.floor(r/t);return Math.min(i,s)}create(){this.cameras.main.fadeIn(2e3,0,0,0),this.sound.play("menus",{volume:.1,loop:!0});const e=this.scale.width,t=this.scale.height;[{key:"bg_score_1",scale:6.5,speed:0},{key:"bg_score_2",scale:7,speed:.05},{key:"bg_score_3",scale:7,speed:.15},{key:"bg_score_4",scale:7,speed:.3},{key:"bg_score_5",scale:7,speed:.5}].forEach(((n,r)=>{const i=this.add.image(e/2,t/2,n.key).setOrigin(.5,.5).setDepth(r).setScale(n.scale);n.speed>0&&this.parallaxLayers.push({image:i,speed:n.speed})})),this.add.text(e/2,200,"Level Complete!",{fontSize:"64px",fontFamily:'"monogram", sans-serif',fill:"#ffffff",fontStyle:"bold",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setDepth(1e3),this.add.text(e/2,350,`Time Taken: ${this.timeTaken}s`,{fontSize:"48px",fontFamily:'"monogram", sans-serif',fill:"#ffffff",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setDepth(1e3),this.add.text(e/2,420,`Collectables: ${this.collectables}`,{fontSize:"48px",fontFamily:'"monogram", sans-serif',fill:"#ffffff",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setDepth(1e3),this.add.text(e/2,490,`Enemies Killed: ${this.enemiesKilled}`,{fontSize:"48px",fontFamily:'"monogram", sans-serif',fill:"#ffffff",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setDepth(1e3),this.add.text(e/2,560,`Total Score: ${this.totalScore}`,{fontSize:"48px",fontFamily:'"monogram", sans-serif',fill:"#ffff00",fontStyle:"bold",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setDepth(1e3);var n=dh.currentLevel<=dh.totalLevels?"Next Level":"End Game";this.add.text(e/2,630,n,{fontSize:"48px",fontFamily:'"monogram", sans-serif',fill:"#0f0",fontStyle:"bold",backgroundColor:"#000000a0",padding:{x:20,y:10}}).setOrigin(.5).setInteractive().setDepth(1e3).on("pointerdown",(()=>{this.sound.stopAll(),dh.currentLevel<=dh.totalLevels?this.scene.start("Game"):(hh.emit("scene-change","EndGame"),this.cameras.main.fadeOut(1500,0,0,0),this.scene.start("EndGame",{keys:this.keys,cursors:this.cursors}))}))}update(){this.parallaxLayers.forEach((e=>{e.image.x-=e.speed,e.image.x<-e.image.width/2&&(e.image.x=this.scale.width+e.image.width/2)}))}}const Eh={type:n.AUTO,scale:{mode:n.Scale.FIT,autoCenter:n.Scale.CENTER_BOTH,width:window.innerWidth,height:window.innerHeight},scene:[ch,kh,wh,mh,ph,Sh,gh],physics:{default:"arcade",arcade:{debug:!0,fps:120}},pixelArt:!0,render:{pixelArt:!0,antialias:!1,roundPixels:!0}},Th=B.forwardRef((function({currentActiveScene:e},t){const r=B.useRef();return B.useLayoutEffect((()=>(void 0===r.current&&(r.current=("game-container",new n.Game({...Eh,parent:"game-container"})),null!==t&&(t.current={game:r.current,scene:null})),()=>{r.current&&(r.current.destroy(!0),r.current=void 0)})),[t]),B.useEffect((()=>(hh.on("current-scene-ready",(n=>{e instanceof Function&&e(n),t.current.scene=n})),()=>{hh.removeListener("current-scene-ready")})),[e,t]),J.jsx("div",{id:"game-container"})}));Th.propTypes={currentActiveScene:uh.func};const Ih=()=>{const[e,t]=B.useState(3);return B.useEffect((()=>{const e=e=>{t(e)};return hh.on("health-update",e),()=>{hh.off("health-update",e)}}),[]),J.jsx("div",{className:"health-bar",children:[...Array(3)].map(((t,n)=>J.jsx("img",{src:n<e?"/EcoFox-Adventures/assets/ui/heart_full.png":"/EcoFox-Adventures/assets/ui/heart_empty.png",alt:"heart",className:"health-heart"},n)))})},Ch=({collectableAsset:e,collectedAsset:t})=>{const[n,r]=B.useState([!1,!1,!1]);return B.useEffect((()=>{const e=e=>{const t=[!1,!1,!1];e.forEach((e=>{const n=parseInt(e.split("_")[1],10)-1;n>=0&&n<3&&(t[n]=!0)})),r(t)};return hh.on("collectable-update",e),()=>{hh.off("collectable-update",e)}}),[]),J.jsx("div",{className:"collectable-bar",children:[...Array(3)].map(((r,i)=>J.jsx("img",{src:n[i]?t:e,alt:"collectable",className:"collectable-icon",style:{opacity:n[i]?1:.5}},i)))})},xh=()=>{const[e,t]=B.useState(null);return B.useEffect((()=>{const e=({x:e,y:n})=>{t({x:e,y:n})},n=()=>{t(null)};return hh.on("show-interaction",e),hh.on("hide-interaction",n),()=>{hh.off("show-interaction",e),hh.off("hide-interaction",n)}}),[]),e?J.jsx("div",{className:"interaction-overlay",style:{left:e.x,top:e.y},children:J.jsx("img",{src:"/EcoFox-Adventures/assets/buttons/e_button.png",alt:"Interact E"})}):null},Ah=()=>{const[e,t]=B.useState(0);return B.useEffect((()=>{const e=e=>{t(e)};return hh.on("time-update",e),()=>{hh.off("time-update",e)}}),[]),J.jsx("div",{className:"timer-display",children:(n=e,`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`)});var n},Nh=()=>{const[e,t]=B.useState(""),n=B.useRef(null);return B.useEffect((()=>{n.current&&n.current.focus()}),[]),J.jsx("div",{className:"name-input-overlay",children:J.jsxs("form",{className:"name-input-form",onSubmit:n=>{n.preventDefault();const r=e.trim();""!==r?(hh.emit("nameSubmitted",r),t("")):alert("Please enter your name.")},children:[J.jsx("label",{htmlFor:"playerName",className:"monogram-font-xx-large",children:"Enter Your Name:"}),J.jsx("input",{ref:n,type:"text",id:"playerName",value:e,onChange:e=>t(e.target.value),required:!0,maxLength:20,placeholder:"Your Name",autoFocus:!0,onKeyDown:e=>{e.stopPropagation()},className:"monogram-font-xx-large"}),J.jsx("button",{type:"submit",className:"monogram-font-xx-large",children:"Submit"})]})})};var Dh={};const Rh=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Rh(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ph;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ph extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oh=function(e){return function(e){const t=Rh(e);return Lh.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Mh=function(e){try{return Lh.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},Uh=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===Dh)return;const e=Dh.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Mh(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Fh=e=>{var t,n;return null===(n=null===(t=Uh())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},jh=()=>{var e;return null===(e=Uh())||void 0===e?void 0:e.config},Vh=e=>{var t;return null===(t=Uh())||void 0===t?void 0:t[`_${e}`]};class zh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Bh(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class $h extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qh.prototype.create)}}class qh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Hh,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new $h(r,a,n)}}const Hh=/\{\$([^}]+)}/g;function Kh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Wh(n)&&Wh(s)){if(!Kh(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Wh(e){return null!==e&&"object"==typeof e}function Gh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class Qh{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xh),void 0===r.error&&(r.error=Xh),void 0===r.complete&&(r.complete=Xh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xh(){}function Jh(e){return e&&e._delegate?e._delegate:e}class Yh{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zh="[DEFAULT]";class ed{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new zh;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zh})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Zh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Zh){return this.instances.has(e)}getOptions(e=Zh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Zh?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=Zh){return this.component?this.component.multipleInstances?e:Zh:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class td{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ed(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var nd,rd;(rd=nd||(nd={}))[rd.DEBUG=0]="DEBUG",rd[rd.VERBOSE=1]="VERBOSE",rd[rd.INFO=2]="INFO",rd[rd.WARN=3]="WARN",rd[rd.ERROR=4]="ERROR",rd[rd.SILENT=5]="SILENT";const id={debug:nd.DEBUG,verbose:nd.VERBOSE,info:nd.INFO,warn:nd.WARN,error:nd.ERROR,silent:nd.SILENT},sd=nd.INFO,ad={[nd.DEBUG]:"log",[nd.VERBOSE]:"log",[nd.INFO]:"info",[nd.WARN]:"warn",[nd.ERROR]:"error"},od=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=ad[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class ld{constructor(e){this.name=e,this._logLevel=sd,this._logHandler=od,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nd))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?id[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nd.DEBUG,...e),this._logHandler(this,nd.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nd.VERBOSE,...e),this._logHandler(this,nd.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nd.INFO,...e),this._logHandler(this,nd.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nd.WARN,...e),this._logHandler(this,nd.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nd.ERROR,...e),this._logHandler(this,nd.ERROR,...e)}}const ud=(e,t)=>t.some((t=>e instanceof t));let cd,hd;const dd=new WeakMap,fd=new WeakMap,pd=new WeakMap,md=new WeakMap,gd=new WeakMap;let yd={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function vd(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(hd||(hd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(_d(this),e),bd(dd.get(this))}:function(...e){return bd(t.apply(_d(this),e))}:function(e,...n){const r=t.call(_d(this),e,...n);return pd.set(r,e.sort?e.sort():[e]),bd(r)}:(e instanceof IDBTransaction&&function(e){if(fd.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));fd.set(e,t)}(e),ud(e,cd||(cd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,yd):e);var t}function bd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(bd(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&dd.set(t,e)})).catch((()=>{})),gd.set(t,e),t}(e);if(md.has(e))return md.get(e);const t=vd(e);return t!==e&&(md.set(e,t),gd.set(t,e)),t}const _d=e=>gd.get(e),wd=["get","getKey","getAll","getAllKeys","count"],kd=["put","add","delete","clear"],Sd=new Map;function Ed(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Sd.get(t))return Sd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=kd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!wd.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return Sd.set(t,s),s}var Td;Td=yd,yd={...Td,get:(e,t,n)=>Ed(e,t)||Td.get(e,t,n),has:(e,t)=>!!Ed(e,t)||Td.has(e,t)};class Id{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Cd="@firebase/app",xd="0.10.17",Ad=new ld("@firebase/app"),Nd="[DEFAULT]",Dd={[Cd]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Rd=new Map,Ld=new Map,Pd=new Map;function Od(e,t){try{e.container.addComponent(t)}catch(n){Ad.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Md(e){const t=e.name;if(Pd.has(t))return Ad.debug(`There were multiple attempts to register component ${t}.`),!1;Pd.set(t,e);for(const n of Rd.values())Od(n,e);for(const n of Ld.values())Od(n,e);return!0}function Ud(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fd(e){return void 0!==e.settings}const jd=new qh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Vd{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yh("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jd.create("app-deleted",{appName:this._name})}}const zd="11.1.0";function Bd(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Nd,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw jd.create("bad-app-name",{appName:String(i)});if(n||(n=jh()),!n)throw jd.create("no-options");const s=Rd.get(i);if(s){if(Kh(n,s.options)&&Kh(r,s.config))return s;throw jd.create("duplicate-app",{appName:i})}const a=new td(i);for(const l of Pd.values())a.addComponent(l);const o=new Vd(n,r,a);return Rd.set(i,o),o}function $d(e=Nd){const t=Rd.get(e);if(!t&&e===Nd&&jh())return Bd();if(!t)throw jd.create("no-app",{appName:e});return t}function qd(e,t,n){var r;let i=null!==(r=Dd[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ad.warn(e.join(" "))}Md(new Yh(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Hd="firebase-heartbeat-database",Kd=1,Wd="firebase-heartbeat-store";let Gd=null;function Qd(){return Gd||(Gd=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=bd(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(bd(a.result),e.oldVersion,e.newVersion,bd(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Hd,Kd,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Wd)}catch(n){console.warn(n)}}}).catch((e=>{throw jd.create("idb-open",{originalErrorMessage:e.message})}))),Gd}async function Xd(e,t){try{const n=(await Qd()).transaction(Wd,"readwrite"),r=n.objectStore(Wd);await r.put(t,Jd(e)),await n.done}catch(n){if(n instanceof $h)Ad.warn(n.message);else{const e=jd.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Ad.warn(e.message)}}}function Jd(e){return`${e.name}!${e.options.appId}`}class Yd{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ef(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zd();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Ad.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Zd(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),tf(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ad.warn(t),""}}}function Zd(){return(new Date).toISOString().substring(0,10)}class ef{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Qd()).transaction(Wd),n=await t.objectStore(Wd).get(Jd(e));return await t.done,n}catch(t){if(t instanceof $h)Ad.warn(t.message);else{const e=jd.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Ad.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xd(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xd(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tf(e){return Oh(JSON.stringify({version:2,heartbeats:e})).length}function nf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Md(new Yh("platform-logger",(e=>new Id(e)),"PRIVATE")),Md(new Yh("heartbeat",(e=>new Yd(e)),"PRIVATE")),qd(Cd,xd,""),qd(Cd,xd,"esm2017"),qd("fire-js",""),qd("firebase","11.1.0","app"),"function"==typeof SuppressedError&&SuppressedError;const rf=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},sf=new qh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),af=new ld("@firebase/auth");function of(e,...t){af.logLevel<=nd.ERROR&&af.error(`Auth (${zd}): ${e}`,...t)}function lf(e,...t){throw df(e,...t)}function uf(e,...t){return df(e,...t)}function cf(e,t,n){const r=Object.assign(Object.assign({},rf()),{[t]:n});return new qh("auth","Firebase",r).create(t,{appName:e.name})}function hf(e){return cf(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function df(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return sf.create(e,...t)}function ff(e,t,...n){if(!e)throw df(t,...n)}function pf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw of(t),new Error(t)}function mf(e,t){e||pf(t)}function gf(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yf(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class vf{constructor(e,t){this.shortDelay=e,this.longDelay=t,mf(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bh())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===yf()||"https:"===yf()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function bf(e,t){mf(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class _f{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void pf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void pf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void pf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wf={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},kf=new vf(3e4,6e4);function Sf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ef(e,t,n,r,i={}){return Tf(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Gh(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),_f.fetch()(Cf(e,e.config.apiHost,n,a),l)}))}async function Tf(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},wf),t);try{const t=new xf(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Af(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Af(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Af(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Af(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw cf(e,o,a);lf(e,o)}}catch(i){if(i instanceof $h)throw i;lf(e,"network-request-failed",{message:String(i)})}}async function If(e,t,n,r,i={}){const s=await Ef(e,t,n,r,i);return"mfaPendingCredential"in s&&lf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Cf(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?bf(e.config,i):`${e.config.apiScheme}://${i}`}class xf{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(uf(this.auth,"network-request-failed"))),kf.get())}))}}function Af(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=uf(e,t,r);return i.customData._tokenResponse=n,i}async function Nf(e,t){return Ef(e,"POST","/v1/accounts:lookup",t)}function Df(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Rf(e){return 1e3*Number(e)}function Lf(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return of("JWT malformed, contained fewer than 3 sections"),null;try{const e=Mh(n);return e?JSON.parse(e):(of("Failed to decode base64 JWT payload"),null)}catch(i){return of("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function Pf(e){const t=Lf(e);return ff(t,"internal-error"),ff(void 0!==t.exp,"internal-error"),ff(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Of(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof $h&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class Mf{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Uf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Df(this.lastLoginAt),this.creationTime=Df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ff(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Of(e,Nf(n,{idToken:r}));ff(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?jf(s.providerUserInfo):[],o=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Uf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function jf(e){return e.map((e=>{var{providerId:t}=e,n=nf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Vf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ff(e.idToken,"internal-error"),ff(void 0!==e.idToken,"internal-error"),ff(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):Pf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ff(0!==e.length,"internal-error");const t=Pf(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(ff(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Tf(e,{},(async()=>{const n=Gh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Cf(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_f.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Vf;return n&&(ff("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ff("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ff("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vf,this.toJSON())}_performRefresh(){return pf("not implemented")}}function zf(e,t){ff("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Bf{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=nf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Of(this,this.stsTokenManager.getToken(this.auth,e));return ff(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Jh(e),r=await n.getIdToken(t),i=Lf(r);ff(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Df(Rf(i.auth_time)),issuedAtTime:Df(Rf(i.iat)),expirationTime:Df(Rf(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Jh(e);await Ff(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ff(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ff(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ff(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fd(this.auth.app))return Promise.reject(hf(this.auth));const e=await this.getIdToken();return await Of(this,async function(e,t){return Ef(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:k}=t;ff(v&&k,e,"internal-error");const S=Vf.fromJSON(this.name,k);ff("string"==typeof v,e,"internal-error"),zf(c,e.name),zf(h,e.name),ff("boolean"==typeof b,e,"internal-error"),ff("boolean"==typeof _,e,"internal-error"),zf(d,e.name),zf(f,e.name),zf(p,e.name),zf(m,e.name),zf(g,e.name),zf(y,e.name);const E=new Bf({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new Vf;r.updateFromServerResponse(t);const i=new Bf({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ff(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ff(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?jf(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new Vf;a.updateFromIdToken(n);const o=new Bf({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Uf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(o,l),o}}const $f=new Map;function qf(e){mf(e instanceof Function,"Expected a class definition");let t=$f.get(e);return t?(mf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$f.set(e,t),t)}class Hf{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hf.type="NONE";const Kf=Hf;function Wf(e,t,n){return`firebase:${e}:${t}:${n}`}class Gf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Wf(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wf("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bf._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Gf(qf(Kf),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||qf(Kf);const s=Wf(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Bf._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Gf(i,e,n)):new Gf(i,e,n)}}function Qf(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tp(t))return"Blackberry";if(np(t))return"Webos";if(Jf(t))return"Safari";if((t.includes("chrome/")||Yf(t))&&!t.includes("edge/"))return"Chrome";if(ep(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Xf(e=Bh()){return/firefox\//i.test(e)}function Jf(e=Bh()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yf(e=Bh()){return/crios\//i.test(e)}function Zf(e=Bh()){return/iemobile/i.test(e)}function ep(e=Bh()){return/android/i.test(e)}function tp(e=Bh()){return/blackberry/i.test(e)}function np(e=Bh()){return/webos/i.test(e)}function rp(e=Bh()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ip(e=Bh()){return rp(e)||ep(e)||np(e)||tp(e)||/windows phone/i.test(e)||Zf(e)}function sp(e,t=[]){let n;switch(e){case"Browser":n=Qf(Bh());break;case"Worker":n=`${Qf(Bh())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${zd}/${r}`}class ap{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}class op{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class lp{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cp(this),this.idTokenSubscription=new cp(this),this.beforeStateQueue=new ap(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qf(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Gf.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Nf(this,{idToken:e}),n=await Bf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fd(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ff(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ff(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fd(this.app))return Promise.reject(hf(this));const t=e?Jh(e):null;return t&&ff(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ff(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Fd(this.app)?Promise.reject(hf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fd(this.app)?Promise.reject(hf(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(qf(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Ef(e,"GET","/v2/passwordPolicy",Sf(e,t))}(this),t=new op(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ef(e,"POST","/v2/accounts:revokeToken",Sf(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qf(e)||this._popupRedirectResolver;ff(t,this,"argument-error"),this.redirectPersistenceManager=await Gf.create(this,[qf(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ff(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ff(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){af.logLevel<=nd.WARN&&af.warn(`Auth (${zd}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function up(e){return Jh(e)}class cp{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Qh(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ff(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fp(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class pp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pf("not implemented")}_getIdTokenResponse(e){return pf("not implemented")}_linkToIdToken(e,t){return pf("not implemented")}_getReauthenticationResolver(e){return pf("not implemented")}}async function mp(e,t){return If(e,"POST","/v1/accounts:signInWithIdp",Sf(e,t))}class gp extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=nf(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new gp(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return mp(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mp(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gh(t)}return e}}class yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vp extends yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bp extends vp{constructor(){super("facebook.com")}static credential(e){return gp._fromParams({providerId:bp.PROVIDER_ID,signInMethod:bp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bp.credentialFromTaggedObject(e)}static credentialFromError(e){return bp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return bp.credential(e.oauthAccessToken)}catch(t){return null}}}bp.FACEBOOK_SIGN_IN_METHOD="facebook.com",bp.PROVIDER_ID="facebook.com";class _p extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gp._fromParams({providerId:_p.PROVIDER_ID,signInMethod:_p.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _p.credentialFromTaggedObject(e)}static credentialFromError(e){return _p.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return _p.credential(t,n)}catch(r){return null}}}_p.GOOGLE_SIGN_IN_METHOD="google.com",_p.PROVIDER_ID="google.com";class wp extends vp{constructor(){super("github.com")}static credential(e){return gp._fromParams({providerId:wp.PROVIDER_ID,signInMethod:wp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wp.credentialFromTaggedObject(e)}static credentialFromError(e){return wp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return wp.credential(e.oauthAccessToken)}catch(t){return null}}}wp.GITHUB_SIGN_IN_METHOD="github.com",wp.PROVIDER_ID="github.com";class kp extends vp{constructor(){super("twitter.com")}static credential(e,t){return gp._fromParams({providerId:kp.PROVIDER_ID,signInMethod:kp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return kp.credentialFromTaggedObject(e)}static credentialFromError(e){return kp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return kp.credential(t,n)}catch(r){return null}}}kp.TWITTER_SIGN_IN_METHOD="twitter.com",kp.PROVIDER_ID="twitter.com";class Sp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Bf._fromIdTokenResponse(e,n,r),s=Ep(n);return new Sp({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ep(n);return new Sp({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ep(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Tp extends $h{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Tp.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Tp(e,t,n,r)}}function Ip(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Tp._fromErrorAndOperation(e,n,t,r);throw n}))}const Cp="__sak";class xp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cp,"1"),this.storage.removeItem(Cp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ap extends xp{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ip(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=Bh();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ap.type="LOCAL";const Np=Ap;class Dp extends xp{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dp.type="SESSION";const Rp=Dp;class Lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Lp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pp(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Lp.receivers=[];class Op{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Pp("",20);r.port1.start();const u=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Mp(){return window}function Up(){return void 0!==Mp().WorkerGlobalScope&&"function"==typeof Mp().importScripts}const Fp="firebaseLocalStorageDb",jp="firebaseLocalStorage",Vp="fbase_key";class zp{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Bp(e,t){return e.transaction([jp],t?"readwrite":"readonly").objectStore(jp)}function $p(){const e=indexedDB.open(Fp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(jp,{keyPath:Vp})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(jp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Fp);return new zp(e).toPromise()}(),t(await $p()))}))}))}async function qp(e,t,n){const r=Bp(e,!0).put({[Vp]:t,value:n});return new zp(r).toPromise()}function Hp(e,t){const n=Bp(e,!0).delete(t);return new zp(n).toPromise()}class Kp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await $p()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Up()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lp._getInstance(Up()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Op(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $p();return await qp(e,Cp,"1"),await Hp(e,Cp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>qp(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Bp(e,!1).get(t),r=await new zp(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Bp(e,!1).getAll();return new zp(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kp.type="LOCAL";const Wp=Kp;new vf(3e4,6e4);class Gp extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qp(e){return async function(e,t,n=!1){if(Fd(e.app))return Promise.reject(hf(e));const r="signIn",i=await Ip(e,r,t),s=await Sp._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new Gp(e),e.bypassAuthState)}function Xp(e){const{auth:t,user:n}=e;return ff(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(Fd(r.app))return Promise.reject(hf(r));const i="reauthenticate";try{const s=await Of(e,Ip(r,i,t,e),n);ff(s.idToken,r,"internal-error");const a=Lf(s.idToken);ff(a,r,"internal-error");const{sub:o}=a;return ff(e.uid===o,r,"user-mismatch"),Sp._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&lf(r,"user-mismatch"),s}}(n,new Gp(e),e.bypassAuthState)}async function Jp(e){const{auth:t,user:n}=e;return ff(n,t,"internal-error"),async function(e,t,n=!1){const r=await Of(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Sp._forOperation(e,"link",r)}(n,new Gp(e),e.bypassAuthState)}class Yp{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qp;case"linkViaPopup":case"linkViaRedirect":return Jp;case"reauthViaPopup":case"reauthViaRedirect":return Xp;default:lf(this.auth,"internal-error")}}resolve(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zp=new vf(2e3,1e4);class em extends Yp{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,em.currentPopupAction&&em.currentPopupAction.cancel(),em.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ff(e,this.auth,"internal-error"),e}async onExecution(){mf(1===this.filter.length,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(uf(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(uf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,em.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(uf(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Zp.get())};e()}}em.currentPopupAction=null;const tm=new Map;class nm extends Yp{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Wf("pendingRedirect",e.config.apiKey,e.name)}(t),r=function(e){return qf(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function rm(e,t){tm.set(e._key(),t)}async function im(e,t,n=!1){if(Fd(e.app))return Promise.reject(hf(e));const r=up(e),i=function(e,t){return t?qf(t):(ff(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new nm(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class sm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return om(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!om(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(uf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(am(e))}saveEventToCache(e){this.cachedEventUids.add(am(e)),this.lastProcessedEventTime=Date.now()}}function am(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function om({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const lm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,um=/^https?/;function cm(e){const t=gf(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!um.test(n))return!1;if(lm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hm=new vf(3e4,6e4);function dm(){const e=Mp().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let fm=null;const pm=new vf(5e3,15e3),mm="__/auth/iframe",gm="emulator/auth/iframe",ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bm(e){const t=e.config;ff(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bf(t,gm):`https://${e.config.authDomain}/${mm}`,r={apiKey:t.apiKey,appName:e.name,v:zd},i=vm.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gh(r).slice(1)}`}async function _m(e){const t=await function(e){return fm=fm||function(e){return new Promise(((t,n)=>{var r,i,s,a;function o(){dm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dm(),n(uf(e,"network-request-failed"))},timeout:hm.get()})}if(null===(i=null===(r=Mp().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Mp().gapi)||void 0===s?void 0:s.load)){const t=`__iframefcb${Math.floor(1e6*Math.random())}`;return Mp()[t]=()=>{gapi.load?o():n(uf(e,"network-request-failed"))},(a=`${hp.gapiScript}?onload=${t}`,hp.loadJS(a)).catch((e=>n(e)))}o()}})).catch((e=>{throw fm=null,e}))}(e),fm}(e),n=Mp().gapi;return ff(n,e,"internal-error"),t.open({where:document.body,url:bm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ym,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=uf(e,"network-request-failed"),s=Mp().setTimeout((()=>{r(i)}),pm.get());function a(){Mp().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const wm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class km{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Sm=encodeURIComponent("fac");async function Em(e,t,n,r,i,s){ff(e.config.authDomain,e,"auth-domain-config-required"),ff(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zd,eventId:i};if(t instanceof yp){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof vp){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Sm}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?bf(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Gh(o).slice(1)}${u}`}const Tm="webStorageSupport",Im=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rp,this._completeRedirectFn=im,this._overrideRedirectResult=rm}async _openPopup(e,t,n,r){var i;return mf(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},wm),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Bh().toLowerCase();n&&(o=Yf(u)?"_blank":n),Xf(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Bh()){var t;return rp(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new km(null);const h=window.open(t||"",o,c);ff(h,e,"popup-blocked");try{h.focus()}catch(d){}return new km(h)}(e,await Em(e,t,n,gf(),r),Pp())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await Em(e,t,n,gf(),r),Mp().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(mf(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _m(e),n=new sm(e);return t.register("authEvent",(t=>(ff(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tm,{type:Tm},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Tm];void 0!==i&&t(!!i),lf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Ef(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(cm(r))return}catch(n){}lf(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ip()||Jf()||rp()}};var Cm="@firebase/auth",xm="1.8.1";class Am{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ff(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Nm=Vh("authIdTokenMaxAge")||300;let Dm=null;var Rm;hp={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=uf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Rm="Browser",Md(new Yh("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;ff(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:Rm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sp(Rm)},l=new lp(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qf);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Md(new Yh("auth-internal",(e=>{const t=up(e.getProvider("auth").getImmediate());return new Am(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),qd(Cm,xm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Rm)),qd(Cm,xm,"esm2017");var Lm,Pm,Om="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=a(n)).j(t);h(u)||0<u.l(e);)u=(s=a(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Pm=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},Lm=r}).apply(void 0!==Om?Om:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Mm,Um,Fm,jm,Vm,zm,Bm,$m,qm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof qm&&qm];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(0,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(D)}};var D=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}h(O,L);var M={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),F=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=Z(n),e&&e[U]?e.K(t,n,a(r)?!!r.capture:!!r,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=J(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=X;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Z(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function J(e){return(e=e[q])instanceof z?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function ee(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;w(t=new L(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ne(a,r,!0,t)&&i}if(i=ne(a=t.g=e,r,!0,t)&&i,i=ne(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(a=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re((()=>{e.g=null,e.i&&(e.i=!1,ie(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,R),ee.prototype[U]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){R.call(this),this.h=e,this.g={}}h(ae,R);var oe=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&G(e)}),e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=i.JSON.stringify,ce=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){L.call(this,"d")}function ye(){L.call(this,"c")}h(ge,L),h(ye,L);var ve={},be=null;function _e(){return be=be||new ee}function we(e){L.call(this,ve.La,e)}function ke(e){const t=_e();te(t,new we(t))}function Se(e,t){L.call(this,ve.STAT_EVENT,e),this.stat=t}function Ee(e){const t=_e();te(t,new Se(t,e))}function Te(e,t){L.call(this,ve.Ma,e),this.size=t}function Ie(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ce(){this.g=!0}function xe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ue(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",h(we,L),ve.STAT_EVENT="statevent",h(Se,L),ve.Ma="timingevent",h(Te,L),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}h(Re,de),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Oe={},Me={};function Ue(e,t,n){e.L=1,e.v=ut(it(t)),e.m=n,e.P=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),ze(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function je(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(u(e.ba,e),t)}function $e(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||an(e.j,e)}function He(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Gt(n)}tn(n),Ee(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(u(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),a.K){Ze(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&($e(o),ze(o)),r.g=a}else en(r);0<n.i.length&&Xt(n)}else"stop"!=u[0]&&"close"!=u[0]||ln(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ln(n,7):Wt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}ke()}catch(c){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=$t(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||ke(),$e(this);var n=this.g.Z();this.X=n;t:if(je(this)){var r=qt(this.g);e="";var s=r.length,a=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),qe(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ee(12),He(this),qe(this);break e}xe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ve(this,o),e==Me){4==d&&(this.s=4,Ee(14),n=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Oe){this.s=4,Ee(15),xe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}xe(this.i,this.l,e,null),Ke(this,e)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),nn(h),h.M=!0,Ee(11))}}else xe(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),qe(this)}else xe(this.i,this.l,o,null),Ke(this,o);4==d&&He(this),this.o&&!this.J&&(4==d?an(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),He(this),qe(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,He(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(ke(),Ee(17)),He(this),this.s=2,qe(this)):Be(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,e=i.PerformanceNavigationTiming?0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=ct(t[2]||""),this.g=ct(t[3]||"",!0),at(this,t[4]),this.l=ct(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ct(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?ct(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,yt)),e.i=new bt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ut(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ct(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?gt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,vt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wt(e,t){_t(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return _t(e),t=Et(e,t),e.g.has(t)}function St(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),d(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new he}function Ct(e,t,n){const r=n||"";try{tt(e,(function(e,n){let i=e;a(e)&&(i=ue(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Ot(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){_t(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"==typeof e)kt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,kt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(xt,de),xt.prototype.g=function(){return new At(this.l,this.j)},xt.prototype.i=function(e){return function(){return e}}({}),h(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&Nt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ot,ee);var Mt=/^https?$/i,Ut=["POST","PUT"];function Ft(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),zt(e)}function jt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Vt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(nt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Mt.test(a?a.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<$t(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",jt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){Bt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Qt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Yt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ut(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}un(e)}function Gt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Qt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),x||(C(),x=!0),A.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Yt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ye(e.h,n),Ue(n,r,t)}function Yt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Ct(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),x||(C(),x=!0),A.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=Ie(u(e.Fa,e),on(e,e.v)),e.v++,0))}function nn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Yt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(it(t)),n.m=null,n.P=!0,Fe(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=_e(),new Te(r,n)),Xt(e)}else en(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ie(u(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ut(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=c(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new rt(null);r&&st(a,r),t&&(a.g=t),s&&at(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Yt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ot(new xt({eb:n})):new Ot(e.pa)).Ha(e.J),t}function dn(){}function fn(){}function pn(e,t){ee.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new yn(this)}function mn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Ot.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ft(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ft(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(ht){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ht){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Yt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Pt(n,this.m,s)),Ye(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Gt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),tn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new pn(e,t)},h(pn,ee),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Xt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,pn.aa.N.call(this)},h(mn,ge),h(gn,ye),h(yn,dn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new mn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,$m=function(){return new fn},Bm=function(){return _e()},zm=ve,Vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,jm=Ne,De.COMPLETE="complete",Fm=De,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Um=pe,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,Mm=Ot}).apply(void 0!==qm?qm:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Hm="@firebase/firestore";class Km{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Km.UNAUTHENTICATED=new Km(null),Km.GOOGLE_CREDENTIALS=new Km("google-credentials-uid"),Km.FIRST_PARTY=new Km("first-party-uid"),Km.MOCK_USER=new Km("mock-user");let Wm="11.0.2";const Gm=new ld("@firebase/firestore");function Qm(){return Gm.logLevel}function Xm(e,...t){if(Gm.logLevel<=nd.DEBUG){const n=t.map(Zm);Gm.debug(`Firestore (${Wm}): ${e}`,...n)}}function Jm(e,...t){if(Gm.logLevel<=nd.ERROR){const n=t.map(Zm);Gm.error(`Firestore (${Wm}): ${e}`,...n)}}function Ym(e,...t){if(Gm.logLevel<=nd.WARN){const n=t.map(Zm);Gm.warn(`Firestore (${Wm}): ${e}`,...n)}}function Zm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(n){return e}var t}function eg(e="Unexpected state"){const t=`FIRESTORE (${Wm}) INTERNAL ASSERTION FAILED: `+e;throw Jm(t),new Error(t)}function tg(e,t){e||eg()}function ng(e,t){return e}const rg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ig extends $h{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sg{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ag{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class og{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Km.UNAUTHENTICATED)))}shutdown(){}}class lg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ug{constructor(e){this.t=e,this.currentUser=Km.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tg(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new sg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sg,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Xm("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Xm("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sg)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Xm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tg("string"==typeof t.accessToken),new ag(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tg(null===e||"string"==typeof e),new Km(e)}}class cg{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Km.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class hg{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new cg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Km.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fg{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){tg(void 0===this.o);const n=e=>{null!=e.error&&Xm("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Xm("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Xm("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Xm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(tg("string"==typeof e.token),this.R=e.token,new dg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pg(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class mg{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=pg(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function gg(e,t){return e<t?-1:e>t?1:0}function yg(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class vg{static now(){return vg.fromMillis(Date.now())}static fromDate(e){return vg.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new vg(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ig(rg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ig(rg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ig(rg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ig(rg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gg(this.nanoseconds,e.nanoseconds):gg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bg{static fromTimestamp(e){return new bg(e)}static min(){return new bg(new vg(0,0))}static max(){return new bg(new vg(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _g{constructor(e,t,n){void 0===t?t=0:t>e.length&&eg(),void 0===n?n=e.length-t:n>e.length-t&&eg(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_g.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _g?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wg extends _g{construct(e,t,n){return new wg(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ig(rg.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new wg(t)}static emptyPath(){return new wg([])}}const kg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sg extends _g{construct(e,t,n){return new Sg(e,t,n)}static isValidIdentifier(e){return kg.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sg.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ig(rg.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ig(rg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ig(rg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ig(rg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sg(t)}static emptyPath(){return new Sg([])}}class Eg{constructor(e){this.path=e}static fromPath(e){return new Eg(wg.fromString(e))}static fromName(e){return new Eg(wg.fromString(e).popFirst(5))}static empty(){return new Eg(wg.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wg.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wg.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Eg(new wg(e.slice()))}}function Tg(e){return new Ig(e.readTime,e.key,-1)}class Ig{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ig(bg.min(),Eg.empty(),-1)}static max(){return new Ig(bg.max(),Eg.empty(),-1)}}function Cg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Eg.comparator(e.documentKey,t.documentKey),0!==n?n:gg(e.largestBatchId,t.largestBatchId))}const xg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ag{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ng(e){if(e.code!==rg.FAILED_PRECONDITION||e.message!==xg)throw e;Xm("LocalStore","Unexpectedly lost primary lease")}class Dg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&eg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Dg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Dg?t:Dg.resolve(t)}catch(t){return Dg.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Dg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Dg.reject(t)}static resolve(e){return new Dg(((t,n)=>{t(e)}))}static reject(e){return new Dg(((t,n)=>{n(e)}))}static waitFor(e){return new Dg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Dg.resolve(!1);for(const n of e)t=t.next((e=>e?Dg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Dg(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Dg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Rg(e){return"IndexedDbTransactionError"===e.name}class Lg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Pg(e){return null==e}function Og(e){return 0===e&&1/e==-1/0}function Mg(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Ug(e){return e+""}function Fg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jg(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Lg.oe=-1;class zg{constructor(e,t){this.comparator=e,this.root=t||$g.EMPTY}insert(e,t){return new zg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$g.BLACK,null,null))}remove(e){return new zg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$g.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bg(this.root,e,this.comparator,!0)}}class Bg{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $g{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$g.RED,this.left=null!=r?r:$g.EMPTY,this.right=null!=i?i:$g.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $g(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $g.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $g.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$g.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$g.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw eg();if(this.right.isRed())throw eg();const e=this.left.check();if(e!==this.right.check())throw eg();return e+(this.isRed()?0:1)}}$g.EMPTY=null,$g.RED=!0,$g.BLACK=!1,$g.EMPTY=new class{constructor(){this.size=0}get key(){throw eg()}get value(){throw eg()}get color(){throw eg()}get left(){throw eg()}get right(){throw eg()}copy(e,t,n,r,i){return this}insert(e,t,n){return new $g(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qg{constructor(e){this.comparator=e,this.data=new zg(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hg(this.data.getIterator())}getIteratorFrom(e){return new Hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof qg))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qg(this.comparator);return t.data=e,t}}class Hg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kg{constructor(e){this.fields=e,e.sort(Sg.comparator)}static empty(){return new Kg([])}unionWith(e){let t=new qg(Sg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Kg(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yg(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Wg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gg{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Wg("Invalid base64 string: "+t):t}}(e);return new Gg(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Gg(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gg.EMPTY_BYTE_STRING=new Gg("");const Qg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xg(e){if(tg(!!e),"string"==typeof e){let t=0;const n=Qg.exec(e);if(tg(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jg(e.seconds),nanos:Jg(e.nanos)}}function Jg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yg(e){return"string"==typeof e?Gg.fromBase64String(e):Gg.fromUint8Array(e)}function Zg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ey(e){const t=e.mapValue.fields.__previous_value__;return Zg(t)?ey(t):t}function ty(e){const t=Xg(e.mapValue.fields.__local_write_time__.timestampValue);return new vg(t.seconds,t.nanos)}class ny{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ry{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ry("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ry&&e.projectId===this.projectId&&e.database===this.database}}const iy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zg(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?9007199254740991:function(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(e)?10:11:eg()}function ay(e,t){if(e===t)return!0;const n=sy(e);if(n!==sy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ty(e).isEqual(ty(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xg(e.timestampValue),r=Xg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Yg(e.bytesValue).isEqual(Yg(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jg(e.geoPointValue.latitude)===Jg(t.geoPointValue.latitude)&&Jg(e.geoPointValue.longitude)===Jg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jg(e.integerValue)===Jg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jg(e.doubleValue),r=Jg(t.doubleValue);return n===r?Og(n)===Og(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yg(e.arrayValue.values||[],t.arrayValue.values||[],ay);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fg(n)!==Fg(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ay(n[i],r[i])))return!1;return!0}(e,t);default:return eg()}var r}function oy(e,t){return void 0!==(e.values||[]).find((e=>ay(e,t)))}function ly(e,t){if(e===t)return 0;const n=sy(e),r=sy(t);if(n!==r)return gg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jg(e.integerValue||e.doubleValue),r=Jg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return uy(e.timestampValue,t.timestampValue);case 4:return uy(ty(e),ty(t));case 5:return gg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Yg(e),r=Yg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=gg(n[i],r[i]);if(0!==e)return e}return gg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=gg(Jg(e.latitude),Jg(t.latitude));return 0!==n?n:gg(Jg(e.longitude),Jg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return cy(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,u=null===(r=o.value)||void 0===r?void 0:r.arrayValue,c=gg((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:cy(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===iy.mapValue&&t===iy.mapValue)return 0;if(e===iy.mapValue)return 1;if(t===iy.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=gg(r[a],s[a]);if(0!==e)return e;const t=ly(n[r[a]],i[s[a]]);if(0!==t)return t}return gg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw eg()}}function uy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gg(e,t);const n=Xg(e),r=Xg(t),i=gg(n.seconds,r.seconds);return 0!==i?i:gg(n.nanos,r.nanos)}function cy(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ly(n[i],r[i]);if(e)return e}return gg(n.length,r.length)}function hy(e){return dy(e)}function dy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xg(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Yg(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,Eg.fromName(t).toString()):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=dy(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${dy(e.fields[i])}`;return n+"}"}(e.mapValue):eg();var t}function fy(e){switch(sy(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ey(e);return t?16+fy(t):16;case 5:return 2*e.stringValue.length;case 6:return Yg(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce(((e,t)=>e+fy(t)),0);case 10:case 11:return function(e){let t=0;return jg(e.fields,((e,n)=>{t+=e.length+fy(n)})),t}(e.mapValue);default:throw eg()}}function py(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function my(e){return!!e&&"integerValue"in e}function gy(e){return!!e&&"arrayValue"in e}function yy(e){return!!e&&"nullValue"in e}function vy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function by(e){return!!e&&"mapValue"in e}function _y(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jg(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=_y(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_y(e.arrayValue.values[n]);return t}return Object.assign({},e)}class wy{constructor(e){this.value=e}static empty(){return new wy({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!by(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_y(t)}setAll(e){let t=Sg.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=_y(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());by(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ay(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];by(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){jg(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new wy(_y(this.value))}}function ky(e){const t=[];return jg(e.fields,((e,n)=>{const r=new Sg([e]);if(by(n)){const e=ky(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Kg(t)}class Sy{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Sy(e,0,bg.min(),bg.min(),bg.min(),wy.empty(),0)}static newFoundDocument(e,t,n,r){return new Sy(e,1,t,bg.min(),n,r,0)}static newNoDocument(e,t){return new Sy(e,2,t,bg.min(),bg.min(),wy.empty(),0)}static newUnknownDocument(e,t){return new Sy(e,3,t,bg.min(),bg.min(),wy.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wy.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wy.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sy&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sy(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ey{constructor(e,t){this.position=e,this.inclusive=t}}function Ty(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Eg.comparator(Eg.fromName(a.referenceValue),n.key):ly(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Iy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ay(e.position[n],t.position[n]))return!1;return!0}class Cy{constructor(e,t="asc"){this.field=e,this.dir=t}}function xy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ay{}class Ny extends Ay{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Uy(e,t,n):"array-contains"===t?new zy(e,n):"in"===t?new By(e,n):"not-in"===t?new $y(e,n):"array-contains-any"===t?new qy(e,n):new Ny(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Fy(e,n):new jy(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ly(t,this.value)):null!==t&&sy(this.value)===sy(t)&&this.matchesComparison(ly(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return eg()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dy extends Ay{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Dy(e,t)}matches(e){return Ry(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ry(e){return"and"===e.op}function Ly(e){return function(e){for(const t of e.filters)if(t instanceof Dy)return!1;return!0}(e)&&Ry(e)}function Py(e){if(e instanceof Ny)return e.field.canonicalString()+e.op.toString()+hy(e.value);if(Ly(e))return e.filters.map((e=>Py(e))).join(",");{const t=e.filters.map((e=>Py(e))).join(",");return`${e.op}(${t})`}}function Oy(e,t){return e instanceof Ny?(n=e,(r=t)instanceof Ny&&n.op===r.op&&n.field.isEqual(r.field)&&ay(n.value,r.value)):e instanceof Dy?function(e,t){return t instanceof Dy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Oy(n,t.filters[r])),!0)}(e,t):void eg();var n,r}function My(e){return e instanceof Ny?`${(t=e).field.canonicalString()} ${t.op} ${hy(t.value)}`:e instanceof Dy?function(e){return e.op.toString()+" {"+e.getFilters().map(My).join(" ,")+"}"}(e):"Filter";var t}class Uy extends Ny{constructor(e,t,n){super(e,t,n),this.key=Eg.fromName(n.referenceValue)}matches(e){const t=Eg.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fy extends Ny{constructor(e,t){super(e,"in",t),this.keys=Vy(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jy extends Ny{constructor(e,t){super(e,"not-in",t),this.keys=Vy(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Eg.fromName(e.referenceValue)))}class zy extends Ny{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gy(t)&&oy(t.arrayValue,this.value)}}class By extends Ny{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oy(this.value.arrayValue,t)}}class $y extends Ny{constructor(e,t){super(e,"not-in",t)}matches(e){if(oy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oy(this.value.arrayValue,t)}}class qy extends Ny{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>oy(this.value.arrayValue,e)))}}class Hy{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Ky(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Hy(e,t,n,r,i,s,a)}function Wy(e){const t=ng(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Py(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>{return(t=e).field.canonicalString()+t.dir;var t})).join(","),Pg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>hy(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>hy(e))).join(",")),t.ue=e}return t.ue}function Gy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Oy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Iy(e.startAt,t.startAt)&&Iy(e.endAt,t.endAt)}function Qy(e){return Eg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Xy{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jy(e){return new Xy(e)}function Yy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Zy(e){return null!==e.collectionGroup}function ev(e){const t=ng(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new qg(Sg.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Cy(r,n))})),e.has(Sg.keyField().canonicalString())||t.ce.push(new Cy(Sg.keyField(),n))}return t.ce}function tv(e){const t=ng(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return Ky(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Cy(e.field,t)}));const n=e.endAt?new Ey(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ey(e.startAt.position,e.startAt.inclusive):null;return Ky(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,ev(e))),t.le}function nv(e,t){const n=e.filters.concat([t]);return new Xy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rv(e,t,n){return new Xy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function iv(e,t){return Gy(tv(e),tv(t))&&e.limitType===t.limitType}function sv(e){return`${Wy(tv(e))}|lt:${e.limitType}`}function av(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>My(e))).join(", ")}]`),Pg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t})).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>hy(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>hy(e))).join(",")),`Target(${t})`}(tv(e))}; limitType=${e.limitType})`}function ov(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Eg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ev(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Ty(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,ev(n),r)||n.endAt&&!function(e,t,n){const r=Ty(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,ev(n),r)));var n,r}function lv(e){return(t,n)=>{let r=!1;for(const i of ev(e)){const e=uv(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function uv(e,t,n){const r=e.field.isKeyField()?Eg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ly(r,i):eg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return eg()}}class cv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jg(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vg(this.inner)}size(){return this.innerSize}}const hv=new zg(Eg.comparator);function dv(){return hv}const fv=new zg(Eg.comparator);function pv(...e){let t=fv;for(const n of e)t=t.insert(n.key,n);return t}function mv(e){let t=fv;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function gv(){return vv()}function yv(){return vv()}function vv(){return new cv((e=>e.toString()),((e,t)=>e.isEqual(t)))}const bv=new zg(Eg.comparator),_v=new qg(Eg.comparator);function wv(...e){let t=_v;for(const n of e)t=t.add(n);return t}const kv=new qg(gg);function Sv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Og(t)?"-0":t}}function Ev(e){return{integerValue:""+e}}class Tv{constructor(){this._=void 0}}function Iv(e,t,n){return e instanceof Av?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zg(t)&&(t=ey(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Nv?Dv(e,t):e instanceof Rv?Lv(e,t):function(e,t){const n=xv(e,t),r=Ov(n)+Ov(e.Pe);return my(n)&&my(e.Pe)?Ev(r):Sv(e.serializer,r)}(e,t)}function Cv(e,t,n){return e instanceof Nv?Dv(e,t):e instanceof Rv?Lv(e,t):n}function xv(e,t){return e instanceof Pv?my(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Av extends Tv{}class Nv extends Tv{constructor(e){super(),this.elements=e}}function Dv(e,t){const n=Mv(t);for(const r of e.elements)n.some((e=>ay(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Rv extends Tv{constructor(e){super(),this.elements=e}}function Lv(e,t){let n=Mv(t);for(const r of e.elements)n=n.filter((e=>!ay(e,r)));return{arrayValue:{values:n}}}class Pv extends Tv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ov(e){return Jg(e.integerValue||e.doubleValue)}function Mv(e){return gy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Uv{constructor(e,t){this.field=e,this.transform=t}}class Fv{constructor(e,t){this.version=e,this.transformResults=t}}class jv{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jv}static exists(e){return new jv(void 0,e)}static updateTime(e){return new jv(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zv{}function Bv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yv(e.key,jv.none()):new Wv(e.key,e.data,jv.none());{const n=e.data,r=wy.empty();let i=new qg(Sg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Gv(e.key,r,new Kg(i.toArray()),jv.none())}}function $v(e,t,n){var r;e instanceof Wv?function(e,t,n){const r=e.value.clone(),i=Xv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gv?function(e,t,n){if(!Vv(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function qv(e,t,n,r){return e instanceof Wv?function(e,t,n,r){if(!Vv(e.precondition,t))return n;const i=e.value.clone(),s=Jv(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gv?function(e,t,n,r){if(!Vv(e.precondition,t))return n;const i=Jv(e.fieldTransforms,r,t),s=t.data;return s.setAll(Qv(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):(i=t,s=n,Vv(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function Hv(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=xv(r.transform,e||null);null!=i&&(null===n&&(n=wy.empty()),n.set(r.field,i))}return n||null}function Kv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&yg(n,r,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Nv&&r instanceof Nv||n instanceof Rv&&r instanceof Rv?yg(n.elements,r.elements,ay):n instanceof Pv&&r instanceof Pv?ay(n.Pe,r.Pe):n instanceof Av&&r instanceof Av);var n,r}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Wv extends zv{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gv extends zv{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qv(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Xv(e,t,n){const r=new Map;tg(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Cv(a,o,n[i]))}return r}function Jv(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Iv(e,s,t))}return r}class Yv extends zv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zv extends zv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$v(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qv(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qv(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=yv();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Bv(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(bg.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),wv())}isEqual(e){return this.batchId===e.batchId&&yg(this.mutations,e.mutations,((e,t)=>Kv(e,t)))&&yg(this.baseMutations,e.baseMutations,((e,t)=>Kv(e,t)))}}class tb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){tg(e.mutations.length===n.length);let r=function(){return bv}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new tb(e,t,n,r)}}class nb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rb{constructor(e,t){this.count=e,this.unchangedNames=t}}var ib,sb;function ab(e){if(void 0===e)return Jm("GRPC error has no .code"),rg.UNKNOWN;switch(e){case ib.OK:return rg.OK;case ib.CANCELLED:return rg.CANCELLED;case ib.UNKNOWN:return rg.UNKNOWN;case ib.DEADLINE_EXCEEDED:return rg.DEADLINE_EXCEEDED;case ib.RESOURCE_EXHAUSTED:return rg.RESOURCE_EXHAUSTED;case ib.INTERNAL:return rg.INTERNAL;case ib.UNAVAILABLE:return rg.UNAVAILABLE;case ib.UNAUTHENTICATED:return rg.UNAUTHENTICATED;case ib.INVALID_ARGUMENT:return rg.INVALID_ARGUMENT;case ib.NOT_FOUND:return rg.NOT_FOUND;case ib.ALREADY_EXISTS:return rg.ALREADY_EXISTS;case ib.PERMISSION_DENIED:return rg.PERMISSION_DENIED;case ib.FAILED_PRECONDITION:return rg.FAILED_PRECONDITION;case ib.ABORTED:return rg.ABORTED;case ib.OUT_OF_RANGE:return rg.OUT_OF_RANGE;case ib.UNIMPLEMENTED:return rg.UNIMPLEMENTED;case ib.DATA_LOSS:return rg.DATA_LOSS;default:return eg()}}(sb=ib||(ib={}))[sb.OK=0]="OK",sb[sb.CANCELLED=1]="CANCELLED",sb[sb.UNKNOWN=2]="UNKNOWN",sb[sb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sb[sb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sb[sb.NOT_FOUND=5]="NOT_FOUND",sb[sb.ALREADY_EXISTS=6]="ALREADY_EXISTS",sb[sb.PERMISSION_DENIED=7]="PERMISSION_DENIED",sb[sb.UNAUTHENTICATED=16]="UNAUTHENTICATED",sb[sb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sb[sb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sb[sb.ABORTED=10]="ABORTED",sb[sb.OUT_OF_RANGE=11]="OUT_OF_RANGE",sb[sb.UNIMPLEMENTED=12]="UNIMPLEMENTED",sb[sb.INTERNAL=13]="INTERNAL",sb[sb.UNAVAILABLE=14]="UNAVAILABLE",sb[sb.DATA_LOSS=15]="DATA_LOSS";const ob=new Lm([4294967295,4294967295],0);function lb(e){const t=(new TextEncoder).encode(e),n=new Pm;return n.update(t),new Uint8Array(n.digest())}function ub(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Lm([n,r],0),new Lm([i,s],0)]}class cb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hb(`Invalid padding: ${t}`);if(n<0)throw new hb(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hb(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hb(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Lm.fromNumber(this.Te)}Ee(e,t,n){let r=e.add(t.multiply(Lm.fromNumber(n)));return 1===r.compare(ob)&&(r=new Lm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=lb(e),[n,r]=ub(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new cb(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=lb(e),[n,r]=ub(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class db{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new db(bg.min(),r,new zg(gg),dv(),wv())}}class fb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fb(n,t,wv(),wv(),wv())}}class pb{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class mb{constructor(e,t){this.targetId=e,this.me=t}}class gb{constructor(e,t,n=Gg.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yb{constructor(){this.fe=0,this.ge=_b(),this.pe=Gg.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=wv(),t=wv(),n=wv();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:eg()}})),new fb(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=_b()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tg(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vb{constructor(e){this.Le=e,this.Be=new Map,this.ke=dv(),this.qe=bb(),this.Qe=bb(),this.Ke=new zg(gg)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:eg()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.me.count,r=this.Ye(t);if(r){const i=r.target;if(Qy(i))if(0===n){const e=new Eg(i.path);this.We(t,e,Sy.newNoDocument(e,bg.min()))}else tg(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Yg(n).toUint8Array()}catch(o){if(o instanceof Wg)return Ym("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new cb(s,r,i)}catch(o){return Ym(o instanceof hb?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.Te?null:a}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Qy(i.target)){const t=new Eg(i.target.path);this.st(t).has(r)||this.ot(r,t)||this.We(r,t,Sy.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=wv();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new db(e,t,this.Ke,this.ke,n);return this.ke=dv(),this.qe=bb(),this.Qe=bb(),this.Ke=new zg(gg),r}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new yb,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new qg(gg),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qg(gg),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Xm("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new yb),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function bb(){return new zg(Eg.comparator)}function _b(){return new zg(Eg.comparator)}const wb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),kb=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Sb=(()=>({and:"AND",or:"OR"}))();class Eb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tb(e,t){return e.useProto3Json||Pg(t)?t:{value:t}}function Ib(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xb(e,t){return Ib(e,t.toTimestamp())}function Ab(e){return tg(!!e),bg.fromTimestamp(function(e){const t=Xg(e);return new vg(t.seconds,t.nanos)}(e))}function Nb(e,t){return Db(e,t).canonicalString()}function Db(e,t){const n=(r=e,new wg(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Rb(e){const t=wg.fromString(e);return tg(Xb(t)),t}function Lb(e,t){return Nb(e.databaseId,t.path)}function Pb(e,t){const n=Rb(t);if(n.get(1)!==e.databaseId.projectId)throw new ig(rg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ig(rg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Eg(Ub(n))}function Ob(e,t){return Nb(e.databaseId,t)}function Mb(e){return new wg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ub(e){return tg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fb(e,t,n){return{name:Lb(e,t),fields:n.value.mapValue.fields}}function jb(e,t){return{documents:[Ob(e,t.path)]}}function Vb(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ob(e,i);const s=function(e){if(0!==e.length)return Gb(Dy.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>{return{field:Kb((t=e).field),direction:$b(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Tb(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ct:n,parent:i};var l}function zb(e){let t=function(e){const t=Rb(e);return 4===t.length?wg.emptyPath():Ub(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tg(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Bb(e);return t instanceof Dy&&Ly(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>{return new Cy(Wb((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Pg(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ey(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Ey(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new Xy(e,t,n,r,i,"F",a,o)}(t,i,a,s,o,0,l,u)}function Bb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Wb(e.unaryFilter.field);return Ny.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Wb(e.unaryFilter.field);return Ny.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wb(e.unaryFilter.field);return Ny.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wb(e.unaryFilter.field);return Ny.create(i,"!=",{nullValue:"NULL_VALUE"});default:return eg()}}(e):void 0!==e.fieldFilter?(t=e,Ny.create(Wb(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return eg()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Dy.create(e.compositeFilter.filters.map((e=>Bb(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return eg()}}(e.compositeFilter.op))}(e):eg();var t}function $b(e){return wb[e]}function qb(e){return kb[e]}function Hb(e){return Sb[e]}function Kb(e){return{fieldPath:e.canonicalString()}}function Wb(e){return Sg.fromServerFormat(e.fieldPath)}function Gb(e){return e instanceof Ny?function(e){if("=="===e.op){if(vy(e.value))return{unaryFilter:{field:Kb(e.field),op:"IS_NAN"}};if(yy(e.value))return{unaryFilter:{field:Kb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vy(e.value))return{unaryFilter:{field:Kb(e.field),op:"IS_NOT_NAN"}};if(yy(e.value))return{unaryFilter:{field:Kb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kb(e.field),op:qb(e.op),value:e.value}}}(e):e instanceof Dy?function(e){const t=e.getFilters().map((e=>Gb(e)));return 1===t.length?t[0]:{compositeFilter:{op:Hb(e.op),filters:t}}}(e):eg()}function Qb(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Xb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Jb{constructor(e,t,n,r,i=bg.min(),s=bg.min(),a=Gg.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Jb(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jb(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yb{constructor(e){this.ht=e}}function Zb(e){const t=zb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rv(t,t.limit,"L"):t}class e_{constructor(){this.ln=new t_}addToCollectionParentIndex(e,t){return this.ln.add(t),Dg.resolve()}getCollectionParents(e,t){return Dg.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Dg.resolve()}deleteFieldIndex(e,t){return Dg.resolve()}deleteAllFieldIndexes(e){return Dg.resolve()}createTargetIndexes(e,t){return Dg.resolve()}getDocumentsMatchingTarget(e,t){return Dg.resolve(null)}getIndexType(e,t){return Dg.resolve(0)}getFieldIndexes(e,t){return Dg.resolve([])}getNextCollectionGroupToUpdate(e){return Dg.resolve(null)}getMinOffset(e,t){return Dg.resolve(Ig.min())}getMinOffsetFromCollectionGroup(e,t){return Dg.resolve(Ig.min())}updateCollectionGroup(e,t,n){return Dg.resolve()}updateIndexEntries(e,t){return Dg.resolve()}}class t_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qg(wg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new qg(wg.comparator)).toArray()}}const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class r_{static withCacheSize(e){return new r_(e,r_.DEFAULT_COLLECTION_PERCENTILE,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}r_.DEFAULT_COLLECTION_PERCENTILE=10,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,r_.DEFAULT=new r_(41943040,r_.DEFAULT_COLLECTION_PERCENTILE,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),r_.DISABLED=new r_(-1,0,0);class i_{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new i_(0)}static Qn(){return new i_(-1)}}function s_([e,t],[n,r]){const i=gg(e,n);return 0===i?gg(t,r):i}class a_{constructor(e){this.Gn=e,this.buffer=new qg(s_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();s_(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o_{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){Xm("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Rg(e)?Xm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ng(e)}await this.Yn(3e5)}))}}class l_{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Dg.resolve(Lg.oe);const n=new a_(t);return this.Zn.forEachTarget(e,(e=>n.Hn(e.sequenceNumber))).next((()=>this.Zn.er(e,(e=>n.Hn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xm("LruGarbageCollector","Garbage collection skipped; disabled"),Dg.resolve(n_)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xm("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.tr(e,t)))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,r,i,s,a,o,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Xm("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Qm()<=nd.DEBUG&&Xm("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${i} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-u}ms`),Dg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class u_{constructor(){this.changes=new cv((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sy.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Dg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class h_{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&qv(n.mutation,e,Kg.empty(),vg.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,wv()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=wv()){const r=gv();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=pv();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=gv();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,wv())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=dv();const s=vv(),a=vv();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Gv)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),qv(a.mutation,t,a.mutation.getFieldMask(),vg.now())):s.set(t.key,Kg.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new c_(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=vv();let r=new zg(((e,t)=>e-t)),i=wv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Kg.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||wv()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=yv();l.forEach((e=>{if(!i.has(e)){const r=Bv(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Dg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return i=t,Eg.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Dg.resolve(gv());let a=-1,o=i;return s.next((t=>Dg.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Dg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,wv()))).next((e=>({batchId:a,changes:mv(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Eg(t)).next((e=>{let t=pv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=pv();return this.indexManager.getCollectionParents(e,i).next((a=>Dg.forEach(a,(a=>{const o=(l=t,u=a.child(i),new Xy(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,u;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Sy.newInvalidDocument(r)))}));let n=pv();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&qv(s.mutation,r,Kg.empty(),vg.now()),ov(t,r)&&(n=n.insert(e,r))})),n}))}}class d_{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Dg.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,{id:(n=t).id,version:n.version,createTime:Ab(n.createTime)}),Dg.resolve();var n}getNamedQuery(e,t){return Dg.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,{name:(n=t).name,query:Zb(n.bundledQuery),readTime:Ab(n.readTime)}),Dg.resolve();var n}}class f_{constructor(){this.overlays=new zg(Eg.comparator),this.Er=new Map}getOverlay(e,t){return Dg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gv();return Dg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Tt(e,t,r)})),Dg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Er.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Er.delete(n)),Dg.resolve()}getOverlaysForCollection(e,t,n){const r=gv(),i=t.length+1,s=new Eg(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Dg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zg(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gv(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=gv(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Dg.resolve(a)}Tt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Er.get(r.largestBatchId).delete(n.key);this.Er.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new nb(t,n));let i=this.Er.get(t);void 0===i&&(i=wv(),this.Er.set(t,i)),this.Er.set(t,i.add(n.key))}}class p_{constructor(){this.sessionToken=Gg.EMPTY_BYTE_STRING}getSessionToken(e){return Dg.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Dg.resolve()}}class m_{constructor(){this.dr=new qg(g_.Ar),this.Rr=new qg(g_.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const n=new g_(e,t);this.dr=this.dr.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.gr(new g_(e,t))}pr(e,t){e.forEach((e=>this.removeReference(e,t)))}yr(e){const t=new Eg(new wg([])),n=new g_(t,e),r=new g_(t,e+1),i=[];return this.Rr.forEachInRange([n,r],(e=>{this.gr(e),i.push(e.key)})),i}wr(){this.dr.forEach((e=>this.gr(e)))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Eg(new wg([])),n=new g_(t,e),r=new g_(t,e+1);let i=wv();return this.Rr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new g_(e,0),n=this.dr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class g_{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Eg.comparator(e.key,t.key)||gg(e.br,t.br)}static Vr(e,t){return gg(e.br,t.br)||Eg.comparator(e.key,t.key)}}class y_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qg(g_.Ar)}checkEmpty(e){return Dg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new eb(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.vr=this.vr.add(new g_(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Dg.resolve(s)}lookupMutationBatch(e,t){return Dg.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Fr(n),i=r<0?0:r;return Dg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Dg.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return Dg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new g_(t,0),r=new g_(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([n,r],(e=>{const t=this.Cr(e.br);i.push(t)})),Dg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qg(gg);return t.forEach((e=>{const t=new g_(e,0),r=new g_(e,Number.POSITIVE_INFINITY);this.vr.forEachInRange([t,r],(e=>{n=n.add(e.br)}))})),Dg.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Eg.isDocumentKey(i)||(i=i.child(""));const s=new g_(new Eg(i),0);let a=new qg(gg);return this.vr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.br)),!0)}),s),Dg.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach((e=>{const n=this.Cr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){tg(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let n=this.vr;return Dg.forEach(t.mutations,(r=>{const i=new g_(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.vr=n}))}Ln(e){}containsKey(e,t){const n=new g_(t,0),r=this.vr.firstAfterOrEqual(n);return Dg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dg.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class v_{constructor(e){this.Nr=e,this.docs=new zg(Eg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Dg.resolve(n?n.document.mutableCopy():Sy.newInvalidDocument(t))}getEntries(e,t){let n=dv();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Sy.newInvalidDocument(e))})),Dg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=dv();const s=t.path,a=new Eg(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Cg(Tg(a),n)<=0||(r.has(a.key)||ov(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Dg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){eg()}Lr(e,t){return Dg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new b_(this)}getSize(e){return Dg.resolve(this.size)}}class b_ extends u_{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(n)})),Dg.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class __{constructor(e){this.persistence=e,this.Br=new cv((e=>Wy(e)),Gy),this.lastRemoteSnapshotVersion=bg.min(),this.highestTargetId=0,this.kr=0,this.qr=new m_,this.targetCount=0,this.Qr=i_.qn()}forEachTarget(e,t){return this.Br.forEach(((e,n)=>t(n))),Dg.resolve()}getLastRemoteSnapshotVersion(e){return Dg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dg.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Dg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),Dg.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new i_(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Dg.resolve()}updateTargetData(e,t){return this.Un(t),Dg.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Dg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Br.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Br.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Dg.waitFor(i).next((()=>r))}getTargetCount(e){return Dg.resolve(this.targetCount)}getTargetData(e,t){const n=this.Br.get(t)||null;return Dg.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),Dg.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Dg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Dg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return Dg.resolve(n)}containsKey(e,t){return Dg.resolve(this.qr.containsKey(t))}}class w_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Lg(0),this.Ur=!1,this.Ur=!0,this.Wr=new p_,this.referenceDelegate=e(this),this.Gr=new __(this),this.indexManager=new e_,this.remoteDocumentCache=new v_((e=>this.referenceDelegate.zr(e))),this.serializer=new Yb(t),this.jr=new d_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new y_(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){Xm("MemoryPersistence","Starting transaction:",e);const r=new k_(this.$r.next());return this.referenceDelegate.Hr(),n(r).next((e=>this.referenceDelegate.Jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Yr(e,t){return Dg.or(Object.values(this.Kr).map((n=>()=>n.containsKey(e,t))))}}class k_ extends Ag{constructor(e){super(),this.currentSequenceNumber=e}}class S_{constructor(e){this.persistence=e,this.Zr=new m_,this.Xr=null}static ei(e){return new S_(e)}get ti(){if(this.Xr)return this.Xr;throw eg()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),Dg.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),Dg.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Dg.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach((e=>this.ti.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ti.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dg.forEach(this.ti,(n=>{const r=Eg.fromPath(n);return this.ni(e,r).next((e=>{e||t.removeEntry(r,bg.min())}))})).next((()=>(this.Xr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ni(e,t).next((e=>{e?this.ti.delete(t.toString()):this.ti.add(t.toString())}))}zr(e){return 0}ni(e,t){return Dg.or([()=>Dg.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class E_{constructor(e,t){this.persistence=e,this.ri=new cv((e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ug(t)),t=Mg(e.get(n),t);return Ug(t)}(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=function(e,t){return new l_(e,t)}(this,t)}static ei(e,t){return new E_(e,t)}Hr(){}Jr(e){return Dg.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}nr(e){let t=0;return this.er(e,(e=>{t++})).next((()=>t))}er(e,t){return Dg.forEach(this.ri,((n,r)=>this.ir(e,n,r).next((e=>e?Dg.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Lr(e,(r=>this.ir(e,r,t).next((e=>{e||(n++,i.removeEntry(r,bg.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Dg.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),Dg.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),Dg.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Dg.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fy(e.data.value)),t}ir(e,t,n){return Dg.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ri.get(t);return Dg.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class T_{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=r}static zi(e,t){let n=wv(),r=wv();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new T_(e,t.fromCache,n,r)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class C_{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=!function(){var e;const t=null===(e=Uh())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){const t=Bh().match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}()>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Xi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.es(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new I_;return this.ts(e,t,n).next((r=>{if(i.result=r,this.Hi)return this.ns(e,t,n,r.size)}))})).next((()=>i.result))}ns(e,t,n,r){return n.documentReadCount<this.Ji?(Qm()<=nd.DEBUG&&Xm("QueryEngine","SDK will not create cache indexes for query:",av(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Dg.resolve()):(Qm()<=nd.DEBUG&&Xm("QueryEngine","Query:",av(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Yi*r?(Qm()<=nd.DEBUG&&Xm("QueryEngine","The SDK decides to create cache indexes for query:",av(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tv(t))):Dg.resolve())}Xi(e,t){if(Yy(t))return Dg.resolve(null);let n=tv(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=rv(t,null,"F"),n=tv(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=wv(...r);return this.Zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.rs(t,r);return this.ss(t,s,i,n.readTime)?this.Xi(e,rv(t,null,"F")):this.os(e,s,t,n)}))))})))))}es(e,t,n,r){return Yy(t)||r.isEqual(bg.min())?Dg.resolve(null):this.Zi.getDocuments(e,n).next((i=>{const s=this.rs(t,i);return this.ss(t,s,n,r)?Dg.resolve(null):(Qm()<=nd.DEBUG&&Xm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),av(t)),this.os(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=bg.fromTimestamp(1e9===r?new vg(n+1,0):new vg(n,r));return new Ig(i,Eg.empty(),-1)}(r)).next((e=>e)))}))}rs(e,t){let n=new qg(lv(e));return t.forEach(((t,r)=>{ov(e,r)&&(n=n.add(r))})),n}ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ts(e,t,n){return Qm()<=nd.DEBUG&&Xm("QueryEngine","Using full collection scan to execute query:",av(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ig.min(),n)}os(e,t,n,r){return this.Zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class x_{constructor(e,t,n,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new zg(gg),this.cs=new cv((e=>Wy(e)),Gy),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h_(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.us)))}}async function A_(e,t){const n=ng(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ps(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=wv();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Ts:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function N_(e){const t=ng(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Gr.getLastRemoteSnapshotVersion(e)))}function D_(e,t){const n=ng(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function R_(e,t,n){const r=ng(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(a){if(!Rg(a))throw a;Xm("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function L_(e,t,n){const r=ng(e);let i=bg.min(),s=wv();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ng(e),i=r.cs.get(n);return void 0!==i?Dg.resolve(r.us.get(i)):r.Gr.getTargetData(t,n)}(r,e,tv(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r._s.getDocumentsMatchingQuery(e,t,n?i:bg.min(),n?s:wv()))).next((e=>(function(e,t,n){let r=e.ls.get(t)||bg.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ls.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ds:s})))))}class P_{constructor(){this.activeTargetIds=kv}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O_{constructor(){this._o=new P_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new P_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M_{uo(e){}shutdown(){}}class U_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Xm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Xm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let F_=null;function j_(){return null===F_?F_=268435456+Math.round(2147483648*Math.random()):F_++,"0x"+F_.toString(16)}const V_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z_{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const B_="WebChannelConnection";class $_ extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Fo=t+"://"+e.host,this.Mo=`projects/${n}/databases/${r}`,this.xo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Oo(e,t,n,r,i){const s=j_(),a=this.No(e,t.toUriEncodedString());Xm("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(o,r,i),this.Bo(e,a,o,n).then((t=>(Xm("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Ym("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}ko(e,t,n,r,i,s){return this.Oo(e,t,n,r,i)}Lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}No(e,t){const n=V_[e];return`${this.Fo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,n,r){const i=j_();return new Promise(((s,a)=>{const o=new Mm;o.setWithCredentials(!0),o.listenOnce(Fm.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case jm.NO_ERROR:const t=o.getResponseJson();Xm(B_,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case jm.TIMEOUT:Xm(B_,`RPC '${e}' ${i} timed out`),a(new ig(rg.DEADLINE_EXCEEDED,"Request time out"));break;case jm.HTTP_ERROR:const n=o.getStatus();if(Xm(B_,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(rg).indexOf(t)>=0?t:rg.UNKNOWN}(t.status);a(new ig(e,t.message))}else a(new ig(rg.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ig(rg.UNAVAILABLE,"Connection failed."));break;default:eg()}}finally{Xm(B_,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Xm(B_,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}qo(e,t,n){const r=j_(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$m(),a=Bm(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");Xm(B_,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=s.createWebChannel(u,o);let h=!1,d=!1;const f=new z_({Eo:t=>{d?Xm(B_,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Xm(B_,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Xm(B_,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Ao:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(c,Um.EventType.OPEN,(()=>{d||(Xm(B_,`RPC '${e}' stream ${r} transport opened.`),f.So())})),p(c,Um.EventType.CLOSE,(()=>{d||(d=!0,Xm(B_,`RPC '${e}' stream ${r} transport closed`),f.Do())})),p(c,Um.EventType.ERROR,(t=>{d||(d=!0,Ym(B_,`RPC '${e}' stream ${r} transport errored:`,t),f.Do(new ig(rg.UNAVAILABLE,"The operation could not be completed")))})),p(c,Um.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];tg(!!i);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Xm(B_,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=ib[e];if(void 0!==t)return ab(t)}(t),i=a.message;void 0===n&&(n=rg.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.Do(new ig(n,i)),c.close()}else Xm(B_,`RPC '${e}' stream ${r} received:`,i),f.vo(i)}})),p(a,zm.STAT_EVENT,(t=>{t.stat===Vm.PROXY?Xm(B_,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Vm.NOPROXY&&Xm(B_,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.bo()}),0),f}}function q_(){return"undefined"!=typeof document?document:null}function H_(e){return new Eb(e,!0)}class K_{constructor(e,t,n=1e3,r=1.5,i=6e4){this.li=e,this.timerId=t,this.Qo=n,this.Ko=r,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-n);r>0&&Xm("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,(()=>(this.Go=Date.now(),e()))),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class W_{constructor(e,t,n,r,i,s,a,o){this.li=e,this.Yo=n,this.Zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new K_(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,(()=>this.u_())))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,4!==e?this.r_.reset():t&&t.code===rg.RESOURCE_EXHAUSTED?(Jm(t.toString()),Jm("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===rg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Xo===t&&this.I_(e,n)}),(t=>{e((()=>{const e=new ig(rg.UNKNOWN,"Fetching auth token failed: "+t.message);return this.E_(e)}))}))}I_(e,t){const n=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro((()=>{n((()=>this.listener.Ro()))})),this.stream.mo((()=>{n((()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,(()=>(this.s_()&&(this.state=3),Promise.resolve()))),this.listener.mo())))})),this.stream.po((e=>{n((()=>this.E_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.n_?this.A_(e):this.onNext(e)))}))}o_(){this.state=5,this.r_.jo((async()=>{this.state=0,this.start()}))}E_(e){return Xm("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget((()=>this.Xo===e?t():(Xm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G_ extends W_{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:eg(),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(tg(void 0===t||"string"==typeof t),Gg.fromBase64String(t||"")):(tg(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Gg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?rg.UNKNOWN:ab(e.code);return new ig(t,e.message||"")}(o);n=new gb(i,s,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pb(e,r.document.name),s=Ab(r.document.updateTime),a=r.document.createTime?Ab(r.document.createTime):bg.min(),o=new wy({mapValue:{fields:r.document.fields}}),l=Sy.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new pb(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Pb(e,r.document),s=r.readTime?Ab(r.readTime):bg.min(),a=Sy.newNoDocument(i,s),o=r.removedTargetIds||[];n=new pb([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Pb(e,r.document),s=r.removedTargetIds||[];n=new pb([],s,i,null)}else{if(!("filter"in t))return eg();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new rb(r,i),a=e.targetId;n=new mb(a,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return bg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?bg.min():t.readTime?Ab(t.readTime):bg.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=Mb(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Qy(r)?{documents:jb(e,r)}:{query:Vb(e,r).ct},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Cb(e,t.resumeToken);const r=Tb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(bg.min())>0){n.readTime=Ib(e,t.snapshotVersion.toTimestamp());const r=Tb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return eg()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=Mb(this.serializer),t.removeTarget=e,this.c_(t)}}class Q_ extends W_{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return tg(!!e.streamToken),this.lastStreamToken=e.streamToken,tg(!e.writeResults||0===e.writeResults.length),this.listener.p_()}onNext(e){tg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=function(e,t){return e&&e.length>0?(tg(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ab(e.updateTime):Ab(t);return n.isEqual(bg.min())&&(n=Ab(t)),new Fv(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ab(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=Mb(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Wv)n={update:Fb(e,t.key,t.value)};else if(t instanceof Yv)n={delete:Lb(e,t.key)};else if(t instanceof Gv)n={update:Fb(e,t.key,t.data),updateMask:Qb(t.fieldMask)};else{if(!(t instanceof Zv))return eg();n={verify:Lb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Av)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pv)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw eg()}(0,e)))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:xb(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:eg())),n;var r,i}(this.serializer,e)))};this.c_(t)}}class X_ extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new ig(rg.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Oo(e,Db(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===rg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ig(rg.UNKNOWN,e.toString())}))}ko(e,t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.ko(e,Db(t,n),r,s,a,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===rg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ig(rg.UNKNOWN,e.toString())}))}terminate(){this.S_=!0,this.connection.terminate()}}class J_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve()))))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Jm(t),this.C_=!1):Xm("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class Y_{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo((e=>{n.enqueueAndForget((async()=>{ow(this)&&(Xm("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ng(e);t.k_.add(4),await ew(t),t.K_.set("Unknown"),t.k_.delete(4),await Z_(t)}(this))}))})),this.K_=new J_(n,r)}}async function Z_(e){if(ow(e))for(const t of e.q_)await t(!0)}async function ew(e){for(const t of e.q_)await t(!1)}function tw(e,t){const n=ng(e);n.B_.has(t.targetId)||(n.B_.set(t.targetId,t),aw(n)?sw(n):Tw(n).s_()&&rw(n,t))}function nw(e,t){const n=ng(e),r=Tw(n);n.B_.delete(t),r.s_()&&iw(n,t),0===n.B_.size&&(r.s_()?r.a_():ow(n)&&n.K_.set("Unknown"))}function rw(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tw(e).V_(t)}function iw(e,t){e.U_.xe(t),Tw(e).m_(t)}function sw(e){e.U_=new vb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.B_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Tw(e).start(),e.K_.F_()}function aw(e){return ow(e)&&!Tw(e).i_()&&e.B_.size>0}function ow(e){return 0===ng(e).k_.size}function lw(e){e.U_=void 0}async function uw(e){e.K_.set("Online")}async function cw(e){e.B_.forEach(((t,n)=>{rw(e,t)}))}async function hw(e,t){lw(e),aw(e)?(e.K_.O_(t),sw(e)):e.K_.set("Unknown")}async function dw(e,t,n){if(e.K_.set("Online"),t instanceof gb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.B_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.B_.delete(r),e.U_.removeTarget(r))}(e,t)}catch(r){Xm("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await fw(e,r)}else if(t instanceof pb?e.U_.$e(t):t instanceof mb?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(bg.min()))try{const t=await N_(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.U_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.B_.get(r);i&&e.B_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.B_.get(t);if(!r)return;e.B_.set(t,r.withResumeToken(Gg.EMPTY_BYTE_STRING,r.snapshotVersion)),iw(e,t);const i=new Jb(r.target,t,n,r.sequenceNumber);rw(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){Xm("RemoteStore","Failed to raise snapshot:",i),await fw(e,i)}}async function fw(e,t,n){if(!Rg(t))throw t;e.k_.add(1),await ew(e),e.K_.set("Offline"),n||(n=()=>N_(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Xm("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await Z_(e)}))}function pw(e,t){return t().catch((n=>fw(e,n,t)))}async function mw(e){const t=ng(e),n=Iw(t);let r=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;gw(t);)try{const e=await D_(t.localStore,r);if(null===e){0===t.L_.length&&n.a_();break}r=e.batchId,yw(t,e)}catch(i){await fw(t,i)}vw(t)&&bw(t)}function gw(e){return ow(e)&&e.L_.length<10}function yw(e,t){e.L_.push(t);const n=Iw(e);n.s_()&&n.f_&&n.g_(t.mutations)}function vw(e){return ow(e)&&!Iw(e).i_()&&e.L_.length>0}function bw(e){Iw(e).start()}async function _w(e){Iw(e).w_()}async function ww(e){const t=Iw(e);for(const n of e.L_)t.g_(n.mutations)}async function kw(e,t,n){const r=e.L_.shift(),i=tb.from(r,t,n);await pw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await mw(e)}async function Sw(e,t){t&&Iw(e).f_&&await async function(e,t){if(function(e){switch(e){default:return eg();case rg.CANCELLED:case rg.UNKNOWN:case rg.DEADLINE_EXCEEDED:case rg.RESOURCE_EXHAUSTED:case rg.INTERNAL:case rg.UNAVAILABLE:case rg.UNAUTHENTICATED:return!1;case rg.INVALID_ARGUMENT:case rg.NOT_FOUND:case rg.ALREADY_EXISTS:case rg.PERMISSION_DENIED:case rg.FAILED_PRECONDITION:case rg.ABORTED:case rg.OUT_OF_RANGE:case rg.UNIMPLEMENTED:case rg.DATA_LOSS:return!0}}(n=t.code)&&n!==rg.ABORTED){const n=e.L_.shift();Iw(e).__(),await pw(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await mw(e)}var n}(e,t),vw(e)&&bw(e)}async function Ew(e,t){const n=ng(e);n.asyncQueue.verifyOperationInProgress(),Xm("RemoteStore","RemoteStore received new credentials");const r=ow(n);n.k_.add(3),await ew(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await Z_(n)}function Tw(e){return e.W_||(e.W_=function(e,t,n){const r=ng(e);return r.b_(),new G_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:uw.bind(null,e),mo:cw.bind(null,e),po:hw.bind(null,e),R_:dw.bind(null,e)}),e.q_.push((async t=>{t?(e.W_.__(),aw(e)?sw(e):e.K_.set("Unknown")):(await e.W_.stop(),lw(e))}))),e.W_}function Iw(e){return e.G_||(e.G_=function(e,t,n){const r=ng(e);return r.b_(),new Q_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:_w.bind(null,e),po:Sw.bind(null,e),p_:ww.bind(null,e),y_:kw.bind(null,e)}),e.q_.push((async t=>{t?(e.G_.__(),await mw(e)):(await e.G_.stop(),e.L_.length>0&&(Xm("RemoteStore",`Stopping write stream with ${e.L_.length} pending writes`),e.L_=[]))}))),e.G_}class Cw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Cw(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ig(rg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(e,t){if(Jm("AsyncQueue",`${t}: ${e}`),Rg(e))return new ig(rg.UNAVAILABLE,`${t}: ${e}`);throw e}class Aw{static emptySet(e){return new Aw(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Eg.comparator(t.key,n.key):(e,t)=>Eg.comparator(e.key,t.key),this.keyedMap=pv(),this.sortedSet=new zg(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Aw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Nw{constructor(){this.z_=new zg(Eg.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?0!==e.type&&3===n.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==n.type?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.z_=this.z_.remove(t):1===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):eg():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Dw{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Dw(e,t,Aw.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Rw{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some((e=>e.Z_()))}}class Lw{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(e,t){const n=ng(e),r=n.queries;n.queries=Pw(),r.forEach(((e,n)=>{for(const r of n.J_)r.onError(t)}))}(this,new ig(rg.ABORTED,"Firestore shutting down"))}}function Pw(){return new cv((e=>sv(e)),iv)}async function Ow(e,t){const n=ng(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new Rw,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const e=xw(a,`Initialization of query '${av(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&jw(n)}async function Mw(e,t){const n=ng(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.J_.indexOf(t);e>=0&&(s.J_.splice(e,1),0===s.J_.length?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uw(e,t){const n=ng(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.J_)e.ta(i)&&(r=!0);t.H_=i}}r&&jw(n)}function Fw(e,t,n){const r=ng(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function jw(e){e.X_.forEach((e=>{e.next()}))}var Vw,zw;(zw=Vw||(Vw={})).na="default",zw.Cache="cache";class Bw{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Dw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache)return!0;if(!this.Z_())return!0;const n="Offline"!==t;return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}aa(e){e=Dw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Vw.Cache}}class $w{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class Hw{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=wv(),this.mutatedKeys=wv(),this.Va=lv(e),this.ma=new Aw(this.Va)}get fa(){return this.da}ga(e,t){const n=t?t.pa:new Nw,r=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=ov(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ya(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.Va(c,o)>0||l&&this.Va(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ma:s,pa:n,ss:a,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return eg()}};return n(e)-n(t)}(e.type,t.type)||this.Va(e.doc,t.doc))),this.wa(n),r=null!=r&&r;const a=t&&!r?this.Sa():[],o=0===this.Ra.size&&this.current&&!r?1:0,l=o!==this.Aa;return this.Aa=o,0!==s.length||l?{snapshot:new Dw(this.query,e.ma,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Nw,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach((e=>this.da=this.da.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.da=this.da.delete(e))),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=wv(),this.ma.forEach((e=>{this.Da(e.key)&&(this.Ra=this.Ra.add(e.key))}));const t=[];return e.forEach((e=>{this.Ra.has(e)||t.push(new qw(e))})),this.Ra.forEach((n=>{e.has(n)||t.push(new $w(n))})),t}va(e){this.da=e.ds,this.Ra=wv();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Dw.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class Kw{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ww{constructor(e){this.key=e,this.Fa=!1}}class Gw{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new cv((e=>sv(e)),iv),this.Oa=new Map,this.Na=new Set,this.La=new zg(Eg.comparator),this.Ba=new Map,this.ka=new m_,this.qa={},this.Qa=new Map,this.Ka=i_.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}async function Qw(e,t,n=!0){const r=gk(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Jw(r,t,n,!0),i}async function Xw(e,t){const n=gk(e);await Jw(n,t,!0,!1)}async function Jw(e,t,n,r){const i=await function(e,t){const n=ng(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Gr.getTargetData(e,t).next((i=>i?(r=i,Dg.resolve(r)):n.Gr.allocateTargetId(e).next((i=>(r=new Jb(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Gr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.us.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.us=n.us.insert(e.targetId,e),n.cs.set(t,e.targetId)),e}))}(e.localStore,tv(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await async function(e,t,n,r,i){e.Ua=(t,n,r)=>async function(e,t,n,r){let i=t.view.ga(n);i.ss&&(i=await L_(e.localStore,t.query,!1).then((({documents:e})=>t.view.ga(e,i))));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ck(e,t.targetId,o.ba),o.snapshot}(e,t,n,r);const s=await L_(e.localStore,t,!0),a=new Hw(t,s.ds),o=a.ga(s.documents),l=fb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);ck(e,n,u.ba);const c=new Kw(t,n,a);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),u.snapshot}(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&tw(e.remoteStore,i),o}async function Yw(e,t,n){const r=ng(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter((e=>!iv(e,t)))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await R_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nw(r.remoteStore,i.targetId),lk(r,i.targetId)})).catch(Ng)):(lk(r,i.targetId),await R_(r.localStore,i.targetId,!0))}async function Zw(e,t){const n=ng(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nw(n.remoteStore,r.targetId))}async function ek(e,t,n){const r=function(e){const t=ng(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ik.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sk.bind(null,t),t}(e);try{const e=await function(e,t){const n=ng(e),r=vg.now(),i=t.reduce(((e,t)=>e.add(t.key)),wv());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=dv(),l=wv();return n.hs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Hv(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Gv(e.key,t,ky(t.value.mapValue),jv.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:mv(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.qa[e.currentUser.toKey()];r||(r=new zg(gg)),r=r.insert(t,n),e.qa[e.currentUser.toKey()]=r}(r,e.batchId,n),await fk(r,e.changes),await mw(r.remoteStore)}catch(i){const e=xw(i,"Failed to persist write");n.reject(e)}}async function tk(e,t){const n=ng(e);try{const e=await function(e,t){const n=ng(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Gr.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Gr.addMatchingKeys(e,s.addedDocuments,o))));let u=l.withSequenceNumber(e.currentSequenceNumber);var c,h,d;null!==t.targetMismatches.get(o)?u=u.withResumeToken(Gg.EMPTY_BYTE_STRING,bg.min()).withLastLimboFreeSnapshotVersion(bg.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),h=u,d=s,(0===(c=l).resumeToken.approximateByteSize()||h.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size>0)&&a.push(n.Gr.updateTargetData(e,u))}));let o=dv(),l=wv();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(function(e,t,n){let r=wv(),i=wv();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=dv();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(bg.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Xm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Is:r,Es:i}}))}(e,s,t.documentUpdates).next((e=>{o=e.Is,l=e.Es}))),!r.isEqual(bg.min())){const t=n.Gr.getLastRemoteSnapshotVersion(e).next((t=>n.Gr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Dg.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.us=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ba.get(t);r&&(tg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Fa=!0:e.modifiedDocuments.size>0?tg(r.Fa):e.removedDocuments.size>0&&(tg(r.Fa),r.Fa=!1))})),await fk(n,e,t)}catch(r){await Ng(r)}}function nk(e,t,n){const r=ng(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xa.forEach(((n,r)=>{const i=r.view.ea(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ng(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.J_)i.ea(t)&&(r=!0)})),r&&jw(n)}(r.eventManager,t),e.length&&r.Ma.R_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rk(e,t,n){const r=ng(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ba.get(t),s=i&&i.key;if(s){let e=new zg(Eg.comparator);e=e.insert(s,Sy.newNoDocument(s,bg.min()));const n=wv().add(s),i=new db(bg.min(),new Map,new zg(gg),e,n);await tk(r,i),r.La=r.La.remove(s),r.Ba.delete(t),dk(r)}else await R_(r.localStore,t,!1).then((()=>lk(r,t,n))).catch(Ng)}async function ik(e,t){const n=ng(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ng(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.hs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Dg.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);tg(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=wv();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ok(n,r,null),ak(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fk(n,e)}catch(i){await Ng(i)}}async function sk(e,t,n){const r=ng(e);try{const e=await function(e,t){const n=ng(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(tg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ok(r,t,n),ak(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fk(r,e)}catch(i){await Ng(i)}}function ak(e,t){(e.Qa.get(t)||[]).forEach((e=>{e.resolve()})),e.Qa.delete(t)}function ok(e,t,n){const r=ng(e);let i=r.qa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function lk(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach((t=>{e.ka.containsKey(t)||uk(e,t)}))}function uk(e,t){e.Na.delete(t.path.canonicalString());const n=e.La.get(t);null!==n&&(nw(e.remoteStore,n),e.La=e.La.remove(t),e.Ba.delete(n),dk(e))}function ck(e,t,n){for(const r of n)r instanceof $w?(e.ka.addReference(r.key,t),hk(e,r)):r instanceof qw?(Xm("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||uk(e,r.key)):eg()}function hk(e,t){const n=t.key,r=n.path.canonicalString();e.La.get(n)||e.Na.has(r)||(Xm("SyncEngine","New document in limbo: "+n),e.Na.add(r),dk(e))}function dk(e){for(;e.Na.size>0&&e.La.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Eg(wg.fromString(t)),r=e.Ka.next();e.Ba.set(r,new Ww(n)),e.La=e.La.insert(n,r),tw(e.remoteStore,new Jb(tv(Jy(n.path)),r,"TargetPurposeLimboResolution",Lg.oe))}}async function fk(e,t,n){const r=ng(e),i=[],s=[],a=[];r.xa.isEmpty()||(r.xa.forEach(((e,o)=>{a.push(r.Ua(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=T_.zi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Ma.R_(i),await async function(e,t){const n=ng(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Dg.forEach(t,(t=>Dg.forEach(t.Wi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Dg.forEach(t.Gi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(r){if(!Rg(r))throw r;Xm("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.us.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.us=n.us.insert(e,i)}}}(r.localStore,s))}async function pk(e,t){const n=ng(e);if(!n.currentUser.isEqual(t)){Xm("SyncEngine","User change. New user:",t.toKey());const e=await A_(n.localStore,t);n.currentUser=t,"'waitForPendingWrites' promise is rejected due to a user change.",(r=n).Qa.forEach((e=>{e.forEach((e=>{e.reject(new ig(rg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),r.Qa.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fk(n,e.Ts)}var r}function mk(e,t){const n=ng(e),r=n.Ba.get(t);if(r&&r.Fa)return wv().add(r.key);{let e=wv();const r=n.Oa.get(t);if(!r)return e;for(const t of r){const r=n.xa.get(t);e=e.unionWith(r.view.fa)}return e}}function gk(e){const t=ng(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rk.bind(null,t),t.Ma.R_=Uw.bind(null,t.eventManager),t.Ma.Wa=Fw.bind(null,t.eventManager),t}class yk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=H_(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return function(e,t,n,r){return new x_(e,t,n,r)}(this.persistence,new C_,e.initialUser,this.serializer)}ja(e){return new w_(S_.ei,this.serializer)}za(e){return new O_}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yk.provider={build:()=>new yk};class vk extends yk{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){tg(this.persistence.referenceDelegate instanceof E_);const n=this.persistence.referenceDelegate.garbageCollector;return new o_(n,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?r_.withCacheSize(this.cacheSizeBytes):r_.DEFAULT;return new w_((e=>E_.ei(e,t)),this.serializer)}}class bk{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>nk(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pk.bind(null,this.syncEngine),await async function(e,t){const n=ng(e);t?(n.k_.delete(2),await Z_(n)):t||(n.k_.add(2),await ew(n),n.K_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Lw}createDatastore(e){const t=H_(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new $_(r));var r;return function(e,t,n,r){return new X_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>nk(this.syncEngine,e,0),s=U_.p()?new U_:new M_,new Y_(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Gw(e,t,n,r,i,s);return a&&(o.$a=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ng(e);Xm("RemoteStore","RemoteStore shutting down."),t.k_.add(5),await ew(t),t.Q_.shutdown(),t.K_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}bk.provider={build:()=>new bk};class _k{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Jm("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class wk{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Km.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Xm("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Xm("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=xw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function kk(e,t){e.asyncQueue.verifyOperationInProgress(),Xm("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await A_(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Sk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Xm("FirestoreClient","Using user provided OfflineComponentProvider");try{await kk(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===rg.FAILED_PRECONDITION||n.code===rg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;Ym("Error using user provided cache. Falling back to memory cache: "+i),await kk(e,new yk)}}else Xm("FirestoreClient","Using default OfflineComponentProvider"),await kk(e,new vk(void 0));var n;return e._offlineComponents}(e);Xm("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ew(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ew(t.remoteStore,n))),e._onlineComponents=t}async function Ek(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Xm("FirestoreClient","Using user provided OnlineComponentProvider"),await Sk(e,e._uninitializedComponentsProvider._online)):(Xm("FirestoreClient","Using default OnlineComponentProvider"),await Sk(e,new bk))),e._onlineComponents}async function Tk(e){const t=await Ek(e),n=t.eventManager;return n.onListen=Qw.bind(null,t.syncEngine),n.onUnlisten=Yw.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Xw.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Zw.bind(null,t.syncEngine),n}function Ik(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ck=new Map;function xk(e,t,n){if(!n)throw new ig(rg.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ak(e){if(!Eg.isDocumentKey(e))throw new ig(rg.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Nk(e){if(Eg.isDocumentKey(e))throw new ig(rg.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":eg()}function Rk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ig(rg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dk(e);throw new ig(rg.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Lk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ig(rg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ig(rg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ig(rg.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ik(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ig(rg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ig(rg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ig(rg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Pk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ig(rg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ig(rg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new og;switch(e.type){case"firstParty":return new hg(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ig(rg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ck.get(e);t&&(Xm("ComponentProvider","Removing Datastore"),Ck.delete(e),t.terminate())}(this),Promise.resolve()}}class Ok{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ok(this.firestore,e,this._query)}}class Mk{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mk(this.firestore,e,this._key)}}class Uk extends Ok{constructor(e,t,n){super(e,t,Jy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mk(this.firestore,null,new Eg(e))}withConverter(e){return new Uk(this.firestore,e,this._path)}}function Fk(e,t,...n){if(e=Jh(e),xk("collection","path",t),e instanceof Pk){const r=wg.fromString(t,...n);return Nk(r),new Uk(e,null,r)}{if(!(e instanceof Mk||e instanceof Uk))throw new ig(rg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wg.fromString(t,...n));return Nk(r),new Uk(e.firestore,null,r)}}class jk{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new K_(this,"async_queue_retry"),this.fu=()=>{const e=q_();e&&Xm("AsyncQueue","Visibility state changed to "+e.visibilityState),this.r_.Jo()},this.gu=e;const t=q_();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=q_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise((()=>{}));const t=new sg;return this.yu((()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Iu.push(e),this.wu())))}async wu(){if(0!==this.Iu.length){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Rg(e))throw e;Xm("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo((()=>this.wu()))}}yu(e){const t=this.gu.then((()=>(this.Ru=!0,e().catch((e=>{throw this.Au=e,this.Ru=!1,Jm("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.Ru=!1,e))))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=Cw.createAndSchedule(this,e,t,n,(e=>this.Su(e)));return this.du.push(r),r}pu(){this.Au&&eg()}verifyOperationInProgress(){}async bu(){let e;do{e=this.gu,await e}while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then((()=>{this.du.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()}))}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Vk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class zk extends Pk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jk(e),this._firestoreClient=void 0,await e}}}function Bk(e){if(e._terminated)throw new ig(rg.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,new ny(a,o,l,(u=i).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Ik(u.experimentalLongPollingOptions),u.useFetchStreams));var a,o,l,u;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new wk(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class $k{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $k(Gg.fromBase64String(e))}catch(t){throw new ig(rg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $k(Gg.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qk{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ig(rg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sg(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hk{constructor(e){this._methodName=e}}class Kk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ig(rg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ig(rg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gg(this._lat,e._lat)||gg(this._long,e._long)}}class Wk{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Gk=/^__.*__$/;class Qk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wv(e,this.data,t,this.fieldTransforms)}}function Xk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw eg()}}class Jk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Jk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Lu(e),r}Bu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return uS(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(0===e.length)throw this.qu("Document fields must not be empty");if(Xk(this.Mu)&&Gk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Yk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||H_(e)}$u(e,t,n,r=!1){return new Jk({Mu:e,methodName:t,Ku:n,path:Sg.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zk(e){const t=e._freezeSettings(),n=H_(e._databaseId);return new Yk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function eS(e,t,n,r,i,s={}){const a=e.$u(s.merge||s.mergeFields?2:0,t,n,i);sS("Data must be an object, but it was:",a,r);const o=rS(r,a);let l,u;if(s.merge)l=new Kg(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=aS(t,r,n);if(!a.contains(i))throw new ig(rg.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);cS(e,i)||e.push(i)}l=new Kg(e),u=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=a.fieldTransforms;return new Qk(new wy(o),l,u)}class tS extends Hk{_toFieldTransform(e){return new Uv(e.path,new Av)}isEqual(e){return e instanceof tS}}function nS(e,t){if(iS(e=Jh(e)))return sS("Unsupported field value:",t,e),rS(e,t);if(e instanceof Hk)return function(e,t){if(!Xk(t.Mu))throw t.qu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.qu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&4!==t.Mu)throw t.qu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=nS(i,t.ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Jh(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return function(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Og(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Ev(t):Sv(e,t)}(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=vg.fromDate(e);return{timestampValue:Ib(t.serializer,n)}}if(e instanceof vg){const n=new vg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ib(t.serializer,n)}}if(e instanceof Kk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $k)return{bytesValue:Cb(t.serializer,e._byteString)};if(e instanceof Mk){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.qu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Nb(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Wk)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw n.qu("VectorValues must only contain numeric values.");return Sv(n.serializer,e)}))}}}}};var n;throw t.qu(`Unsupported field value: ${Dk(e)}`)}(e,t)}function rS(e,t){const n={};return Vg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jg(e,((e,r)=>{const i=nS(r,t.Ou(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vg||e instanceof Kk||e instanceof $k||e instanceof Mk||e instanceof Hk||e instanceof Wk)}function sS(e,t,n){if(!iS(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Dk(n);throw"an object"===r?t.qu(e+" a custom object"):t.qu(e+" "+r)}var r}function aS(e,t,n){if((t=Jh(t))instanceof qk)return t._internalPath;if("string"==typeof t)return lS(e,t);throw uS("Field path arguments must be of type string or ",e,!1,void 0,n)}const oS=new RegExp("[~\\*/\\[\\]]");function lS(e,t,n){if(t.search(oS)>=0)throw uS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qk(...t.split("."))._internalPath}catch(r){throw uS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function uS(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ig(rg.INVALID_ARGUMENT,o+e+l)}function cS(e,t){return e.some((e=>e.isEqual(t)))}class hS{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dS extends hS{data(){return super.data()}}function fS(e,t){return"string"==typeof t?lS(e,t):t instanceof qk?t._internalPath:t._delegate._internalPath}function pS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ig(rg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mS{}class gS extends mS{}function yS(e,t,...n){let r=[];t instanceof mS&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof bS)).length,n=e.filter((e=>e instanceof vS)).length;if(t>1||t>0&&n>0)throw new ig(rg.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class vS extends gS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new vS(e,t,n)}_apply(e){const t=this._parse(e);return ES(e._query,t),new Ok(e.firestore,e.converter,nv(e._query,t))}_parse(e){const t=Zk(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ig(rg.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){SS(a,s);const t=[];for(const n of a)t.push(kS(r,e,n));o={arrayValue:{values:t}}}else o=kS(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||SS(a,s),o=function(e,t,n,r=!1){return nS(n,e.$u(r?4:3,t))}(n,"where",a,"in"===s||"not-in"===s);return Ny.create(i,s,o)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class bS extends mS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bS(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Dy.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ES(n,i),n=nv(n,i)}(e._query,t),new Ok(e.firestore,e.converter,nv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _S extends gS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _S(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ig(rg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ig(rg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cy(t,n)}(e._query,this._field,this._direction);return new Ok(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function wS(e,t="asc"){const n=t,r=fS("orderBy",e);return _S._create(r,n)}function kS(e,t,n){if("string"==typeof(n=Jh(n))){if(""===n)throw new ig(rg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zy(t)&&-1!==n.indexOf("/"))throw new ig(rg.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(wg.fromString(n));if(!Eg.isDocumentKey(r))throw new ig(rg.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return py(e,new Eg(r))}if(n instanceof Mk)return py(e,n._key);throw new ig(rg.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dk(n)}.`)}function SS(e,t){if(!Array.isArray(e)||0===e.length)throw new ig(rg.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ES(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ig(rg.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ig(rg.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class TS{convertValue(e,t="none"){switch(sy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw eg()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return jg(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Jg(e.doubleValue)));return new Wk(i)}convertGeoPoint(e){return new Kk(Jg(e.latitude),Jg(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ey(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ty(e));default:return null}}convertTimestamp(e){const t=Xg(e);return new vg(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wg.fromString(e);tg(Xb(n));const r=new ry(n.get(1),n.get(3)),i=new Eg(n.popFirst(5));return r.isEqual(t)||Jm(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class IS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CS extends hS{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(fS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class xS extends CS{data(e={}){return super.data(e)}}class AS{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new IS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new xS(this._firestore,this._userDataWriter,n.key,n,new IS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ig(rg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new xS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new IS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new xS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new IS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:NS(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return eg()}}class DS extends TS{constructor(e){super(),this.firestore=e}convertBytes(e){return new $k(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mk(this.firestore,null,t)}}!function(e,t=!0){Wm=zd,Md(new Yh("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new zk(new ug(e.getProvider("auth-internal")),new fg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ig(rg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ry(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),qd(Hm,"4.7.5",e),qd(Hm,"4.7.5","esm2017")}();const RS=Bd({apiKey:"AIzaSyCeEugEAqUjV_EviVAJX6K-_CeEd2k3eBs",authDomain:"ecofox-adventures.firebaseapp.com",projectId:"ecofox-adventures",storageBucket:"ecofox-adventures.firebasestorage.app",messagingSenderId:"679479708495",appId:"1:679479708495:web:2c6901d0aa69bdcddd933a"}),LS=function(e=$d()){const t=Ud(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ud(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Kh(n.getOptions(),null!=t?t:{}))return e;lf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Im,persistence:[Wp,Np,Rp]}),r=Vh("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Nm)return;const r=null==t?void 0:t.token;Dm!==r&&(Dm=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Jh(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){Jh(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}var i;const s=Fh("auth");return s&&function(e,t,n){const r=up(e);ff(r._canInitEmulator,r,"emulator-config-failed"),ff(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=dp(t),{host:s,port:a}=function(e){const t=dp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:fp(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:fp(t)}}}(t),o=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${s}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}(RS),PS=function(e,t){const n="string"==typeof RS?RS:"(default)",r=Ud("object"==typeof RS?RS:$d(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Fh("firestore");if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})();e&&function(e,t,n,r={}){var i;const s=(e=Rk(e,Pk))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Ym("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Km.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oh(JSON.stringify({alg:"none",type:"JWT"})),Oh(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ig(rg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Km(s)}e._authCredentials=new lg(new ag(t,n))}}(r,...e)}return r}();(async function(e){var t;if(Fd(e.app))return Promise.reject(hf(e));const n=up(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Sp({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await async function(e,t){return If(e,"POST","/v1/accounts:signUp",Sf(e,{returnSecureToken:!0}))}(n),i=await Sp._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i})(LS).then((()=>{console.log("Signed in anonymously")})).catch((e=>{console.error("Anonymous sign-in failed:",e)}));const OS=({onClose:e})=>{const[t,n]=B.useState([]),[r,i]=B.useState(!0),[s,a]=B.useState(null);return B.useEffect((()=>{(async()=>{try{const e=await(async()=>{try{const e=yS(Fk(PS,"leaderboard"),wS("totalScore","desc"));return(await function(e){e=Rk(e,Ok);const t=Rk(e.firestore,zk),n=Bk(t),r=new DS(t);return pS(e._query),function(e,t,n={}){const r=new sg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new _k({next:n=>{s.eu(),t.enqueueAndForget((()=>Mw(e,a))),n.fromCache&&"server"===r.source?i.reject(new ig(rg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Bw(n,s,{includeMetadataChanges:!0,ua:!0});return Ow(e,a)}(await Tk(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new AS(t,r,e,n)))}(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(s){throw console.error("Error fetching leaderboard:",s),s}})();n(e),i(!1)}catch(e){a("Failed to load leaderboard. Please try again later."),i(!1)}})();const e=function(e,...t){var n,r,i;e=Jh(e);let s={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof t[a]||Vk(t[a])||(s=t[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Vk(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof Mk)u=Rk(e.firestore,zk),c=Jy(e._key.path),l={next:n=>{t[a]&&t[a](function(e,t,n){const r=n.docs.get(t._key),i=new DS(e);return new CS(e,i,t._key,r,new IS(n.hasPendingWrites,n.fromCache),t.converter)}(u,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Rk(e,Ok);u=Rk(n.firestore,zk),c=n._query;const r=new DS(u);l={next:e=>{t[a]&&t[a](new AS(u,r,n,e))},error:t[a+1],complete:t[a+2]},pS(e._query)}return function(e,t,n,r){const i=new _k(r),s=new Bw(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ow(await Tk(e),s))),()=>{i.eu(),e.asyncQueue.enqueueAndForget((async()=>Mw(await Tk(e),s)))}}(Bk(u),c,o,l)}(yS(Fk(PS,"leaderboard"),wS("totalScore","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t)}),(e=>{console.error("Error with real-time leaderboard:",e)}));return()=>{e()}}),[]),J.jsx("div",{className:"leaderboard-overlay",onClick:e=>e.stopPropagation(),children:J.jsxs("div",{className:"leaderboard-container",onClick:e=>e.stopPropagation(),children:[J.jsx("h2",{className:"leaderboard-title",children:"Leaderboard"}),r&&J.jsx("p",{children:"Loading..."}),s&&J.jsx("p",{className:"error",children:s}),!r&&!s&&J.jsxs("table",{className:"leaderboard-table",children:[J.jsx("thead",{children:J.jsxs("tr",{children:[J.jsx("th",{children:"Rank"}),J.jsx("th",{children:"Player Name"}),J.jsx("th",{children:"Total Score"}),J.jsx("th",{children:"Total Time (s)"})]})}),J.jsx("tbody",{children:t.map(((e,t)=>J.jsxs("tr",{children:[J.jsx("td",{children:t+1<=3?J.jsx("img",{src:`/EcoFox-Adventures/assets/ui/medal${t+1}.png`,alt:`Rank ${t+1}`,width:"32",height:"32"}):t+1}),J.jsx("td",{children:e.playerName}),J.jsx("td",{children:e.totalScore}),J.jsx("td",{children:e.totalTimeTaken})]},e.id)))})]}),J.jsx("button",{className:"close-button",onClick:e,children:"Close"})]})})};function MS(){const e=B.useRef(),[t,n]=B.useState(null),[r,i]=B.useState("fade-in"),[s,a]=B.useState(!1),[o,l]=B.useState(!1),u="Game"===t||"DebugGame"===t,c=B.useRef(!1);return B.useEffect((()=>{const e=e=>{i("Game"!==e&&"DebugGame"!==e?"fade-out":"fade-in"),n(e)},t=()=>{i("fade-in")},r=()=>{i("fade-out")},s=()=>{a(!0)},o=()=>{l(!0)},u=async e=>{if(!c.current){c.current=!0;try{a(!1),dh.playerName=e,await(async(e,t,n)=>{try{const r=Fk(PS,"leaderboard");await function(e,t){const n=Rk(e.firestore,zk),r=function(e,t,...n){if(e=Jh(e),1===arguments.length&&(t=mg.newId()),xk("doc","path",t),e instanceof Pk){const r=wg.fromString(t,...n);return Ak(r),new Mk(e,null,new Eg(r))}{if(!(e instanceof Mk||e instanceof Uk))throw new ig(rg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wg.fromString(t,...n));return Ak(r),new Mk(e.firestore,e instanceof Uk?e.converter:null,new Eg(r))}}(e),i=function(e,t,n){let r;return r=e?e.toFirestore(t):t,r}(e.converter,t);return function(e,t){return function(e,t){const n=new sg;return e.asyncQueue.enqueueAndForget((async()=>ek(await function(e){return Ek(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(Bk(e),t)}(n,[eS(Zk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,jv.exists(!1))]).then((()=>r))}(r,{playerName:e,totalScore:t,totalTimeTaken:n,timestamp:new tS("serverTimestamp")}),console.log("Player score added to leaderboard successfully.")}catch(r){throw console.error("Error adding player score to leaderboard:",r),r}})(dh.playerName,dh.totalScore,dh.totalTimeTaken),hh.emit("navigateToMainMenu")}catch(t){console.error("Failed to submit player score:",t),c.current=!1}}};return hh.on("fade-in",t),hh.on("fade-out",r),hh.on("scene-change",e),hh.on("gameDone",s),hh.on("nameSubmitted",u),hh.on("showLeaderboard",o),()=>{hh.off("scene-change",e),hh.off("fade-out",r),hh.off("fade-in",t),hh.off("gameDone",s),hh.off("nameSubmitted",u),hh.off("showLeaderboard",o)}}),[]),B.useEffect((()=>{if(e.current){e.current.game.input.enabled=!o}}),[o]),J.jsx("div",{id:"app",children:J.jsxs("div",{id:"game-container",children:[J.jsx(Th,{ref:e}),(u||"fade-out"===r)&&J.jsxs("div",{className:`ui-components ${r}`,children:[J.jsx(Ih,{}),J.jsx(Ah,{}),J.jsx(Ch,{collectableAsset:"/EcoFox-Adventures/assets/collectables/berry_gray.png",collectedAsset:"/EcoFox-Adventures/assets/collectables/berry.png"}),J.jsx(xh,{})]}),s&&J.jsx(Nh,{}),o&&J.jsx(OS,{onClose:()=>l(!1)})]})})}Y.createRoot(document.getElementById("root")).render(J.jsx($.StrictMode,{children:J.jsx(MS,{})}));
